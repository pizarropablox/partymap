import{a as m,b as w,c as xn,d as Tt,e as zi,f}from"./chunk-42NE2CY3.js";var Ep;function Ip(){return Ep}function Ln(n){let e=Ep;return Ep=n,e}var qb=Symbol("NotFound"),bu=class extends Error{name="\u0275NotFound";constructor(e){super(e)}};function Vi(n){return n===qb||n?.name==="\u0275NotFound"}function jC(n,e){return Object.is(n,e)}var Oe=null,Au=!1,Tp=1;var Du=Symbol("SIGNAL");function Y(n){let e=Oe;return Oe=n,e}function wp(){return Oe}var Mu={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Sp(n){if(Au)throw new Error("");if(Oe===null)return;Oe.consumerOnSignalRead(n);let e=Oe.nextProducerIndex++;if(Ou(Oe),e<Oe.producerNode.length&&Oe.producerNode[e]!==n&&Ua(Oe)){let t=Oe.producerNode[e];Nu(t,Oe.producerIndexOfThis[e])}Oe.producerNode[e]!==n&&(Oe.producerNode[e]=n,Oe.producerIndexOfThis[e]=Ua(Oe)?GC(n,Oe,e):0),Oe.producerLastReadVersion[e]=n.version}function zC(){Tp++}function VC(n){if(!(Ua(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Tp)){if(!n.producerMustRecompute(n)&&!ku(n)){_p(n);return}n.producerRecomputeValue(n),_p(n)}}function bp(n){if(n.liveConsumerNode===void 0)return;let e=Au;Au=!0;try{for(let t of n.liveConsumerNode)t.dirty||Kb(t)}finally{Au=e}}function $C(){return Oe?.consumerAllowSignalWrites!==!1}function Kb(n){n.dirty=!0,bp(n),n.consumerMarkedDirty?.(n)}function _p(n){n.dirty=!1,n.lastCleanEpoch=Tp}function Ru(n){return n&&(n.nextProducerIndex=0),Y(n)}function Ap(n,e){if(Y(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Ua(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Nu(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function ku(n){Ou(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(VC(t),r!==t.version))return!0}return!1}function Dp(n){if(Ou(n),Ua(n))for(let e=0;e<n.producerNode.length;e++)Nu(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function GC(n,e,t){if(qC(n),n.liveConsumerNode.length===0&&KC(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=GC(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Nu(n,e){if(qC(n),n.liveConsumerNode.length===1&&KC(n))for(let r=0;r<n.producerNode.length;r++)Nu(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],o=n.liveConsumerNode[e];Ou(o),o.producerIndexOfThis[r]=e}}function Ua(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ou(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function qC(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function KC(n){return n.producerNode!==void 0}function Wb(){throw new Error}var WC=Wb;function Yb(n){WC(n)}function Mp(n){WC=n}var Qb=null;function Rp(n,e){$C()||Yb(n),n.equal(n.value,e)||(n.value=e,Zb(n))}var kp=w(m({},Mu),{equal:jC,value:void 0,kind:"signal"});function Zb(n){n.version++,zC(),bp(n),Qb?.(n)}function H(n){return typeof n=="function"}function $i(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Pu=$i(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ha(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var we=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let i of t)i.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(H(r))try{r()}catch(i){e=i instanceof Pu?i.errors:[i]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let i of o)try{YC(i)}catch(s){e=e??[],s instanceof Pu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Pu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)YC(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ha(t,e)}remove(e){let{_finalizers:t}=this;t&&Ha(t,e),e instanceof n&&e._removeParent(this)}};we.EMPTY=(()=>{let n=new we;return n.closed=!0,n})();var Np=we.EMPTY;function xu(n){return n instanceof we||n&&"closed"in n&&H(n.remove)&&H(n.add)&&H(n.unsubscribe)}function YC(n){H(n)?n():n.unsubscribe()}var Kt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Gi={setTimeout(n,e,...t){let{delegate:r}=Gi;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Gi;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Lu(n){Gi.setTimeout(()=>{let{onUnhandledError:e}=Kt;if(e)e(n);else throw n})}function Ba(){}var QC=Op("C",void 0,void 0);function ZC(n){return Op("E",void 0,n)}function JC(n){return Op("N",n,void 0)}function Op(n,e,t){return{kind:n,value:e,error:t}}var fo=null;function qi(n){if(Kt.useDeprecatedSynchronousErrorHandling){let e=!fo;if(e&&(fo={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=fo;if(fo=null,t)throw r}}else n()}function XC(n){Kt.useDeprecatedSynchronousErrorHandling&&fo&&(fo.errorThrown=!0,fo.error=n)}var po=class extends we{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,xu(e)&&e.add(this)):this.destination=eA}static create(e,t,r){return new Ki(e,t,r)}next(e){this.isStopped?xp(JC(e),this):this._next(e)}error(e){this.isStopped?xp(ZC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?xp(QC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Jb=Function.prototype.bind;function Pp(n,e){return Jb.call(n,e)}var Lp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Fu(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Fu(r)}else Fu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Fu(t)}}},Ki=class extends po{constructor(e,t,r){super();let o;if(H(e)||!e)o={next:e??void 0,error:t??void 0,complete:r??void 0};else{let i;this&&Kt.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&Pp(e.next,i),error:e.error&&Pp(e.error,i),complete:e.complete&&Pp(e.complete,i)}):o=e}this.destination=new Lp(o)}};function Fu(n){Kt.useDeprecatedSynchronousErrorHandling?XC(n):Lu(n)}function Xb(n){throw n}function xp(n,e){let{onStoppedNotification:t}=Kt;t&&Gi.setTimeout(()=>t(n,e))}var eA={closed:!0,next:Ba,error:Xb,complete:Ba};var Wi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function wt(n){return n}function Fp(...n){return Up(n)}function Up(n){return n.length===0?wt:n.length===1?n[0]:function(t){return n.reduce((r,o)=>o(r),t)}}var W=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,o){let i=nA(t)?t:new Ki(t,r,o);return qi(()=>{let{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=eE(r),new r((o,i)=>{let s=new Ki({next:a=>{try{t(a)}catch(c){i(c),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Wi](){return this}pipe(...t){return Up(t)(this)}toPromise(t){return t=eE(t),new t((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return n.create=e=>new n(e),n})();function eE(n){var e;return(e=n??Kt.Promise)!==null&&e!==void 0?e:Promise}function tA(n){return n&&H(n.next)&&H(n.error)&&H(n.complete)}function nA(n){return n&&n instanceof po||tA(n)&&xu(n)}function Hp(n){return H(n?.lift)}function Q(n){return e=>{if(Hp(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Z(n,e,t,r,o){return new Bp(n,e,t,r,o)}var Bp=class extends po{constructor(e,t,r,o,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Yi(){return Q((n,e)=>{let t=null;n._refCount++;let r=Z(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let o=n._connection,i=t;t=null,o&&(!i||o===i)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Qi=class extends W{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Hp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new we;let t=this.getSubject();e.add(this.source.subscribe(Z(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=we.EMPTY)}return e}refCount(){return Yi()(this)}};var tE=$i(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ce=(()=>{class n extends W{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Uu(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new tE}next(t){qi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){qi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){qi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:o,observers:i}=this;return r||o?Np:(this.currentObservers=null,i.push(t),new we(()=>{this.currentObservers=null,Ha(i,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:o,isStopped:i}=this;r?t.error(o):i&&t.complete()}asObservable(){let t=new W;return t.source=this,t}}return n.create=(e,t)=>new Uu(e,t),n})(),Uu=class extends Ce{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Np}};var Se=class extends Ce{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var jp={now(){return(jp.delegate||Date).now()},delegate:void 0};var ja=class extends Ce{constructor(e=1/0,t=1/0,r=jp){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:i,_windowTime:s}=this;t||(r.push(e),!o&&r.push(i.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,i=o.slice();for(let s=0;s<i.length&&!e.closed;s+=r?1:2)e.next(i[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,i=(o?1:2)*e;if(e<1/0&&i<r.length&&r.splice(0,r.length-i),!o){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var et=new W(n=>n.complete());function nE(n){return n&&H(n.schedule)}function rE(n){return n[n.length-1]}function oE(n){return H(rE(n))?n.pop():void 0}function _r(n){return nE(rE(n))?n.pop():void 0}function sE(n,e,t,r){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(h){s(h)}}function c(u){try{l(r.throw(u))}catch(h){s(h)}}function l(u){u.done?i(u.value):o(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function iE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function go(n){return this instanceof go?(this.v=n,this):new go(n)}function aE(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(p){return function(E){return Promise.resolve(E).then(p,h)}}function a(p,E){r[p]&&(o[p]=function(_){return new Promise(function(b,O){i.push([p,_,b,O])>1||c(p,_)})},E&&(o[p]=E(o[p])))}function c(p,E){try{l(r[p](E))}catch(_){g(i[0][3],_)}}function l(p){p.value instanceof go?Promise.resolve(p.value.v).then(u,h):g(i[0][2],p)}function u(p){c("next",p)}function h(p){c("throw",p)}function g(p,E){p(E),i.shift(),i.length&&c(i[0][0],i[0][1])}}function cE(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof iE=="function"?iE(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(s){return new Promise(function(a,c){s=n[i](s),o(a,c,s.done,s.value)})}}function o(i,s,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},s)}}var Hu=n=>n&&typeof n.length=="number"&&typeof n!="function";function Bu(n){return H(n?.then)}function ju(n){return H(n[Wi])}function zu(n){return Symbol.asyncIterator&&H(n?.[Symbol.asyncIterator])}function Vu(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function rA(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var $u=rA();function Gu(n){return H(n?.[$u])}function qu(n){return aE(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:o}=yield go(t.read());if(o)return yield go(void 0);yield yield go(r)}}finally{t.releaseLock()}})}function Ku(n){return H(n?.getReader)}function Be(n){if(n instanceof W)return n;if(n!=null){if(ju(n))return oA(n);if(Hu(n))return iA(n);if(Bu(n))return sA(n);if(zu(n))return lE(n);if(Gu(n))return aA(n);if(Ku(n))return cA(n)}throw Vu(n)}function oA(n){return new W(e=>{let t=n[Wi]();if(H(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function iA(n){return new W(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function sA(n){return new W(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Lu)})}function aA(n){return new W(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function lE(n){return new W(e=>{lA(n,e).catch(t=>e.error(t))})}function cA(n){return lE(qu(n))}function lA(n,e){var t,r,o,i;return sE(this,void 0,void 0,function*(){try{for(t=cE(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=t.return)&&(yield i.call(t))}finally{if(o)throw o.error}}e.complete()})}function ht(n,e,t,r=0,o=!1){let i=e.schedule(function(){t(),o?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(i),!o)return i}function Wu(n,e=0){return Q((t,r)=>{t.subscribe(Z(r,o=>ht(r,n,()=>r.next(o),e),()=>ht(r,n,()=>r.complete(),e),o=>ht(r,n,()=>r.error(o),e)))})}function Yu(n,e=0){return Q((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function uE(n,e){return Be(n).pipe(Yu(e),Wu(e))}function dE(n,e){return Be(n).pipe(Yu(e),Wu(e))}function hE(n,e){return new W(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function fE(n,e){return new W(t=>{let r;return ht(t,e,()=>{r=n[$u](),ht(t,e,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){t.error(s);return}i?t.complete():t.next(o)},0,!0)}),()=>H(r?.return)&&r.return()})}function Qu(n,e){if(!n)throw new Error("Iterable cannot be null");return new W(t=>{ht(t,e,()=>{let r=n[Symbol.asyncIterator]();ht(t,e,()=>{r.next().then(o=>{o.done?t.complete():t.next(o.value)})},0,!0)})})}function pE(n,e){return Qu(qu(n),e)}function gE(n,e){if(n!=null){if(ju(n))return uE(n,e);if(Hu(n))return hE(n,e);if(Bu(n))return dE(n,e);if(zu(n))return Qu(n,e);if(Gu(n))return fE(n,e);if(Ku(n))return pE(n,e)}throw Vu(n)}function J(n,e){return e?gE(n,e):Be(n)}function N(...n){let e=_r(n);return J(n,e)}function Zi(n,e){let t=H(n)?n:()=>n,r=o=>o.error(t());return new W(e?o=>e.schedule(r,0,o):r)}function zp(n){return!!n&&(n instanceof W||H(n.lift)&&H(n.subscribe))}var Fn=$i(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function B(n,e){return Q((t,r)=>{let o=0;t.subscribe(Z(r,i=>{r.next(n.call(e,i,o++))}))})}var{isArray:uA}=Array;function dA(n,e){return uA(e)?n(...e):n(e)}function mE(n){return B(e=>dA(n,e))}var{isArray:hA}=Array,{getPrototypeOf:fA,prototype:pA,keys:gA}=Object;function yE(n){if(n.length===1){let e=n[0];if(hA(e))return{args:e,keys:null};if(mA(e)){let t=gA(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function mA(n){return n&&typeof n=="object"&&fA(n)===pA}function vE(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}function za(...n){let e=_r(n),t=oE(n),{args:r,keys:o}=yE(n);if(r.length===0)return J([],e);let i=new W(yA(r,e,o?s=>vE(o,s):wt));return t?i.pipe(mE(t)):i}function yA(n,e,t=wt){return r=>{CE(e,()=>{let{length:o}=n,i=new Array(o),s=o,a=o;for(let c=0;c<o;c++)CE(e,()=>{let l=J(n[c],e),u=!1;l.subscribe(Z(r,h=>{i[c]=h,u||(u=!0,a--),a||r.next(t(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}function CE(n,e,t){n?ht(t,n,e):e()}function EE(n,e,t,r,o,i,s,a){let c=[],l=0,u=0,h=!1,g=()=>{h&&!c.length&&!l&&e.complete()},p=_=>l<r?E(_):c.push(_),E=_=>{i&&e.next(_),l++;let b=!1;Be(t(_,u++)).subscribe(Z(e,O=>{o?.(O),i?p(O):e.next(O)},()=>{b=!0},void 0,()=>{if(b)try{for(l--;c.length&&l<r;){let O=c.shift();s?ht(e,s,()=>E(O)):E(O)}g()}catch(O){e.error(O)}}))};return n.subscribe(Z(e,p,()=>{h=!0,g()})),()=>{a?.()}}function Pe(n,e,t=1/0){return H(e)?Pe((r,o)=>B((i,s)=>e(r,i,o,s))(Be(n(r,o))),t):(typeof e=="number"&&(t=e),Q((r,o)=>EE(r,o,n,t)))}function IE(n=1/0){return Pe(wt,n)}function _E(){return IE(1)}function Ji(...n){return _E()(J(n,_r(n)))}function Va(n){return new W(e=>{Be(n()).subscribe(e)})}function tt(n,e){return Q((t,r)=>{let o=0;t.subscribe(Z(r,i=>n.call(e,i,o++)&&r.next(i)))})}function hn(n){return Q((e,t)=>{let r=null,o=!1,i;r=e.subscribe(Z(t,void 0,void 0,s=>{i=Be(n(s,hn(n)(e))),r?(r.unsubscribe(),r=null,i.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(t))})}function TE(n,e,t,r,o){return(i,s)=>{let a=t,c=e,l=0;i.subscribe(Z(s,u=>{let h=l++;c=a?n(c,u,h):(a=!0,u),r&&s.next(c)},o&&(()=>{a&&s.next(c),s.complete()})))}}function Wt(n,e){return H(e)?Pe(n,e,1):Pe(n,1)}function Tr(n){return Q((e,t)=>{let r=!1;e.subscribe(Z(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function St(n){return n<=0?()=>et:Q((e,t)=>{let r=0;e.subscribe(Z(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function Zu(n=vA){return Q((e,t)=>{let r=!1;e.subscribe(Z(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function vA(){return new Fn}function wr(n){return Q((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Un(n,e){let t=arguments.length>=2;return r=>r.pipe(n?tt((o,i)=>n(o,i,r)):wt,St(1),t?Tr(e):Zu(()=>new Fn))}function Xi(n){return n<=0?()=>et:Q((e,t)=>{let r=[];e.subscribe(Z(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(let o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Vp(n,e){let t=arguments.length>=2;return r=>r.pipe(n?tt((o,i)=>n(o,i,r)):wt,Xi(1),t?Tr(e):Zu(()=>new Fn))}function $p(n,e){return Q(TE(n,e,arguments.length>=2,!0))}function Gp(...n){let e=_r(n);return Q((t,r)=>{(e?Ji(n,t,e):Ji(n,t)).subscribe(r)})}function qe(n,e){return Q((t,r)=>{let o=null,i=0,s=!1,a=()=>s&&!o&&r.complete();t.subscribe(Z(r,c=>{o?.unsubscribe();let l=0,u=i++;Be(n(c,u)).subscribe(o=Z(r,h=>r.next(e?e(c,h,u,l++):h),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function $a(n){return Q((e,t)=>{Be(n).subscribe(Z(t,()=>t.complete(),Ba)),!t.closed&&e.subscribe(t)})}function je(n,e,t){let r=H(n)||e||t?{next:n,error:e,complete:t}:n;return r?Q((o,i)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;o.subscribe(Z(i,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),i.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),i.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),i.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):wt}var og="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",A=class extends Error{code;constructor(e,t){super(nd(e,t)),this.code=e}};function EA(n){return`NG0${Math.abs(n)}`}function nd(n,e){return`${EA(n)}${e?": "+e:""}`}var Eo=globalThis;function ue(n){for(let e in n)if(n[e]===ue)return e;throw Error("")}function ft(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(ft).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function ig(n,e){return n?e?`${n} ${e}`:n:e||""}var IA=ue({__forward_ref__:ue});function rd(n){return n.__forward_ref__=rd,n.toString=function(){return ft(this())},n}function Ke(n){return sg(n)?n():n}function sg(n){return typeof n=="function"&&n.hasOwnProperty(IA)&&n.__forward_ref__===rd}function AE(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(r==null?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}function k(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ht(n){return{providers:n.providers||[],imports:n.imports||[]}}function Wa(n){return _A(n,od)}function ag(n){return Wa(n)!==null}function _A(n,e){return n.hasOwnProperty(e)&&n[e]||null}function TA(n){let e=n?.[od]??null;return e||null}function Kp(n){return n&&n.hasOwnProperty(Xu)?n[Xu]:null}var od=ue({\u0275prov:ue}),Xu=ue({\u0275inj:ue}),M=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=k({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function cg(n){return n&&!!n.\u0275providers}var lg=ue({\u0275cmp:ue}),ug=ue({\u0275dir:ue}),dg=ue({\u0275pipe:ue}),hg=ue({\u0275mod:ue}),qa=ue({\u0275fac:ue}),Io=ue({__NG_ELEMENT_ID__:ue}),wE=ue({__NG_ENV_ID__:ue});function fg(n){return typeof n=="string"?n:n==null?"":String(n)}function DE(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():fg(n)}function pg(n,e){throw new A(-200,n)}function id(n,e){throw new A(-201,!1)}var Wp;function ME(){return Wp}function nt(n){let e=Wp;return Wp=n,e}function gg(n,e,t){let r=Wa(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;id(n,"Injector")}var wA={},mo=wA,Yp="__NG_DI_FLAG__",Qp=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=yo(t)||0;try{return this.injector.get(e,r&8?null:mo,r)}catch(o){if(Vi(o))return o;throw o}}},ed="ngTempTokenPath",SA="ngTokenPath",bA=/\n/gm,AA="\u0275",SE="__source";function DA(n,e=0){let t=Ip();if(t===void 0)throw new A(-203,!1);if(t===null)return gg(n,void 0,e);{let r=MA(e),o=t.retrieve(n,r);if(Vi(o)){if(r.optional)return null;throw o}return o}}function R(n,e=0){return(ME()||DA)(Ke(n),e)}function I(n,e){return R(n,yo(e))}function yo(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function MA(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Zp(n){let e=[];for(let t=0;t<n.length;t++){let r=Ke(n[t]);if(Array.isArray(r)){if(r.length===0)throw new A(900,!1);let o,i=0;for(let s=0;s<r.length;s++){let a=r[s],c=RA(a);typeof c=="number"?c===-1?o=a.token:i|=c:o=a}e.push(R(o,i))}else e.push(R(r))}return e}function mg(n,e){return n[Yp]=e,n.prototype[Yp]=e,n}function RA(n){return n[Yp]}function kA(n,e,t,r){let o=n[ed];throw e[SE]&&o.unshift(e[SE]),n.message=NA(`
`+n.message,o,t,r),n[SA]=o,n[ed]=null,n}function NA(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==AA?n.slice(2):n;let o=ft(e);if(Array.isArray(e))o=e.map(ft).join(" -> ");else if(typeof e=="object"){let i=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];i.push(s+":"+(typeof a=="string"?JSON.stringify(a):ft(a)))}o=`{${i.join(", ")}}`}return`${t}${r?"("+r+")":""}[${o}]: ${n.replace(bA,`
  `)}`}function Sr(n,e){let t=n.hasOwnProperty(qa);return t?n[qa]:null}function sd(n,e){n.forEach(t=>Array.isArray(t)?sd(t,e):e(t))}function yg(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ya(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function RE(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function kE(n,e,t,r){let o=n.length;if(o==e)n.push(t,r);else if(o===1)n.push(r,n[0]),n[0]=t;else{for(o--,n.push(n[o-1],n[o]);o>e;){let i=o-2;n[o]=n[i],o--}n[e]=t,n[e+1]=r}}function NE(n,e,t){let r=ts(n,e);return r>=0?n[r|1]=t:(r=~r,kE(n,r,e,t)),r}function ad(n,e){let t=ts(n,e);if(t>=0)return n[t|1]}function ts(n,e){return OA(n,e,1)}function OA(n,e,t){let r=0,o=n.length>>t;for(;o!==r;){let i=r+(o-r>>1),s=n[i<<t];if(e===s)return i<<t;s>e?o=i:r=i+1}return~(o<<t)}var _o={},Ft=[],Dr=new M(""),vg=new M("",-1),Cg=new M(""),Ka=class{get(e,t=mo){if(t===mo)throw new bu(`NullInjectorError: No provider for ${ft(e)}!`);return t}};function Eg(n){return n[hg]||null}function Mr(n){return n[lg]||null}function Ig(n){return n[ug]||null}function OE(n){return n[dg]||null}function ns(n){return{\u0275providers:n}}function cd(...n){return{\u0275providers:_g(!0,n),\u0275fromNgModule:!0}}function _g(n,...e){let t=[],r=new Set,o,i=s=>{t.push(s)};return sd(e,s=>{let a=s;td(a,i,[],r)&&(o||=[],o.push(a))}),o!==void 0&&PE(o,i),t}function PE(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:o}=n[t];Tg(o,i=>{e(i,r)})}}function td(n,e,t,r){if(n=Ke(n),!n)return!1;let o=null,i=Kp(n),s=!i&&Mr(n);if(!i&&!s){let c=n.ngModule;if(i=Kp(c),i)o=c;else return!1}else{if(s&&!s.standalone)return!1;o=n}let a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)td(l,e,t,r)}}else if(i){if(i.imports!=null&&!a){r.add(o);let l;try{sd(i.imports,u=>{td(u,e,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&PE(l,e)}if(!a){let l=Sr(o)||(()=>new o);e({provide:o,useFactory:l,deps:Ft},o),e({provide:Cg,useValue:o,multi:!0},o),e({provide:Dr,useValue:()=>R(o),multi:!0},o)}let c=i.providers;if(c!=null&&!a){let l=n;Tg(c,u=>{e(u,l)})}}else return!1;return o!==n&&n.providers!==void 0}function Tg(n,e){for(let t of n)cg(t)&&(t=t.\u0275providers),Array.isArray(t)?Tg(t,e):e(t)}var PA=ue({provide:String,useValue:ue});function xE(n){return n!==null&&typeof n=="object"&&PA in n}function xA(n){return!!(n&&n.useExisting)}function LA(n){return!!(n&&n.useFactory)}function vo(n){return typeof n=="function"}function LE(n){return!!n.useClass}var Qa=new M(""),Ju={},bE={},qp;function Za(){return qp===void 0&&(qp=new Ka),qp}var xe=class{},Co=class extends xe{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,o){super(),this.parent=t,this.source=r,this.scopes=o,Xp(e,s=>this.processProvider(s)),this.records.set(vg,es(void 0,this)),o.has("environment")&&this.records.set(xe,es(void 0,this));let i=this.records.get(Qa);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(Cg,Ft,{self:!0}))}retrieve(e,t){let r=yo(t)||0;try{return this.get(e,mo,r)}catch(o){if(Vi(o))return o;throw o}}destroy(){Ga(this),this._destroyed=!0;let e=Y(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Y(e)}}onDestroy(e){return Ga(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ga(this);let t=Ln(this),r=nt(void 0),o;try{return e()}finally{Ln(t),nt(r)}}get(e,t=mo,r){if(Ga(this),e.hasOwnProperty(wE))return e[wE](this);let o=yo(r),i,s=Ln(this),a=nt(void 0);try{if(!(o&4)){let l=this.records.get(e);if(l===void 0){let u=jA(e)&&Wa(e);u&&this.injectableDefInScope(u)?l=es(Jp(e),Ju):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let c=o&2?Za():this.parent;return t=o&8&&t===mo?null:t,c.get(e,t)}catch(c){if(Vi(c)){if((c[ed]=c[ed]||[]).unshift(ft(e)),s)throw c;return kA(c,e,"R3InjectorError",this.source)}else throw c}finally{nt(a),Ln(s)}}resolveInjectorInitializers(){let e=Y(null),t=Ln(this),r=nt(void 0),o;try{let i=this.get(Dr,Ft,{self:!0});for(let s of i)s()}finally{Ln(t),nt(r),Y(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(ft(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ke(e);let t=vo(e)?e:Ke(e&&e.provide),r=UA(e);if(!vo(e)&&e.multi===!0){let o=this.records.get(t);o||(o=es(void 0,Ju,!0),o.factory=()=>Zp(o.multi),this.records.set(t,o)),t=e,o.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Y(null);try{return t.value===bE?pg(ft(e)):t.value===Ju&&(t.value=bE,t.value=t.factory()),typeof t.value=="object"&&t.value&&BA(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Y(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ke(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Jp(n){let e=Wa(n),t=e!==null?e.factory:Sr(n);if(t!==null)return t;if(n instanceof M)throw new A(204,!1);if(n instanceof Function)return FA(n);throw new A(204,!1)}function FA(n){if(n.length>0)throw new A(204,!1);let t=TA(n);return t!==null?()=>t.factory(n):()=>new n}function UA(n){if(xE(n))return es(void 0,n.useValue);{let e=wg(n);return es(e,Ju)}}function wg(n,e,t){let r;if(vo(n)){let o=Ke(n);return Sr(o)||Jp(o)}else if(xE(n))r=()=>Ke(n.useValue);else if(LA(n))r=()=>n.useFactory(...Zp(n.deps||[]));else if(xA(n))r=()=>R(Ke(n.useExisting));else{let o=Ke(n&&(n.useClass||n.provide));if(HA(n))r=()=>new o(...Zp(n.deps));else return Sr(o)||Jp(o)}return r}function Ga(n){if(n.destroyed)throw new A(205,!1)}function es(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function HA(n){return!!n.deps}function BA(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function jA(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Xp(n,e){for(let t of n)Array.isArray(t)?Xp(t,e):t&&cg(t)?Xp(t.\u0275providers,e):e(t)}function rt(n,e){let t;n instanceof Co?(Ga(n),t=n):t=new Qp(n);let r,o=Ln(t),i=nt(void 0);try{return e()}finally{Ln(o),nt(i)}}function FE(){return ME()!==void 0||Ip()!=null}var Yt=0,K=1,j=2,We=3,Bt=4,ot=5,rs=6,os=7,Ye=8,To=9,Bn=10,ze=11,is=12,Sg=13,wo=14,pt=15,So=16,bo=17,Ao=18,Ja=19,bg=20,Hn=21,ld=22,Xa=23,bt=24,ud=25,it=26,UE=1;var Rr=7,ec=8,tc=9,gt=10;function jn(n){return Array.isArray(n)&&typeof n[UE]=="object"}function Qt(n){return Array.isArray(n)&&n[UE]===!0}function Ag(n){return(n.flags&4)!==0}function kr(n){return n.componentOffset>-1}function dd(n){return(n.flags&1)===1}function Nr(n){return!!n.template}function ss(n){return(n[j]&512)!==0}function Do(n){return(n[j]&256)===256}var Dg="svg",HE="math";function jt(n){for(;Array.isArray(n);)n=n[Yt];return n}function Mg(n,e){return jt(e[n])}function pn(n,e){return jt(e[n.index])}function hd(n,e){return n.data[e]}function BE(n,e){return n[e]}function Rg(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Zt(n,e){let t=e[n];return jn(t)?t:t[Yt]}function fd(n){return(n[j]&128)===128}function jE(n){return Qt(n[We])}function nc(n,e){return e==null?null:n[e]}function kg(n){n[bo]=0}function Ng(n){n[j]&1024||(n[j]|=1024,fd(n)&&oc(n))}function zE(n,e){for(;n>0;)e=e[wo],n--;return e}function rc(n){return!!(n[j]&9216||n[bt]?.dirty)}function pd(n){n[Bn].changeDetectionScheduler?.notify(8),n[j]&64&&(n[j]|=1024),rc(n)&&oc(n)}function oc(n){n[Bn].changeDetectionScheduler?.notify(0);let e=br(n);for(;e!==null&&!(e[j]&8192||(e[j]|=8192,!fd(e)));)e=br(e)}function Og(n,e){if(Do(n))throw new A(911,!1);n[Hn]===null&&(n[Hn]=[]),n[Hn].push(e)}function VE(n,e){if(n[Hn]===null)return;let t=n[Hn].indexOf(e);t!==-1&&n[Hn].splice(t,1)}function br(n){let e=n[We];return Qt(e)?e[We]:e}function $E(n){return n[os]??=[]}function GE(n){return n.cleanup??=[]}var q={lFrame:sI(null),bindingsEnabled:!0,skipHydrationRootTNode:null},ic=function(n){return n[n.Off=0]="Off",n[n.Exhaustive=1]="Exhaustive",n[n.OnlyDirtyViews=2]="OnlyDirtyViews",n}(ic||{}),zA=0,eg=!1;function qE(){return q.lFrame.elementDepthCount}function KE(){q.lFrame.elementDepthCount++}function WE(){q.lFrame.elementDepthCount--}function Pg(){return q.bindingsEnabled}function xg(){return q.skipHydrationRootTNode!==null}function YE(n){return q.skipHydrationRootTNode===n}function QE(){q.skipHydrationRootTNode=null}function ce(){return q.lFrame.lView}function At(){return q.lFrame.tView}function sc(n){return q.lFrame.contextLView=n,n[Ye]}function ac(n){return q.lFrame.contextLView=null,n}function zt(){let n=Lg();for(;n!==null&&n.type===64;)n=n.parent;return n}function Lg(){return q.lFrame.currentTNode}function ZE(){let n=q.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function as(n,e){let t=q.lFrame;t.currentTNode=n,t.isParent=e}function Fg(){return q.lFrame.isParent}function Ug(){q.lFrame.isParent=!1}function Hg(n){AE("Must never be called in production mode"),zA=n}function Bg(){return eg}function jg(n){let e=eg;return eg=n,e}function JE(){let n=q.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function XE(n){return q.lFrame.bindingIndex=n}function zg(){return q.lFrame.bindingIndex++}function eI(n){let e=q.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function tI(){return q.lFrame.inI18n}function nI(n,e){let t=q.lFrame;t.bindingIndex=t.bindingRootIndex=n,gd(e)}function rI(){return q.lFrame.currentDirectiveIndex}function gd(n){q.lFrame.currentDirectiveIndex=n}function oI(n){let e=q.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Vg(n){q.lFrame.currentQueryIndex=n}function VA(n){let e=n[K];return e.type===2?e.declTNode:e.type===1?n[ot]:null}function $g(n,e,t){if(t&4){let o=e,i=n;for(;o=o.parent,o===null&&!(t&1);)if(o=VA(i),o===null||(i=i[wo],o.type&10))break;if(o===null)return!1;e=o,n=i}let r=q.lFrame=iI();return r.currentTNode=e,r.lView=n,!0}function md(n){let e=iI(),t=n[K];q.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function iI(){let n=q.lFrame,e=n===null?null:n.child;return e===null?sI(n):e}function sI(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function aI(){let n=q.lFrame;return q.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Gg=aI;function yd(){let n=aI();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function cI(n){return(q.lFrame.contextLView=zE(n,q.lFrame.contextLView))[Ye]}function Mo(){return q.lFrame.selectedIndex}function Or(n){q.lFrame.selectedIndex=n}function lI(){let n=q.lFrame;return hd(n.tView,n.selectedIndex)}function cs(){q.lFrame.currentNamespace=Dg}function ls(){$A()}function $A(){q.lFrame.currentNamespace=null}function uI(){return q.lFrame.currentNamespace}var dI=!0;function vd(){return dI}function Cd(n){dI=n}function tg(n,e=null,t=null,r){let o=qg(n,e,t,r);return o.resolveInjectorInitializers(),o}function qg(n,e=null,t=null,r,o=new Set){let i=[t||Ft,cd(n)];return r=r||(typeof n=="object"?void 0:ft(n)),new Co(i,e||Za(),r||null,o)}var Ut=class n{static THROW_IF_NOT_FOUND=mo;static NULL=new Ka;static create(e,t){if(Array.isArray(e))return tg({name:""},t,e,"");{let r=e.name??"";return tg({name:r},e.parent,e.providers,r)}}static \u0275prov=k({token:n,providedIn:"any",factory:()=>R(vg)});static __NG_ELEMENT_ID__=-1},De=new M(""),Ro=(()=>{class n{static __NG_ELEMENT_ID__=GA;static __NG_ENV_ID__=t=>t}return n})(),ng=class extends Ro{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Do(this._lView)}onDestroy(e){let t=this._lView;return Og(t,e),()=>VE(t,e)}};function GA(){return new ng(ce())}var fn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Dt=new M("",{providedIn:"root",factory:()=>{let n=I(xe),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(fn),e.handleError(t))}}}),hI={provide:Dr,useValue:()=>void I(fn),multi:!0};var Ar=class{},Ed=new M("",{providedIn:"root",factory:()=>!1});var Kg=new M(""),Wg=new M("");var zn=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Se(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new W(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=k({token:n,providedIn:"root",factory:()=>new n})}return n})(),cc=(()=>{class n{internalPendingTasks=I(zn);scheduler=I(Ar);errorHandler=I(Dt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=k({token:n,providedIn:"root",factory:()=>new n})}return n})();function lc(...n){}var Yg=(()=>{class n{static \u0275prov=k({token:n,providedIn:"root",factory:()=>new rg})}return n})(),rg=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function ps(n){return{toString:n}.toString()}var Id="__parameters__";function XA(n){return function(...t){if(n){let r=n(...t);for(let o in r)this[o]=r[o]}}}function zI(n,e,t){return ps(()=>{let r=XA(e);function o(...i){if(this instanceof o)return r.apply(this,i),this;let s=new o(...i);return a.annotation=s,a;function a(c,l,u){let h=c.hasOwnProperty(Id)?c[Id]:Object.defineProperty(c,Id,{value:[]})[Id];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(s),c}}return o.prototype.ngMetadataName=n,o.annotationCls=o,o})}var VI=mg(zI("Optional"),8);var $I=mg(zI("SkipSelf"),4);function eD(n){return typeof n=="function"}var bd=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function GI(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Fo=(()=>{let n=()=>qI;return n.ngInherit=!0,n})();function qI(n){return n.type.prototype.ngOnChanges&&(n.setInput=nD),tD}function tD(){let n=WI(this),e=n?.current;if(e){let t=n.previous;if(t===_o)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function nD(n,e,t,r,o){let i=this.declaredInputs[r],s=WI(n)||rD(n,{previous:_o,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[i];a[i]=new bd(l&&l.currentValue,t,c===_o),GI(n,e,o,t)}var KI="__ngSimpleChanges__";function WI(n){return n[KI]||null}function rD(n,e){return n[KI]=e}var fI=[];var ie=function(n,e=null,t){for(let r=0;r<fI.length;r++){let o=fI[r];o(n,e,t)}};function oD(n,e,t){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=e.type.prototype;if(r){let s=qI(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}o&&(t.preOrderHooks??=[]).push(0-n,o),i&&((t.preOrderHooks??=[]).push(n,i),(t.preOrderCheckHooks??=[]).push(n,i))}function YI(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let i=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=i;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function Td(n,e,t){QI(n,e,3,t)}function wd(n,e,t,r){(n[j]&3)===t&&QI(n,e,t,r)}function Qg(n,e){let t=n[j];(t&3)===e&&(t&=16383,t+=1,n[j]=t)}function QI(n,e,t,r){let o=r!==void 0?n[bo]&65535:0,i=r??-1,s=e.length-1,a=0;for(let c=o;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[bo]+=65536),(a<i||i==-1)&&(iD(n,t,e,c),n[bo]=(n[bo]&4294901760)+c+2),c++}function pI(n,e){ie(4,n,e);let t=Y(null);try{e.call(n)}finally{Y(t),ie(5,n,e)}}function iD(n,e,t,r){let o=t[r]<0,i=t[r+1],s=o?-t[r]:t[r],a=n[s];o?n[j]>>14<n[bo]>>16&&(n[j]&3)===e&&(n[j]+=16384,pI(a,i)):pI(a,i)}var ds=-1,Oo=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function sD(n){return(n.flags&8)!==0}function aD(n){return(n.flags&16)!==0}function cD(n,e,t){let r=0;for(;r<t.length;){let o=t[r];if(typeof o=="number"){if(o!==0)break;r++;let i=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,i)}else{let i=o,s=t[++r];uD(i)?n.setProperty(e,i,s):n.setAttribute(e,i,s),r++}}return r}function lD(n){return n===3||n===4||n===6}function uD(n){return n.charCodeAt(0)===64}function Dm(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let o=e[r];typeof o=="number"?t=o:t===0||(t===-1||t===2?gI(n,t,o,null,e[++r]):gI(n,t,o,null,null))}}return n}function gI(n,e,t,r,o){let i=0,s=n.length;if(e===-1)s=-1;else for(;i<n.length;){let a=n[i++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=i-1;break}}}for(;i<n.length;){let a=n[i];if(typeof a=="number")break;if(a===t){o!==null&&(n[i+1]=o);return}i++,o!==null&&i++}s!==-1&&(n.splice(s,0,e),i=s+1),n.splice(i++,0,t),o!==null&&n.splice(i++,0,o)}function ZI(n){return n!==ds}function Ad(n){return n&32767}function dD(n){return n>>16}function Dd(n,e){let t=dD(n),r=e;for(;t>0;)r=r[wo],t--;return r}var sm=!0;function Md(n){let e=sm;return sm=n,e}var hD=256,JI=hD-1,XI=5,fD=0,gn={};function pD(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Io)&&(r=t[Io]),r==null&&(r=t[Io]=fD++);let o=r&JI,i=1<<o;e.data[n+(o>>XI)]|=i}function Rd(n,e){let t=e_(n,e);if(t!==-1)return t;let r=e[K];r.firstCreatePass&&(n.injectorIndex=e.length,Zg(r.data,n),Zg(e,null),Zg(r.blueprint,null));let o=Mm(n,e),i=n.injectorIndex;if(ZI(o)){let s=Ad(o),a=Dd(o,e),c=a[K].data;for(let l=0;l<8;l++)e[i+l]=a[s+l]|c[s+l]}return e[i+8]=o,i}function Zg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function e_(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Mm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,o=e;for(;o!==null;){if(r=i_(o),r===null)return ds;if(t++,o=o[wo],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ds}function am(n,e,t){pD(n,e,t)}function t_(n,e,t){if(t&8||n!==void 0)return n;id(e,"NodeInjector")}function n_(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let o=n[To],i=nt(void 0);try{return o?o.get(e,r,t&8):gg(e,r,t&8)}finally{nt(i)}}return t_(r,e,t)}function r_(n,e,t,r=0,o){if(n!==null){if(e[j]&2048&&!(r&2)){let s=CD(n,e,t,r,gn);if(s!==gn)return s}let i=o_(n,e,t,r,gn);if(i!==gn)return i}return n_(e,t,r,o)}function o_(n,e,t,r,o){let i=yD(t);if(typeof i=="function"){if(!$g(e,n,r))return r&1?t_(o,t,r):n_(e,t,r,o);try{let s;if(s=i(r),s==null&&!(r&8))id(t);else return s}finally{Gg()}}else if(typeof i=="number"){let s=null,a=e_(n,e),c=ds,l=r&1?e[pt][ot]:null;for((a===-1||r&4)&&(c=a===-1?Mm(n,e):e[a+8],c===ds||!yI(r,!1)?a=-1:(s=e[K],a=Ad(c),e=Dd(c,e)));a!==-1;){let u=e[K];if(mI(i,a,u.data)){let h=gD(a,e,t,s,r,l);if(h!==gn)return h}c=e[a+8],c!==ds&&yI(r,e[K].data[a+8]===l)&&mI(i,a,e)?(s=u,a=Ad(c),e=Dd(c,e)):a=-1}}return o}function gD(n,e,t,r,o,i){let s=e[K],a=s.data[n+8],c=r==null?kr(a)&&sm:r!=s&&(a.type&3)!==0,l=o&1&&i===a,u=mD(a,s,t,c,l);return u!==null?kd(e,s,u,a):gn}function mD(n,e,t,r,o){let i=n.providerIndexes,s=e.data,a=i&1048575,c=n.directiveStart,l=n.directiveEnd,u=i>>20,h=r?a:a+u,g=o?a+u:l;for(let p=h;p<g;p++){let E=s[p];if(p<c&&t===E||p>=c&&E.type===t)return p}if(o){let p=s[c];if(p&&Nr(p)&&p.type===t)return c}return null}function kd(n,e,t,r){let o=n[t],i=e.data;if(o instanceof Oo){let s=o;s.resolving&&pg(DE(i[t]));let a=Md(s.canSeeViewProviders);s.resolving=!0;let c=i[t].type||i[t],l,u=s.injectImpl?nt(s.injectImpl):null,h=$g(n,r,0);try{o=n[t]=s.factory(void 0,i,n,r),e.firstCreatePass&&t>=r.directiveStart&&oD(t,i[t],e)}finally{u!==null&&nt(u),Md(a),s.resolving=!1,Gg()}}return o}function yD(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Io)?n[Io]:void 0;return typeof e=="number"?e>=0?e&JI:vD:e}function mI(n,e,t){let r=1<<n;return!!(t[e+(n>>XI)]&r)}function yI(n,e){return!(n&2)&&!(n&1&&e)}var No=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return r_(this._tNode,this._lView,e,yo(r),t)}};function vD(){return new No(zt(),ce())}function jd(n){return ps(()=>{let e=n.prototype.constructor,t=e[qa]||cm(e),r=Object.prototype,o=Object.getPrototypeOf(n.prototype).constructor;for(;o&&o!==r;){let i=o[qa]||cm(o);if(i&&i!==t)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function cm(n){return sg(n)?()=>{let e=cm(Ke(n));return e&&e()}:Sr(n)}function CD(n,e,t,r,o){let i=n,s=e;for(;i!==null&&s!==null&&s[j]&2048&&!ss(s);){let a=o_(i,s,t,r|2,gn);if(a!==gn)return a;let c=i.parent;if(!c){let l=s[bg];if(l){let u=l.get(t,gn,r);if(u!==gn)return u}c=i_(s),s=s[wo]}i=c}return o}function i_(n){let e=n[K],t=e.type;return t===2?e.declTNode:t===1?n[ot]:null}function ED(){return zd(zt(),ce())}function zd(n,e){return new gc(pn(n,e))}var gc=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=ED}return n})();function s_(n){return(n.flags&128)===128}var Rm=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Rm||{}),a_=new Map,ID=0;function _D(){return ID++}function TD(n){a_.set(n[Ja],n)}function lm(n){a_.delete(n[Ja])}var vI="__ngContext__";function mc(n,e){jn(e)?(n[vI]=e[Ja],TD(e)):n[vI]=e}function c_(n){return u_(n[is])}function l_(n){return u_(n[Bt])}function u_(n){for(;n!==null&&!Qt(n);)n=n[Bt];return n}var um;function km(n){um=n}function d_(){if(um!==void 0)return um;if(typeof document<"u")return document;throw new A(210,!1)}var Vd=new M("",{providedIn:"root",factory:()=>wD}),wD="ng",$d=new M(""),xr=new M("",{providedIn:"platform",factory:()=>"unknown"});var Gd=new M("",{providedIn:"root",factory:()=>d_().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var SD="h",bD="b";var h_=!1,f_=new M("",{providedIn:"root",factory:()=>h_});var AD=(n,e,t,r)=>{};function DD(n,e,t,r){AD(n,e,t,r)}var MD=()=>null;function p_(n,e,t=!1){return MD(n,e,t)}function g_(n,e){let t=n.contentQueries;if(t!==null){let r=Y(null);try{for(let o=0;o<t.length;o+=2){let i=t[o],s=t[o+1];if(s!==-1){let a=n.data[s];Vg(i),a.contentQueries(2,e[s],s)}}}finally{Y(r)}}}function dm(n,e,t){Vg(0);let r=Y(null);try{e(n,t)}finally{Y(r)}}function m_(n,e,t){if(Ag(e)){let r=Y(null);try{let o=e.directiveStart,i=e.directiveEnd;for(let s=o;s<i;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Y(r)}}}var Vn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Vn||{});var hm=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${og})`}};function y_(n){return n instanceof hm?n.changingThisBreaksApplicationSecurity:n}function v_(n){return n instanceof Function?n():n}function RD(n,e,t){let r=n.length;for(;;){let o=n.indexOf(e,t);if(o===-1)return o;if(o===0||n.charCodeAt(o-1)<=32){let i=e.length;if(o+i===r||n.charCodeAt(o+i)<=32)return o}t=o+1}}var C_="ng-template";function kD(n,e,t,r){let o=0;if(r){for(;o<e.length&&typeof e[o]=="string";o+=2)if(e[o]==="class"&&RD(e[o+1].toLowerCase(),t,0)!==-1)return!0}else if(Nm(n))return!1;if(o=e.indexOf(1,o),o>-1){let i;for(;++o<e.length&&typeof(i=e[o])=="string";)if(i.toLowerCase()===t)return!0}return!1}function Nm(n){return n.type===4&&n.value!==C_}function ND(n,e,t){let r=n.type===4&&!t?C_:n.value;return e===r}function OD(n,e,t){let r=4,o=n.attrs,i=o!==null?LD(o):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Jt(r)&&!Jt(c))return!1;if(s&&Jt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!ND(n,c,t)||c===""&&e.length===1){if(Jt(r))return!1;s=!0}}else if(r&8){if(o===null||!kD(n,o,c,t)){if(Jt(r))return!1;s=!0}}else{let l=e[++a],u=PD(c,o,Nm(n),t);if(u===-1){if(Jt(r))return!1;s=!0;continue}if(l!==""){let h;if(u>i?h="":h=o[u+1].toLowerCase(),r&2&&l!==h){if(Jt(r))return!1;s=!0}}}}return Jt(r)||s}function Jt(n){return(n&1)===0}function PD(n,e,t,r){if(e===null)return-1;let o=0;if(r||!t){let i=!1;for(;o<e.length;){let s=e[o];if(s===n)return o;if(s===3||s===6)i=!0;else if(s===1||s===2){let a=e[++o];for(;typeof a=="string";)a=e[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=i?1:2}return-1}else return FD(e,n)}function E_(n,e,t=!1){for(let r=0;r<e.length;r++)if(OD(n,e[r],t))return!0;return!1}function xD(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function LD(n){for(let e=0;e<n.length;e++){let t=n[e];if(lD(t))return e}return n.length}function FD(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function UD(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let o=0;o<n.length;o++)if(n[o]!==r[o])continue e;return!0}}return!1}function CI(n,e){return n?":not("+e.trim()+")":e}function HD(n){let e=n[0],t=1,r=2,o="",i=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+s:r&4&&(o+=" "+s);else o!==""&&!Jt(s)&&(e+=CI(i,o),o=""),r=s,i=i||!Jt(r);t++}return o!==""&&(e+=CI(i,o)),e}function BD(n){return n.map(HD).join(",")}function jD(n){let e=[],t=[],r=1,o=2;for(;r<n.length;){let i=n[r];if(typeof i=="string")o===2?i!==""&&e.push(i,n[++r]):o===8&&t.push(i);else{if(!Jt(o))break;o=i}r++}return t.length&&e.push(1,...t),e}var $n={};function zD(n,e){return n.createText(e)}function VD(n,e,t){n.setValue(e,t)}function I_(n,e,t){return n.createElement(e,t)}function Nd(n,e,t,r,o){n.insertBefore(e,t,r,o)}function __(n,e,t){n.appendChild(e,t)}function EI(n,e,t,r,o){r!==null?Nd(n,e,t,r,o):__(n,e,t)}function $D(n,e,t){n.removeChild(null,e,t)}function GD(n,e,t){n.setAttribute(e,"style",t)}function qD(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function T_(n,e,t){let{mergedAttrs:r,classes:o,styles:i}=t;r!==null&&cD(n,e,r),o!==null&&qD(n,e,o),i!==null&&GD(n,e,i)}function Om(n,e,t,r,o,i,s,a,c,l,u){let h=it+r,g=h+o,p=KD(h,g),E=typeof l=="function"?l():l;return p[K]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:E,incompleteFirstPass:!1,ssrId:u}}function KD(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:$n);return t}function WD(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Om(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Pm(n,e,t,r,o,i,s,a,c,l,u){let h=e.blueprint.slice();return h[Yt]=o,h[j]=r|4|128|8|64|1024,(l!==null||n&&n[j]&2048)&&(h[j]|=2048),kg(h),h[We]=h[wo]=n,h[Ye]=t,h[Bn]=s||n&&n[Bn],h[ze]=a||n&&n[ze],h[To]=c||n&&n[To]||null,h[ot]=i,h[Ja]=_D(),h[rs]=u,h[bg]=l,h[pt]=e.type==2?n[pt]:h,h}function YD(n,e,t){let r=pn(e,n),o=WD(t),i=n[Bn].rendererFactory,s=xm(n,Pm(n,o,null,w_(t),r,e,null,i.createRenderer(r,t),null,null,null));return n[e.index]=s}function w_(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function S_(n,e,t,r){if(t===0)return-1;let o=e.length;for(let i=0;i<t;i++)e.push(r),n.blueprint.push(r),n.data.push(null);return o}function xm(n,e){return n[is]?n[Sg][Bt]=e:n[is]=e,n[Sg]=e,e}function Xt(n=1){b_(At(),ce(),Mo()+n,!1)}function b_(n,e,t,r){if(!r)if((e[j]&3)===3){let i=n.preOrderCheckHooks;i!==null&&Td(e,i,t)}else{let i=n.preOrderHooks;i!==null&&wd(e,i,0,t)}Or(t)}var qd=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(qd||{});function fm(n,e,t,r){let o=Y(null);try{let[i,s,a]=n.inputs[t],c=null;(s&qd.SignalBased)!==0&&(c=e[i][Du]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,i):GI(e,c,i,r)}finally{Y(o)}}function A_(n,e,t,r,o){let i=Mo(),s=r&2;try{Or(-1),s&&e.length>it&&b_(n,e,it,!1),ie(s?2:0,o,t),t(r,o)}finally{Or(i),ie(s?3:1,o,t)}}function Lm(n,e,t){rM(n,e,t),(t.flags&64)===64&&oM(n,e,t)}function D_(n,e,t=pn){let r=e.localNames;if(r!==null){let o=e.index+1;for(let i=0;i<r.length;i+=2){let s=r[i+1],a=s===-1?t(e,n):n[s];n[o++]=a}}}function QD(n,e,t,r){let i=r.get(f_,h_)||t===Vn.ShadowDom,s=n.selectRootElement(e,i);return ZD(s),s}function ZD(n){JD(n)}var JD=()=>null;function XD(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function eM(n,e,t,r,o,i){let s=e[K];if(Fm(n,s,e,t,r)){kr(n)&&nM(e,n.index);return}tM(n,e,t,r,o,i)}function tM(n,e,t,r,o,i){if(n.type&3){let s=pn(n,e);t=XD(t),r=i!=null?i(r,n.value||"",t):r,o.setProperty(s,t,r)}else n.type&12}function nM(n,e){let t=Zt(e,n);t[j]&16||(t[j]|=64)}function rM(n,e,t){let r=t.directiveStart,o=t.directiveEnd;kr(t)&&YD(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Rd(t,e);let i=t.initialInputs;for(let s=r;s<o;s++){let a=n.data[s],c=kd(e,n,s,t);if(mc(c,e),i!==null&&sM(e,s-r,c,a,t,i),Nr(a)){let l=Zt(t.index,e);l[Ye]=kd(e,n,s,t)}}}function oM(n,e,t){let r=t.directiveStart,o=t.directiveEnd,i=t.index,s=rI();try{Or(i);for(let a=r;a<o;a++){let c=n.data[a],l=e[a];gd(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&iM(c,l)}}finally{Or(-1),gd(s)}}function iM(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function M_(n,e){let t=n.directiveRegistry,r=null;if(t)for(let o=0;o<t.length;o++){let i=t[o];E_(e,i.selectors,!1)&&(r??=[],Nr(i)?r.unshift(i):r.push(i))}return r}function sM(n,e,t,r,o,i){let s=i[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];fm(r,t,c,l)}}function aM(n,e){let t=n[To];if(!t)return;t.get(Dt,null)?.(e)}function Fm(n,e,t,r,o){let i=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],h=e.data[l];fm(h,t[l],u,o),a=!0}if(i)for(let c of i){let l=t[c],u=e.data[c];fm(u,l,r,o),a=!0}return a}function cM(n,e){let t=Zt(e,n),r=t[K];lM(r,t);let o=t[Yt];o!==null&&t[rs]===null&&(t[rs]=p_(o,t[To])),ie(18),Um(r,t,t[Ye]),ie(19,t[Ye])}function lM(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Um(n,e,t){md(e);try{let r=n.viewQuery;r!==null&&dm(1,r,t);let o=n.template;o!==null&&A_(n,e,o,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ao]?.finishViewCreation(n),n.staticContentQueries&&g_(n,e),n.staticViewQueries&&dm(2,n.viewQuery,t);let i=n.components;i!==null&&uM(e,i)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[j]&=-5,yd()}}function uM(n,e){for(let t=0;t<e.length;t++)cM(n,e[t])}function R_(n,e,t,r){let o=Y(null);try{let i=e.tView,a=n[j]&4096?4096:16,c=Pm(n,i,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[So]=l;let u=n[Ao];return u!==null&&(c[Ao]=u.createEmbeddedView(i)),Um(i,c,t),c}finally{Y(o)}}function pm(n,e){return!e||e.firstChild===null||s_(n)}var II=!1,dM=new M(""),hM;function Hm(n,e){return hM(n,e)}var mn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(mn||{});function Kd(n){return(n.flags&32)===32}function us(n,e,t,r,o){if(r!=null){let i,s=!1;Qt(r)?i=r:jn(r)&&(s=!0,r=r[Yt]);let a=jt(r);n===0&&t!==null?o==null?__(e,t,a):Nd(e,t,a,o||null,!0):n===1&&t!==null?Nd(e,t,a,o||null,!0):n===2?$D(e,a,s):n===3&&e.destroyNode(a),i!=null&&_M(e,n,i,t,o)}}function fM(n,e){k_(n,e),e[Yt]=null,e[ot]=null}function pM(n,e,t,r,o,i){r[Yt]=o,r[ot]=e,Wd(n,r,t,1,o,i)}function k_(n,e){e[Bn].changeDetectionScheduler?.notify(9),Wd(n,e,e[ze],2,null,null)}function gM(n){let e=n[is];if(!e)return Jg(n[K],n);for(;e;){let t=null;if(jn(e))t=e[is];else{let r=e[gt];r&&(t=r)}if(!t){for(;e&&!e[Bt]&&e!==n;)jn(e)&&Jg(e[K],e),e=e[We];e===null&&(e=n),jn(e)&&Jg(e[K],e),t=e&&e[Bt]}e=t}}function Bm(n,e){let t=n[tc],r=t.indexOf(e);t.splice(r,1)}function N_(n,e){if(Do(e))return;let t=e[ze];t.destroyNode&&Wd(n,e,t,3,null,null),gM(e)}function Jg(n,e){if(Do(e))return;let t=Y(null);try{e[j]&=-129,e[j]|=256,e[bt]&&Dp(e[bt]),yM(n,e),mM(n,e),e[K].type===1&&e[ze].destroy();let r=e[So];if(r!==null&&Qt(e[We])){r!==e[We]&&Bm(r,e);let o=e[Ao];o!==null&&o.detachView(n)}lm(e)}finally{Y(t)}}function mM(n,e){let t=n.cleanup,r=e[os];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[os]=null);let o=e[Hn];if(o!==null){e[Hn]=null;for(let s=0;s<o.length;s++){let a=o[s];a()}}let i=e[Xa];if(i!==null){e[Xa]=null;for(let s of i)s.destroy()}}function yM(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let o=e[t[r]];if(!(o instanceof Oo)){let i=t[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let a=o[i[s]],c=i[s+1];ie(4,a,c);try{c.call(a)}finally{ie(5,a,c)}}else{ie(4,o,i);try{i.call(o)}finally{ie(5,o,i)}}}}}function O_(n,e,t){return vM(n,e.parent,t)}function vM(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Yt];if(kr(r)){let{encapsulation:o}=n.data[r.directiveStart+r.componentOffset];if(o===Vn.None||o===Vn.Emulated)return null}return pn(r,t)}function P_(n,e,t){return EM(n,e,t)}function CM(n,e,t){return n.type&40?pn(n,t):null}var EM=CM,_I;function jm(n,e,t,r){let o=O_(n,r,e),i=e[ze],s=r.parent||e[ot],a=P_(s,r,e);if(o!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)EI(i,o,t[c],a,!1);else EI(i,o,t,a,!1);_I!==void 0&&_I(i,r,e,t,o)}function uc(n,e){if(e!==null){let t=e.type;if(t&3)return pn(e,n);if(t&4)return gm(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return uc(n,r);{let o=n[e.index];return Qt(o)?gm(-1,o):jt(o)}}else{if(t&128)return uc(n,e.next);if(t&32)return Hm(e,n)()||jt(n[e.index]);{let r=x_(n,e);if(r!==null){if(Array.isArray(r))return r[0];let o=br(n[pt]);return uc(o,r)}else return uc(n,e.next)}}}return null}function x_(n,e){if(e!==null){let r=n[pt][ot],o=e.projection;return r.projection[o]}return null}function gm(n,e){let t=gt+n+1;if(t<e.length){let r=e[t],o=r[K].firstChild;if(o!==null)return uc(r,o)}return e[Rr]}function zm(n,e,t,r,o,i,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&mc(jt(a),r),t.flags|=2),!Kd(t))if(c&8)zm(n,e,t.child,r,o,i,!1),us(e,n,o,a,i);else if(c&32){let l=Hm(t,r),u;for(;u=l();)us(e,n,o,u,i);us(e,n,o,a,i)}else c&16?L_(n,e,r,t,o,i):us(e,n,o,a,i);t=s?t.projectionNext:t.next}}function Wd(n,e,t,r,o,i){zm(t,r,n.firstChild,e,o,i,!1)}function IM(n,e,t){let r=e[ze],o=O_(n,t,e),i=t.parent||e[ot],s=P_(i,t,e);L_(r,0,e,t,o,s)}function L_(n,e,t,r,o,i){let s=t[pt],c=s[ot].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];us(e,n,o,u,i)}else{let l=c,u=s[We];s_(r)&&(l.flags|=128),zm(n,e,l,u,o,i,!0)}}function _M(n,e,t,r,o){let i=t[Rr],s=jt(t);i!==s&&us(e,n,r,i,o);for(let a=gt;a<t.length;a++){let c=t[a];Wd(c[K],c,n,e,r,i)}}function TM(n,e,t,r,o){if(e)o?n.addClass(t,r):n.removeClass(t,r);else{let i=r.indexOf("-")===-1?void 0:mn.DashCase;o==null?n.removeStyle(t,r,i):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=mn.Important),n.setStyle(t,r,o,i))}}function hc(n,e,t,r,o=!1){for(;t!==null;){if(t.type===128){t=o?t.projectionNext:t.next;continue}let i=e[t.index];i!==null&&r.push(jt(i)),Qt(i)&&F_(i,r);let s=t.type;if(s&8)hc(n,e,t.child,r);else if(s&32){let a=Hm(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=x_(e,t);if(Array.isArray(a))r.push(...a);else{let c=br(e[pt]);hc(c[K],c,a,r,!0)}}t=o?t.projectionNext:t.next}return r}function F_(n,e){for(let t=gt;t<n.length;t++){let r=n[t],o=r[K].firstChild;o!==null&&hc(r[K],r,o,e)}n[Rr]!==n[Yt]&&e.push(n[Rr])}function U_(n){if(n[ud]!==null){for(let e of n[ud])e.impl.addSequence(e);n[ud].length=0}}var H_=[];function wM(n){return n[bt]??SM(n)}function SM(n){let e=H_.pop()??Object.create(AM);return e.lView=n,e}function bM(n){n.lView[bt]!==n&&(n.lView=null,H_.push(n))}var AM=w(m({},Mu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{oc(n.lView)},consumerOnSignalRead(){this.lView[bt]=this}});function DM(n){let e=n[bt]??Object.create(MM);return e.lView=n,e}var MM=w(m({},Mu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=br(n.lView);for(;e&&!B_(e[K]);)e=br(e);e&&Ng(e)},consumerOnSignalRead(){this.lView[bt]=this}});function B_(n){return n.type!==2}function j_(n){if(n[Xa]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Xa])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[j]&8192)}}var RM=100;function Vm(n,e=0){let r=n[Bn].rendererFactory,o=!1;o||r.begin?.();try{kM(n,e)}finally{o||r.end?.()}}function kM(n,e){let t=Bg();try{jg(!0),mm(n,e);let r=0;for(;rc(n);){if(r===RM)throw new A(103,!1);r++,mm(n,1)}}finally{jg(t)}}function z_(n,e){Hg(e?ic.Exhaustive:ic.OnlyDirtyViews);try{Vm(n)}finally{Hg(ic.Off)}}function NM(n,e,t,r){if(Do(e))return;let o=e[j],i=!1,s=!1;md(e);let a=!0,c=null,l=null;i||(B_(n)?(l=wM(e),c=Ru(l)):wp()===null?(a=!1,l=DM(e),c=Ru(l)):e[bt]&&(Dp(e[bt]),e[bt]=null));try{kg(e),XE(n.bindingStartIndex),t!==null&&A_(n,e,t,2,r);let u=(o&3)===3;if(!i)if(u){let p=n.preOrderCheckHooks;p!==null&&Td(e,p,null)}else{let p=n.preOrderHooks;p!==null&&wd(e,p,0,null),Qg(e,0)}if(s||OM(e),j_(e),V_(e,0),n.contentQueries!==null&&g_(n,e),!i)if(u){let p=n.contentCheckHooks;p!==null&&Td(e,p)}else{let p=n.contentHooks;p!==null&&wd(e,p,1),Qg(e,1)}xM(n,e);let h=n.components;h!==null&&G_(e,h,0);let g=n.viewQuery;if(g!==null&&dm(2,g,r),!i)if(u){let p=n.viewCheckHooks;p!==null&&Td(e,p)}else{let p=n.viewHooks;p!==null&&wd(e,p,2),Qg(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[ld]){for(let p of e[ld])p();e[ld]=null}i||(U_(e),e[j]&=-73)}catch(u){throw i||oc(e),u}finally{l!==null&&(Ap(l,c),a&&bM(l)),yd()}}function V_(n,e){for(let t=c_(n);t!==null;t=l_(t))for(let r=gt;r<t.length;r++){let o=t[r];$_(o,e)}}function OM(n){for(let e=c_(n);e!==null;e=l_(e)){if(!(e[j]&2))continue;let t=e[tc];for(let r=0;r<t.length;r++){let o=t[r];Ng(o)}}}function PM(n,e,t){ie(18);let r=Zt(e,n);$_(r,t),ie(19,r[Ye])}function $_(n,e){fd(n)&&mm(n,e)}function mm(n,e){let r=n[K],o=n[j],i=n[bt],s=!!(e===0&&o&16);if(s||=!!(o&64&&e===0),s||=!!(o&1024),s||=!!(i?.dirty&&ku(i)),s||=!1,i&&(i.dirty=!1),n[j]&=-9217,s)NM(r,n,r.template,n[Ye]);else if(o&8192){let a=Y(null);try{j_(n),V_(n,1);let c=r.components;c!==null&&G_(n,c,1),U_(n)}finally{Y(a)}}}function G_(n,e,t){for(let r=0;r<e.length;r++)PM(n,e[r],t)}function xM(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let o=t[r];if(o<0)Or(~o);else{let i=o,s=t[++r],a=t[++r];nI(s,i);let c=e[i];ie(24,c),a(2,c),ie(25,c)}}}finally{Or(-1)}}function $m(n,e){let t=Bg()?64:1088;for(n[Bn].changeDetectionScheduler?.notify(e);n;){n[j]|=t;let r=br(n);if(ss(n)&&!r)return n;n=r}return null}function q_(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function K_(n,e,t,r=!0){let o=e[K];if(LM(o,e,n,t),r){let s=gm(t,n),a=e[ze],c=a.parentNode(n[Rr]);c!==null&&pM(o,n[ot],a,e,c,s)}let i=e[rs];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function ym(n,e){if(n.length<=gt)return;let t=gt+e,r=n[t];if(r){let o=r[So];o!==null&&o!==n&&Bm(o,r),e>0&&(n[t-1][Bt]=r[Bt]);let i=Ya(n,gt+e);fM(r[K],r);let s=i[Ao];s!==null&&s.detachView(i[K]),r[We]=null,r[Bt]=null,r[j]&=-129}return r}function LM(n,e,t,r){let o=gt+r,i=t.length;r>0&&(t[o-1][Bt]=e),r<i-gt?(e[Bt]=t[o],yg(t,gt+r,e)):(t.push(e),e[Bt]=null),e[We]=t;let s=e[So];s!==null&&t!==s&&W_(s,e);let a=e[Ao];a!==null&&a.insertView(n),pd(e),e[j]|=128}function W_(n,e){let t=n[tc],r=e[We];if(jn(r))n[j]|=2;else{let o=r[We][pt];e[pt]!==o&&(n[j]|=2)}t===null?n[tc]=[e]:t.push(e)}var Pr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[K];return hc(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Ye]}set context(e){this._lView[Ye]=e}get destroyed(){return Do(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[We];if(Qt(e)){let t=e[ec],r=t?t.indexOf(this):-1;r>-1&&(ym(e,r),Ya(t,r))}this._attachedToViewContainer=!1}N_(this._lView[K],this._lView)}onDestroy(e){Og(this._lView,e)}markForCheck(){$m(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[j]&=-129}reattach(){pd(this._lView),this._lView[j]|=128}detectChanges(){this._lView[j]|=1024,Vm(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[To].get(dM,II)}catch{this.exhaustive=II}}attachToViewContainerRef(){if(this._appRef)throw new A(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ss(this._lView),t=this._lView[So];t!==null&&!e&&Bm(t,this._lView),k_(this._lView[K],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new A(902,!1);this._appRef=e;let t=ss(this._lView),r=this._lView[So];r!==null&&!t&&W_(r,this._lView),pd(this._lView)}};var yc=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=FM;constructor(t,r,o){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=o}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,o){let i=R_(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:o});return new Pr(i)}}return n})();function FM(){return UM(zt(),ce())}function UM(n,e){return n.type&4?new yc(e,n,zd(n,e)):null}function Yd(n,e,t,r,o){let i=n.data[e];if(i===null)i=HM(n,e,t,r,o),tI()&&(i.flags|=32);else if(i.type&64){i.type=t,i.value=r,i.attrs=o;let s=ZE();i.injectorIndex=s===null?-1:s.injectorIndex}return as(i,!0),i}function HM(n,e,t,r,o){let i=Lg(),s=Fg(),a=s?i:i&&i.parent,c=n.data[e]=jM(n,a,t,e,r,o);return BM(n,c,i,s),c}function BM(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function jM(n,e,t,r,o,i){let s=e?e.injectorIndex:-1,a=0;return xg()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Dj=new RegExp(`^(\\d+)*(${bD}|${SD})*(.*)`);var zM=()=>null;function vm(n,e){return zM(n,e)}var Y_=class{},Qd=class{},Cm=class{resolveComponentFactory(e){throw new A(917,!1)}},vc=class{static NULL=new Cm},Po=class{};var Q_=(()=>{class n{static \u0275prov=k({token:n,providedIn:"root",factory:()=>null})}return n})();var Sd={},Em=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let o=this.injector.get(e,Sd,r);return o!==Sd||t===Sd?o:this.parentInjector.get(e,t,r)}};function TI(n,e,t){let r=t?n.styles:null,o=t?n.classes:null,i=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")i=a;else if(i==1)o=ig(o,a);else if(i==2){let c=a,l=e[++s];r=ig(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=o:n.classesWithoutHost=o}function Fe(n,e=0){let t=ce();if(t===null)return R(n,e);let r=zt();return r_(r,t,Ke(n),e)}function Z_(n,e,t,r,o){let i=r===null?null:{"":-1},s=o(n,t);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}GM(n,e,t,a,i,c,l)}i!==null&&r!==null&&VM(t,r,i)}function VM(n,e,t){let r=n.localNames=[];for(let o=0;o<e.length;o+=2){let i=t[e[o+1]];if(i==null)throw new A(-301,!1);r.push(e[o],i)}}function $M(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function GM(n,e,t,r,o,i,s){let a=r.length,c=!1;for(let g=0;g<a;g++){let p=r[g];!c&&Nr(p)&&(c=!0,$M(n,t,g)),am(Rd(t,e),n,p.type)}ZM(t,n.data.length,a);for(let g=0;g<a;g++){let p=r[g];p.providersResolver&&p.providersResolver(p)}let l=!1,u=!1,h=S_(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let g=0;g<a;g++){let p=r[g];if(t.mergedAttrs=Dm(t.mergedAttrs,p.hostAttrs),KM(n,t,e,h,p),QM(h,p,o),s!==null&&s.has(p)){let[_,b]=s.get(p);t.directiveToIndex.set(p.type,[h,_+t.directiveStart,b+t.directiveStart])}else(i===null||!i.has(p))&&t.directiveToIndex.set(p.type,h);p.contentQueries!==null&&(t.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(t.flags|=64);let E=p.type.prototype;!l&&(E.ngOnChanges||E.ngOnInit||E.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!u&&(E.ngOnChanges||E.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),h++}qM(n,t,i)}function qM(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let o=n.data[r];if(t===null||!t.has(o))wI(0,e,o,r),wI(1,e,o,r),bI(e,r,!1);else{let i=t.get(o);SI(0,e,i,r),SI(1,e,i,r),bI(e,r,!0)}}}function wI(n,e,t,r){let o=n===0?t.inputs:t.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[i]??=[],s[i].push(r),J_(e,i)}}function SI(n,e,t,r){let o=n===0?t.inputs:t.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s=o[i],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,i),J_(e,s)}}function J_(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function bI(n,e,t){let{attrs:r,inputs:o,hostDirectiveInputs:i}=n;if(r===null||!t&&o===null||t&&i===null||Nm(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&o.hasOwnProperty(c)){let l=o[c];for(let u of l)if(u===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&i.hasOwnProperty(c)){let l=i[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function KM(n,e,t,r,o){n.data[r]=o;let i=o.factory||(o.factory=Sr(o.type,!0)),s=new Oo(i,Nr(o),Fe);n.blueprint[r]=s,t[r]=s,WM(n,e,r,S_(n,t,o.hostVars,$n),o)}function WM(n,e,t,r,o){let i=o.hostBindings;if(i){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;YM(s)!=a&&s.push(a),s.push(t,r,i)}}function YM(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function QM(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Nr(e)&&(t[""]=n)}}function ZM(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function X_(n,e,t,r,o,i,s,a){let c=e.consts,l=nc(c,s),u=Yd(e,n,2,r,l);return i&&Z_(e,t,u,nc(c,a),o),u.mergedAttrs=Dm(u.mergedAttrs,u.attrs),u.attrs!==null&&TI(u,u.attrs,!1),u.mergedAttrs!==null&&TI(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function eT(n,e){YI(n,e),Ag(e)&&n.queries.elementEnd(e)}function Gm(n){return nT(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function tT(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function nT(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function JM(n,e,t){return n[e]=t}function Zd(n,e,t){if(t===$n)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Xg(n,e,t){return function r(o){let i=kr(n)?Zt(n.index,e):e;$m(i,5);let s=e[Ye],a=AI(e,s,t,o),c=r.__ngNextListenerFn__;for(;c;)a=AI(e,s,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function AI(n,e,t,r){let o=Y(null);try{return ie(6,e,t),t(r)!==!1}catch(i){return aM(n,i),!1}finally{ie(7,e,t),Y(o)}}function XM(n,e,t,r,o,i,s,a){let c=dd(n),l=!1,u=null;if(!r&&c&&(u=eR(e,t,i,n.index)),u!==null){let h=u.__ngLastListenerFn__||u;h.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0}else{let h=pn(n,t),g=r?r(h):h;DD(t,g,i,a);let p=o.listen(g,i,a),E=r?_=>r(jt(_[n.index])):n.index;rT(E,e,t,i,a,p,!1)}return l}function eR(n,e,t,r){let o=n.cleanup;if(o!=null)for(let i=0;i<o.length-1;i+=2){let s=o[i];if(s===t&&o[i+1]===r){let a=e[os],c=o[i+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(i+=2)}return null}function rT(n,e,t,r,o,i,s){let a=e.firstCreatePass?GE(e):null,c=$E(t),l=c.length;c.push(o,i),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function DI(n,e,t,r,o,i){let s=e[t],a=e[K],l=a.data[t].outputs[r],h=s[l].subscribe(i);rT(n.index,a,e,o,i,h,!0)}var Im=Symbol("BINDING");var Od=class extends vc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Mr(e);return new hs(t,this.ngModule)}};function tR(n){return Object.keys(n).map(e=>{let[t,r,o]=n[e],i={propName:t,templateName:e,isSignal:(r&qd.SignalBased)!==0};return o&&(i.transform=o),i})}function nR(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function rR(n,e,t){let r=e instanceof xe?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Em(t,r):t}function oR(n){let e=n.get(Po,null);if(e===null)throw new A(407,!1);let t=n.get(Q_,null),r=n.get(Ar,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function iR(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return I_(e,t,t==="svg"?Dg:t==="math"?HE:null)}var hs=class extends Qd{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=tR(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=nR(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=BD(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,o,i,s){ie(22);let a=Y(null);try{let c=this.componentDef,l=sR(r,c,s,i),u=rR(c,o||this.ngModule,e),h=oR(u),g=h.rendererFactory.createRenderer(null,c),p=r?QD(g,r,c.encapsulation,u):iR(c,g),E=s?.some(MI)||i?.some(O=>typeof O!="function"&&O.bindings.some(MI)),_=Pm(null,l,null,512|w_(c),null,null,h,g,u,null,p_(p,u,!0));_[it]=p,md(_);let b=null;try{let O=X_(it,l,_,"#host",()=>l.directiveRegistry,!0,0);p&&(T_(g,p,O),mc(p,_)),Lm(l,_,O),m_(l,O,_),eT(l,O),t!==void 0&&cR(O,this.ngContentSelectors,t),b=Zt(O.index,_),_[Ye]=b[Ye],Um(l,_,null)}catch(O){throw b!==null&&lm(b),lm(_),O}finally{ie(23),yd()}return new Pd(this.componentType,_,!!E)}finally{Y(a)}}};function sR(n,e,t,r){let o=n?["ng-version","20.0.5"]:jD(e.selectors[0]),i=null,s=null,a=0;if(t)for(let u of t)a+=u[Im].requiredVars,u.create&&(u.targetIdx=0,(i??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let h=r[u];if(typeof h!="function")for(let g of h.bindings){a+=g[Im].requiredVars;let p=u+1;g.create&&(g.targetIdx=p,(i??=[]).push(g)),g.update&&(g.targetIdx=p,(s??=[]).push(g))}}let c=[e];if(r)for(let u of r){let h=typeof u=="function"?u:u.type,g=Ig(h);c.push(g)}return Om(0,null,aR(i,s),1,a,c,null,null,null,[o],null)}function aR(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function MI(n){let e=n[Im].kind;return e==="input"||e==="twoWay"}var Pd=class extends Y_{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=hd(t[K],it),this.location=zd(this._tNode,t),this.instance=Zt(this._tNode.index,t)[Ye],this.hostView=this.changeDetectorRef=new Pr(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView,i=Fm(r,o[K],o,e,t);this.previousInputValues.set(e,t);let s=Zt(r.index,o);$m(s,1)}get injector(){return new No(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function cR(n,e,t){let r=n.projection=[];for(let o=0;o<e.length;o++){let i=t[o];r.push(i!=null&&i.length?Array.from(i):null)}}var Uo=(()=>{class n{static __NG_ELEMENT_ID__=lR}return n})();function lR(){let n=zt();return dR(n,ce())}var uR=Uo,oT=class extends uR{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return zd(this._hostTNode,this._hostLView)}get injector(){return new No(this._hostTNode,this._hostLView)}get parentInjector(){let e=Mm(this._hostTNode,this._hostLView);if(ZI(e)){let t=Dd(e,this._hostLView),r=Ad(e),o=t[K].data[r+8];return new No(o,t)}else return new No(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=RI(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-gt}createEmbeddedView(e,t,r){let o,i;typeof r=="number"?o=r:r!=null&&(o=r.index,i=r.injector);let s=vm(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},i,s);return this.insertImpl(a,o,pm(this._hostTNode,s)),a}createComponent(e,t,r,o,i,s,a){let c=e&&!eD(e),l;if(c)l=t;else{let b=t||{};l=b.index,r=b.injector,o=b.projectableNodes,i=b.environmentInjector||b.ngModuleRef,s=b.directives,a=b.bindings}let u=c?e:new hs(Mr(e)),h=r||this.parentInjector;if(!i&&u.ngModule==null){let O=(c?h:this.parentInjector).get(xe,null);O&&(i=O)}let g=Mr(u.componentType??{}),p=vm(this._lContainer,g?.id??null),E=p?.firstChild??null,_=u.create(h,o,E,i,s,a);return this.insertImpl(_.hostView,l,pm(this._hostTNode,p)),_}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let o=e._lView;if(jE(o)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=o[We],l=new oT(c,c[ot],c[We]);l.detach(l.indexOf(e))}}let i=this._adjustIndex(t),s=this._lContainer;return K_(s,o,i,r),e.attachToViewContainerRef(),yg(em(s),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=RI(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=ym(this._lContainer,t);r&&(Ya(em(this._lContainer),t),N_(r[K],r))}detach(e){let t=this._adjustIndex(e,-1),r=ym(this._lContainer,t);return r&&Ya(em(this._lContainer),t)!=null?new Pr(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function RI(n){return n[ec]}function em(n){return n[ec]||(n[ec]=[])}function dR(n,e){let t,r=e[n.index];return Qt(r)?t=r:(t=q_(r,e,null,n),e[n.index]=t,xm(e,t)),fR(t,e,n,r),new oT(t,n,e)}function hR(n,e){let t=n[ze],r=t.createComment(""),o=pn(e,n),i=t.parentNode(o);return Nd(t,i,r,t.nextSibling(o),!1),r}var fR=mR,pR=()=>!1;function gR(n,e,t){return pR(n,e,t)}function mR(n,e,t,r){if(n[Rr])return;let o;t.type&8?o=jt(r):o=hR(e,t),n[Rr]=o}var kI=new Set;function qm(n){kI.has(n)||(kI.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var xo=class{},Jd=class{};var xd=class extends xo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Od(this);constructor(e,t,r,o=!0){super(),this.ngModuleType=e,this._parent=t;let i=Eg(e);this._bootstrapComponents=v_(i.bootstrap),this._r3Injector=qg(e,t,[{provide:xo,useValue:this},{provide:vc,useValue:this.componentFactoryResolver},...r],ft(e),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Ld=class extends Jd{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new xd(this.moduleType,e,[])}};var fc=class extends xo{injector;componentFactoryResolver=new Od(this);instance=null;constructor(e){super();let t=new Co([...e.providers,{provide:xo,useValue:this},{provide:vc,useValue:this.componentFactoryResolver}],e.parent||Za(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Cc(n,e,t=null){return new fc({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var yR=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=_g(!1,t.type),o=r.length>0?Cc([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,o)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=k({token:n,providedIn:"environment",factory:()=>new n(R(xe))})}return n})();function mt(n){return ps(()=>{let e=iT(n),t=w(m({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Rm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?o=>o.get(yR).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Vn.Emulated,styles:n.styles||Ft,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&qm("NgStandalone"),sT(t);let r=n.dependencies;return t.directiveDefs=NI(r,!1),t.pipeDefs=NI(r,!0),t.id=_R(t),t})}function vR(n){return Mr(n)||Ig(n)}function CR(n){return n!==null}function en(n){return ps(()=>({type:n.type,bootstrap:n.bootstrap||Ft,declarations:n.declarations||Ft,imports:n.imports||Ft,exports:n.exports||Ft,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function ER(n,e){if(n==null)return _o;let t={};for(let r in n)if(n.hasOwnProperty(r)){let o=n[r],i,s,a,c;Array.isArray(o)?(a=o[0],i=o[1],s=o[2]??i,c=o[3]||null):(i=o,s=o,a=qd.None,c=null),t[i]=[r,a,c],e[i]=s}return t}function IR(n){if(n==null)return _o;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Lr(n){return ps(()=>{let e=iT(n);return sT(e),e})}function Km(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function iT(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||_o,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Ft,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:ER(n.inputs,e),outputs:IR(n.outputs),debugInfo:null}}function sT(n){n.features?.forEach(e=>e(n))}function NI(n,e){if(!n)return null;let t=e?OE:vR;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(CR)}function _R(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let i of r.join("|"))e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function TR(n,e,t,r,o,i,s,a,c){let l=e.consts,u=Yd(e,n,4,s||null,a||null);Pg()&&Z_(e,t,u,nc(l,c),M_),u.mergedAttrs=Dm(u.mergedAttrs,u.attrs),YI(e,u);let h=u.tView=Om(2,u,r,o,i,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}function aT(n,e,t,r,o,i,s,a,c,l,u){let h=t+it,g=e.firstCreatePass?TR(h,e,n,r,o,i,s,a,l):e.data[h];c&&(g.flags|=c),as(g,!1);let p=wR(e,n,g,t);vd()&&jm(e,n,p,g),mc(p,n);let E=q_(p,n,p,g);return n[h]=E,xm(n,E),gR(E,g,n),dd(g)&&Lm(e,n,g),l!=null&&D_(n,g,u),g}function Ec(n,e,t,r,o,i,s,a){let c=ce(),l=At(),u=nc(l.consts,i);return aT(c,l,n,e,t,r,o,u,void 0,s,a),Ec}var wR=SR;function SR(n,e,t,r){return Cd(!0),e[ze].createComment("")}var Wm=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(Wm||{}),Ic=new M(""),cT=!1,_m=class extends Ce{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,FE()&&(this.destroyRef=I(Ro,{optional:!0})??void 0,this.pendingTasks=I(zn,{optional:!0})??void 0)}emit(e){let t=Y(null);try{super.next(e)}finally{Y(t)}}subscribe(e,t,r){let o=e,i=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;o=c.next?.bind(c),i=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(i=this.wrapInTimeout(i),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:o,error:i,complete:s});return e instanceof we&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Le=_m;function lT(n){let e,t;function r(){n=lc;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function OI(n){return queueMicrotask(()=>n()),()=>{n=lc}}var Ym="isAngularZone",Fd=Ym+"_ID",bR=0,de=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Le(!1);onMicrotaskEmpty=new Le(!1);onStable=new Le(!1);onError=new Le(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:i=cT}=e;if(typeof Zone>"u")throw new A(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&r,s.shouldCoalesceRunChangeDetection=o,s.callbackScheduled=!1,s.scheduleInRootZone=i,MR(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Ym)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new A(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new A(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,o){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,e,AR,lc,lc);try{return i.runTask(s,t,r)}finally{i.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},AR={};function Qm(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function DR(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){lT(()=>{n.callbackScheduled=!1,Tm(n),n.isCheckStableRunning=!0,Qm(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Tm(n)}function MR(n){let e=()=>{DR(n)},t=bR++;n._inner=n._inner.fork({name:"angular",properties:{[Ym]:!0,[Fd]:t,[Fd+t]:!0},onInvokeTask:(r,o,i,s,a,c)=>{if(RR(c))return r.invokeTask(i,s,a,c);try{return PI(n),r.invokeTask(i,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),xI(n)}},onInvoke:(r,o,i,s,a,c,l)=>{try{return PI(n),r.invoke(i,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!kR(c)&&e(),xI(n)}},onHasTask:(r,o,i,s)=>{r.hasTask(i,s),o===i&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Tm(n),Qm(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,o,i,s)=>(r.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Tm(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function PI(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function xI(n){n._nesting--,Qm(n)}var Ud=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Le;onMicrotaskEmpty=new Le;onStable=new Le;onError=new Le;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,o){return e.apply(t,r)}};function RR(n){return uT(n,"__ignore_ng_zone__")}function kR(n){return uT(n,"__scheduler_tick__")}function uT(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var dT=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=k({token:n,providedIn:"root",factory:()=>new n})}return n})();var Zm=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Jm=new M("");function gs(n){return!!n&&typeof n.then=="function"}function Xm(n){return!!n&&typeof n.subscribe=="function"}var hT=new M("");var ey=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=I(hT,{optional:!0})??[];injector=I(Ut);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let o of this.appInits){let i=rt(this.injector,o);if(gs(i))t.push(i);else if(Xm(i)){let s=new Promise((a,c)=>{i.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(o=>{this.reject(o)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Xd=new M("");function fT(){Mp(()=>{let n="";throw new A(600,n)})}function pT(n){return n.isBoundToModule}var NR=10;var Ho=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=I(Dt);afterRenderManager=I(dT);zonelessEnabled=I(Ed);rootEffectScheduler=I(Yg);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ce;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=I(zn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(B(t=>!t))}constructor(){I(Ic,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:o=>{o&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=I(xe);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,o=Ut.NULL){return this._injector.get(de).run(()=>{ie(10);let s=t instanceof Qd;if(!this._injector.get(ey).done){let E="";throw new A(405,E)}let c;s?c=t:c=this._injector.get(vc).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=pT(c)?void 0:this._injector.get(xo),u=r||c.selector,h=c.create(o,[],u,l),g=h.location.nativeElement,p=h.injector.get(Jm,null);return p?.registerApplication(g),h.onDestroy(()=>{this.detachView(h.hostView),dc(this.components,h),p?.unregisterApplication(g)}),this._loadComponent(h),ie(11,h),h})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ie(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Wm.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new A(101,!1);let t=Y(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Y(t),this.afterTick.next(),ie(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Po,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<NR;)ie(14),this.synchronizeOnce(),ie(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:o}of this.allViews){if(!r&&!rc(o))continue;let i=r&&!this.zonelessEnabled?0:1;Vm(o,i),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>rc(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;dc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(o){this.internalErrorHandler(o)}this.components.push(t),this._injector.get(Xd,[]).forEach(o=>o(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>dc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new A(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function dc(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Bo(n,e,t){let r=ce(),o=zg();if(Zd(r,o,e)){let i=At(),s=lI();eM(s,r,n,e,r[ze],t)}return Bo}function LI(n,e,t,r,o){Fm(e,n,t,o?"class":"style",r)}function te(n,e,t,r){let o=ce(),i=At(),s=it+n,a=o[ze],c=i.firstCreatePass?X_(s,i,o,e,M_,Pg(),t,r):i.data[s],l=OR(i,o,c,a,e,n);o[s]=l;let u=dd(c);return as(c,!0),T_(a,l,c),!Kd(c)&&vd()&&jm(i,o,l,c),(qE()===0||u)&&mc(l,o),KE(),u&&(Lm(i,o,c),m_(i,c,o)),r!==null&&D_(o,c),te}function ee(){let n=zt();Fg()?Ug():(n=n.parent,as(n,!1));let e=n;YE(e)&&QE(),WE();let t=At();return t.firstCreatePass&&eT(t,e),e.classesWithoutHost!=null&&sD(e)&&LI(t,e,ce(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&aD(e)&&LI(t,e,ce(),e.stylesWithoutHost,!1),ee}function st(n,e,t,r){return te(n,e,t,r),ee(),st}var OR=(n,e,t,r,o,i)=>(Cd(!0),I_(r,o,uI()));function eh(){return ce()}var ko=void 0;function PR(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var xR=["en",[["a","p"],["AM","PM"],ko],[["AM","PM"],ko,ko],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ko,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ko,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ko,"{1} 'at' {0}",ko],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",PR],tm={};function Mt(n){let e=LR(n),t=FI(e);if(t)return t;let r=e.split("-")[0];if(t=FI(r),t)return t;if(r==="en")return xR;throw new A(701,!1)}function FI(n){return n in tm||(tm[n]=Eo.ng&&Eo.ng.common&&Eo.ng.common.locales&&Eo.ng.common.locales[n]),tm[n]}var be=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(be||{});function LR(n){return n.toLowerCase().replace(/_/g,"-")}var _c="en-US";var FR=_c;function gT(n){typeof n=="string"&&(FR=n.toLowerCase().replace(/_/g,"-"))}function Gn(n,e,t){let r=ce(),o=At(),i=zt();return UR(o,r,r[ze],i,n,e,t),Gn}function UR(n,e,t,r,o,i,s){let a=!0,c=null;if((r.type&3||s)&&(c??=Xg(r,e,i),XM(r,n,e,s,t,o,i,c)&&(a=!1)),a){let l=r.outputs?.[o],u=r.hostDirectiveOutputs?.[o];if(u&&u.length)for(let h=0;h<u.length;h+=2){let g=u[h],p=u[h+1];c??=Xg(r,e,i),DI(r,e,g,p,o,c)}if(l&&l.length)for(let h of l)c??=Xg(r,e,i),DI(r,e,h,o,o,c)}}function Tc(n=1){return cI(n)}function HR(n,e){let t=null,r=xD(n);for(let o=0;o<e.length;o++){let i=e[o];if(i==="*"){t=o;continue}if(r===null?E_(n,i,!0):UD(r,i))return o}return t}function ty(n){let e=ce()[pt][ot];if(!e.projection){let t=n?n.length:1,r=e.projection=RE(t,null),o=r.slice(),i=e.child;for(;i!==null;){if(i.type!==128){let s=n?HR(i,n):0;s!==null&&(o[s]?o[s].projectionNext=i:r[s]=i,o[s]=i)}i=i.next}}}function ny(n,e=0,t,r,o,i){let s=ce(),a=At(),c=r?n+1:null;c!==null&&aT(s,a,c,r,o,i,null,t);let l=Yd(a,it+n,16,null,t||null);l.projection===null&&(l.projection=e),Ug();let h=!s[rs]||xg();s[pt][ot].projection[l.projection]===null&&c!==null?BR(s,a,c):h&&!Kd(l)&&IM(a,s,l)}function BR(n,e,t){let r=it+t,o=e.data[r],i=n[r],s=vm(i,o.tView.ssrId),a=R_(n,o,void 0,{dehydratedView:s});K_(i,a,0,pm(o,s))}function _d(n,e){return n<<17|e<<2}function Lo(n){return n>>17&32767}function jR(n){return(n&2)==2}function zR(n,e){return n&131071|e<<17}function wm(n){return n|2}function fs(n){return(n&131068)>>2}function nm(n,e){return n&-131069|e<<2}function VR(n){return(n&1)===1}function Sm(n){return n|1}function $R(n,e,t,r,o,i){let s=i?e.classBindings:e.styleBindings,a=Lo(s),c=fs(s);n[r]=t;let l=!1,u;if(Array.isArray(t)){let h=t;u=h[1],(u===null||ts(h,u)>0)&&(l=!0)}else u=t;if(o)if(c!==0){let g=Lo(n[a+1]);n[r+1]=_d(g,a),g!==0&&(n[g+1]=nm(n[g+1],r)),n[a+1]=zR(n[a+1],r)}else n[r+1]=_d(a,0),a!==0&&(n[a+1]=nm(n[a+1],r)),a=r;else n[r+1]=_d(c,0),a===0?a=r:n[c+1]=nm(n[c+1],r),c=r;l&&(n[r+1]=wm(n[r+1])),UI(n,u,r,!0),UI(n,u,r,!1),GR(e,u,n,r,i),s=_d(a,c),i?e.classBindings=s:e.styleBindings=s}function GR(n,e,t,r,o){let i=o?n.residualClasses:n.residualStyles;i!=null&&typeof e=="string"&&ts(i,e)>=0&&(t[r+1]=Sm(t[r+1]))}function UI(n,e,t,r){let o=n[t+1],i=e===null,s=r?Lo(o):fs(o),a=!1;for(;s!==0&&(a===!1||i);){let c=n[s],l=n[s+1];qR(c,e)&&(a=!0,n[s+1]=r?Sm(l):wm(l)),s=r?Lo(l):fs(l)}a&&(n[t+1]=r?wm(o):Sm(o))}function qR(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ts(n,e)>=0:!1}function th(n,e){return KR(n,e,null,!0),th}function KR(n,e,t,r){let o=ce(),i=At(),s=eI(2);if(i.firstUpdatePass&&YR(i,n,s,r),e!==$n&&Zd(o,s,e)){let a=i.data[Mo()];ek(i,a,o,o[ze],n,o[s+1]=tk(e,t),r,s)}}function WR(n,e){return e>=n.expandoStartIndex}function YR(n,e,t,r){let o=n.data;if(o[t+1]===null){let i=o[Mo()],s=WR(n,t);nk(i,r)&&e===null&&!s&&(e=!1),e=QR(o,i,e,r),$R(o,i,e,t,s,r)}}function QR(n,e,t,r){let o=oI(n),i=r?e.residualClasses:e.residualStyles;if(o===null)(r?e.classBindings:e.styleBindings)===0&&(t=rm(null,n,e,t,r),t=pc(t,e.attrs,r),i=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==o)if(t=rm(o,n,e,t,r),i===null){let c=ZR(n,e,r);c!==void 0&&Array.isArray(c)&&(c=rm(null,n,e,c[1],r),c=pc(c,e.attrs,r),JR(n,e,r,c))}else i=XR(n,e,r)}return i!==void 0&&(r?e.residualClasses=i:e.residualStyles=i),t}function ZR(n,e,t){let r=t?e.classBindings:e.styleBindings;if(fs(r)!==0)return n[Lo(r)]}function JR(n,e,t,r){let o=t?e.classBindings:e.styleBindings;n[Lo(o)]=r}function XR(n,e,t){let r,o=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<o;i++){let s=n[i].hostAttrs;r=pc(r,s,t)}return pc(r,e.attrs,t)}function rm(n,e,t,r,o){let i=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(i=e[a],r=pc(r,i.hostAttrs,o),i!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function pc(n,e,t){let r=t?1:2,o=-1;if(e!==null)for(let i=0;i<e.length;i++){let s=e[i];typeof s=="number"?o=s:o===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),NE(n,s,t?!0:e[++i]))}return n===void 0?null:n}function ek(n,e,t,r,o,i,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=VR(l)?HI(c,e,t,o,fs(l),s):void 0;if(!Hd(u)){Hd(i)||jR(l)&&(i=HI(c,null,t,o,a,s));let h=Mg(Mo(),t);TM(r,s,h,o,i)}}function HI(n,e,t,r,o,i){let s=e===null,a;for(;o>0;){let c=n[o],l=Array.isArray(c),u=l?c[1]:c,h=u===null,g=t[o+1];g===$n&&(g=h?Ft:void 0);let p=h?ad(g,r):u===r?g:void 0;if(l&&!Hd(p)&&(p=ad(c,r)),Hd(p)&&(a=p,s))return a;let E=n[o+1];o=s?Lo(E):fs(E)}if(e!==null){let c=i?e.residualClasses:e.residualStyles;c!=null&&(a=ad(c,r))}return a}function Hd(n){return n!==void 0}function tk(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=ft(y_(n)))),n}function nk(n,e){return(n.flags&(e?8:16))!==0}function Ee(n,e=""){let t=ce(),r=At(),o=n+it,i=r.firstCreatePass?Yd(r,o,1,e,null):r.data[o],s=rk(r,t,i,e,n);t[o]=s,vd()&&jm(r,t,s,i),as(i,!1)}var rk=(n,e,t,r,o)=>(Cd(!0),zD(e[ze],r));function ok(n,e,t,r=""){return Zd(n,zg(),t)?e+fg(t)+r:$n}function wc(n){return jo("",n),wc}function jo(n,e,t){let r=ce(),o=ok(r,n,e,t);return o!==$n&&ik(r,Mo(),o),jo}function ik(n,e,t){let r=Mg(e,n);VD(n[ze],r,t)}function sk(n,e,t){let r=At();if(r.firstCreatePass){let o=Nr(n);bm(t,r.data,r.blueprint,o,!0),bm(e,r.data,r.blueprint,o,!1)}}function bm(n,e,t,r,o){if(n=Ke(n),Array.isArray(n))for(let i=0;i<n.length;i++)bm(n[i],e,t,r,o);else{let i=At(),s=ce(),a=zt(),c=vo(n)?n:Ke(n.provide),l=wg(n),u=a.providerIndexes&1048575,h=a.directiveStart,g=a.providerIndexes>>20;if(vo(n)||!n.multi){let p=new Oo(l,o,Fe),E=im(c,e,o?u:u+g,h);E===-1?(am(Rd(a,s),i,c),om(i,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),t.push(p),s.push(p)):(t[E]=p,s[E]=p)}else{let p=im(c,e,u+g,h),E=im(c,e,u,u+g),_=p>=0&&t[p],b=E>=0&&t[E];if(o&&!b||!o&&!_){am(Rd(a,s),i,c);let O=lk(o?ck:ak,t.length,o,r,l);!o&&b&&(t[E].providerFactory=O),om(i,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),t.push(O),s.push(O)}else{let O=mT(t[o?E:p],l,!o&&r);om(i,n,p>-1?p:E,O)}!o&&r&&b&&t[E].componentProviders++}}}function om(n,e,t,r){let o=vo(e),i=LE(e);if(o||i){let c=(i?Ke(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!o&&e.multi){let u=l.indexOf(t);u===-1?l.push(t,[r,c]):l[u+1].push(r,c)}else l.push(t,c)}}}function mT(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function im(n,e,t,r){for(let o=t;o<r;o++)if(e[o]===n)return o;return-1}function ak(n,e,t,r){return Am(this.multi,[])}function ck(n,e,t,r){let o=this.multi,i;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=kd(t,t[K],this.providerFactory.index,r);i=a.slice(0,s),Am(o,i);for(let c=s;c<a.length;c++)i.push(a[c])}else i=[],Am(o,i);return i}function Am(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function lk(n,e,t,r,o){let i=new Oo(n,t,Fe);return i.multi=[],i.index=e,i.componentProviders=0,mT(i,o,r&&!t),i}function ry(n,e=[]){return t=>{t.providersResolver=(r,o)=>sk(r,o?o(n):n,e)}}function uk(n,e){let t=n[e];return t===$n?void 0:t}function dk(n,e,t,r,o,i){let s=e+t;return Zd(n,s,o)?JM(n,s+1,i?r.call(i,o):r(o)):uk(n,s+1)}function oy(n,e){let t=At(),r,o=n+it;t.firstCreatePass?(r=hk(e,t.pipeRegistry),t.data[o]=r,r.onDestroy&&(t.destroyHooks??=[]).push(o,r.onDestroy)):r=t.data[o];let i=r.factory||(r.factory=Sr(r.type,!0)),s,a=nt(Fe);try{let c=Md(!1),l=i();return Md(c),Rg(t,ce(),o,l),l}finally{nt(a)}}function hk(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function iy(n,e,t){let r=n+it,o=ce(),i=BE(o,r);return fk(o,r)?dk(o,JE(),e,i.transform,t,i):i.transform(t)}function fk(n,e){return n[K].data[e].pure}var Bd=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},sy=(()=>{class n{compileModuleSync(t){return new Ld(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),o=Eg(t),i=v_(o.declarations).reduce((s,a)=>{let c=Mr(a);return c&&s.push(new hs(c)),s},[]);return new Bd(r,i)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var pk=(()=>{class n{zone=I(de);changeDetectionScheduler=I(Ar);applicationRef=I(Ho);applicationErrorHandler=I(Dt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yT({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new de(w(m({},vT()),{scheduleInRootZone:t})),[{provide:de,useFactory:n},{provide:Dr,multi:!0,useFactory:()=>{let r=I(pk,{optional:!0});return()=>r.initialize()}},{provide:Dr,multi:!0,useFactory:()=>{let r=I(gk);return()=>{r.initialize()}}},e===!0?{provide:Kg,useValue:!0}:[],{provide:Wg,useValue:t??cT},{provide:Dt,useFactory:()=>{let r=I(de),o=I(xe),i;return s=>{r.runOutsideAngular(()=>{o.destroyed&&!i?setTimeout(()=>{throw s}):(i??=o.get(fn),i.handleError(s))})}}}]}function vT(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var gk=(()=>{class n{subscription=new we;initialized=!1;zone=I(de);pendingTasks=I(zn);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{de.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{de.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var CT=(()=>{class n{applicationErrorHandler=I(Dt);appRef=I(Ho);taskService=I(zn);ngZone=I(de);zonelessEnabled=I(Ed);tracing=I(Ic,{optional:!0});disableScheduling=I(Kg,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new we;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Fd):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(I(Wg,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ud||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let o=this.useMicrotaskScheduler?OI:lT;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>o(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>o(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Fd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,OI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mk(){return typeof $localize<"u"&&$localize.locale||_c}var Sc=new M("",{providedIn:"root",factory:()=>I(Sc,{optional:!0,skipSelf:!0})||mk()});var TT=Symbol("InputSignalNode#UNSET"),Pk=w(m({},kp),{transformFn:void 0,applyValueToInputSignal(n,e){Rp(n,e)}});function wT(n,e){let t=Object.create(Pk);t.value=n,t.transformFn=e?.transform;function r(){if(Sp(t),t.value===TT){let o=null;throw new A(-950,o)}return t.value}return r[Du]=t,r}var xk=new M("");xk.__NG_ELEMENT_ID__=n=>{let e=zt();if(e===null)throw new A(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new A(204,!1)};function ET(n,e){return wT(n,e)}function Lk(n){return wT(TT,n)}var ST=(ET.required=Lk,ET);var ay=new M(""),Fk=new M("");function bc(n){return!n.moduleRef}function Uk(n){let e=bc(n)?n.r3Injector:n.moduleRef.injector,t=e.get(de);return t.run(()=>{bc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Dt),o;if(t.runOutsideAngular(()=>{o=t.onError.subscribe({next:r})}),bc(n)){let i=()=>e.destroy(),s=n.platformInjector.get(ay);s.add(i),e.onDestroy(()=>{o.unsubscribe(),s.delete(i)})}else{let i=()=>n.moduleRef.destroy(),s=n.platformInjector.get(ay);s.add(i),n.moduleRef.onDestroy(()=>{dc(n.allPlatformModules,n.moduleRef),o.unsubscribe(),s.delete(i)})}return Bk(r,t,()=>{let i=e.get(ey);return i.runInitializers(),i.donePromise.then(()=>{let s=e.get(Sc,_c);if(gT(s||_c),!e.get(Fk,!0))return bc(n)?e.get(Ho):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(bc(n)){let c=e.get(Ho);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return Hk?.(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}var Hk;function Bk(n,e,t){try{let r=t();return gs(r)?r.catch(o=>{throw e.runOutsideAngular(()=>n(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var nh=null;function jk(n=[],e){return Ut.create({name:e,providers:[{provide:Qa,useValue:"platform"},{provide:ay,useValue:new Set([()=>nh=null])},...n]})}function zk(n=[]){if(nh)return nh;let e=jk(n);return nh=e,fT(),Vk(e),e}function Vk(n){let e=n.get($d,null);rt(n,()=>{e?.forEach(t=>t())})}var hy=(()=>{class n{static __NG_ELEMENT_ID__=$k}return n})();function $k(n){return Gk(zt(),ce(),(n&16)===16)}function Gk(n,e,t){if(kr(n)&&!t){let r=Zt(n.index,e);return new Pr(r,r)}else if(n.type&175){let r=e[pt];return new Pr(r,e)}return null}var cy=class{constructor(){}supports(e){return Gm(e)}create(e){return new ly(e)}},qk=(n,e)=>e,ly=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||qk}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,o=0,i=null;for(;t||r;){let s=!r||t&&t.currentIndex<IT(r,o,i)?t:r,a=IT(s,o,i),c=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)o++;else{i||(i=[]);let l=a-o,u=c-o;if(l!=u){for(let g=0;g<l;g++){let p=g<i.length?i[g]:i[g]=0,E=p+g;u<=E&&E<l&&(i[g]=p+1)}let h=s.previousIndex;i[h]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Gm(e))throw new A(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,o,i,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)i=e[a],s=this._trackByFn(a,i),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,i,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,i,s,a)),Object.is(t.item,i)||this._addIdentityChange(t,i)),t=t._next}else o=0,tT(e,a=>{s=this._trackByFn(o,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,o),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,o)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,o++}),this.length=o;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,o){let i;return e===null?i=this._itTail:(i=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,o)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,o),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,o)):e=this._addAfter(new uy(t,r),i,o)),e}_verifyReinsertion(e,t,r,o){let i=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return i!==null?e=this._reinsertAfter(i,e._prev,o):e.currentIndex!=o&&(e.currentIndex=o,this._addToMoves(e,o)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let o=e._prevRemoved,i=e._nextRemoved;return o===null?this._removalsHead=i:o._nextRemoved=i,i===null?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let o=t===null?this._itHead:t._next;return e._next=o,e._prev=t,o===null?this._itTail=e:o._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new rh),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new rh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},uy=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},dy=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},rh=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new dy,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,o=this.map.get(r);return o?o.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function IT(n,e,t){let r=n.previousIndex;if(r===null)return r;let o=0;return t&&r<t.length&&(o=t[r]),r+e+o}function _T(){return new fy([new cy])}var fy=(()=>{class n{factories;static \u0275prov=k({token:n,providedIn:"root",factory:_T});constructor(t){this.factories=t}static create(t,r){if(r!=null){let o=r.factories.slice();t=t.concat(o)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||_T()),deps:[[n,new $I,new VI]]}}find(t){let r=this.factories.find(o=>o.supports(t));if(r!=null)return r;throw new A(901,!1)}}return n})();function bT(n){ie(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,o=zk(r),i=[yT({}),{provide:Ar,useExisting:CT},hI,...t||[]],s=new fc({providers:i,parent:o,debugName:"",runEnvironmentInitializers:!1});return Uk({r3Injector:s.injector,platformInjector:o,rootComponent:e})}catch(e){return Promise.reject(e)}finally{ie(9)}}var MT=null;function qn(){return MT}function py(n){MT??=n}var Ac=class{},gy=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>I(RT),providedIn:"platform"})}return n})();var RT=(()=>{class n extends gy{_location;_history;_doc=I(De);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return qn().getBaseHref(this._doc)}onPopState(t){let r=qn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=qn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){this._history.pushState(t,r,o)}replaceState(t,r,o){this._history.replaceState(t,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function kT(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function AT(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Fr(n){return n&&n[0]!=="?"?`?${n}`:n}var ih=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>I(OT),providedIn:"root"})}return n})(),NT=new M(""),OT=(()=>{class n extends ih{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??I(De).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return kT(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Fr(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,i){let s=this.prepareExternalUrl(o+Fr(i));this._platformLocation.pushState(t,r,s)}replaceState(t,r,o,i){let s=this.prepareExternalUrl(o+Fr(i));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(R(gy),R(NT,8))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Kn=(()=>{class n{_subject=new Ce;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=Yk(AT(DT(r))),this._locationStrategy.onPopState(o=>{this._subject.next({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Fr(r))}normalize(t){return n.stripTrailingSlash(Wk(this._basePath,DT(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fr(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fr(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r??void 0,complete:o??void 0})}static normalizeQueryParams=Fr;static joinWithSlash=kT;static stripTrailingSlash=AT;static \u0275fac=function(r){return new(r||n)(R(ih))};static \u0275prov=k({token:n,factory:()=>Kk(),providedIn:"root"})}return n})();function Kk(){return new Kn(R(ih))}function Wk(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function DT(n){return n.replace(/\/index.html$/,"")}function Yk(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Qe=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Qe||{}),oe=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(oe||{}),yt=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(yt||{}),Yn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function FT(n){return Mt(n)[be.LocaleId]}function UT(n,e,t){let r=Mt(n),o=[r[be.DayPeriodsFormat],r[be.DayPeriodsStandalone]],i=Vt(o,e);return Vt(i,t)}function HT(n,e,t){let r=Mt(n),o=[r[be.DaysFormat],r[be.DaysStandalone]],i=Vt(o,e);return Vt(i,t)}function BT(n,e,t){let r=Mt(n),o=[r[be.MonthsFormat],r[be.MonthsStandalone]],i=Vt(o,e);return Vt(i,t)}function jT(n,e){let r=Mt(n)[be.Eras];return Vt(r,e)}function Dc(n,e){let t=Mt(n);return Vt(t[be.DateFormat],e)}function Mc(n,e){let t=Mt(n);return Vt(t[be.TimeFormat],e)}function Rc(n,e){let r=Mt(n)[be.DateTimeFormat];return Vt(r,e)}function kc(n,e){let t=Mt(n),r=t[be.NumberSymbols][e];if(typeof r>"u"){if(e===Yn.CurrencyDecimal)return t[be.NumberSymbols][Yn.Decimal];if(e===Yn.CurrencyGroup)return t[be.NumberSymbols][Yn.Group]}return r}function zT(n){if(!n[be.ExtraData])throw new A(2303,!1)}function VT(n){let e=Mt(n);return zT(e),(e[be.ExtraData][2]||[]).map(r=>typeof r=="string"?my(r):[my(r[0]),my(r[1])])}function $T(n,e,t){let r=Mt(n);zT(r);let o=[r[be.ExtraData][0],r[be.ExtraData][1]],i=Vt(o,e)||[];return Vt(i,t)||[]}function Vt(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new A(2304,!1)}function my(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var Zk=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,sh={},Jk=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function GT(n,e,t,r){let o=aN(n);e=Wn(t,e)||e;let s=[],a;for(;e;)if(a=Jk.exec(e),a){s=s.concat(a.slice(1));let u=s.pop();if(!u)break;e=u}else{s.push(e);break}let c=o.getTimezoneOffset();r&&(c=KT(r,c),o=sN(o,r));let l="";return s.forEach(u=>{let h=oN(u);l+=h?h(o,t,c):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function dh(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Wn(n,e){let t=FT(n);if(sh[t]??={},sh[t][e])return sh[t][e];let r="";switch(e){case"shortDate":r=Dc(n,yt.Short);break;case"mediumDate":r=Dc(n,yt.Medium);break;case"longDate":r=Dc(n,yt.Long);break;case"fullDate":r=Dc(n,yt.Full);break;case"shortTime":r=Mc(n,yt.Short);break;case"mediumTime":r=Mc(n,yt.Medium);break;case"longTime":r=Mc(n,yt.Long);break;case"fullTime":r=Mc(n,yt.Full);break;case"short":let o=Wn(n,"shortTime"),i=Wn(n,"shortDate");r=ah(Rc(n,yt.Short),[o,i]);break;case"medium":let s=Wn(n,"mediumTime"),a=Wn(n,"mediumDate");r=ah(Rc(n,yt.Medium),[s,a]);break;case"long":let c=Wn(n,"longTime"),l=Wn(n,"longDate");r=ah(Rc(n,yt.Long),[c,l]);break;case"full":let u=Wn(n,"fullTime"),h=Wn(n,"fullDate");r=ah(Rc(n,yt.Full),[u,h]);break}return r&&(sh[t][e]=r),r}function ah(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function tn(n,e,t="-",r,o){let i="";(n<0||o&&n<=0)&&(o?n=-n+1:(n=-n,i=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),i+s}function Xk(n,e){return tn(n,3).substring(0,e)}function Me(n,e,t=0,r=!1,o=!1){return function(i,s){let a=eN(n,i);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return Xk(a,e);let c=kc(s,Yn.MinusSign);return tn(a,e,c,r,o)}}function eN(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new A(2301,!1)}}function ae(n,e,t=Qe.Format,r=!1){return function(o,i){return tN(o,i,n,e,t,r)}}function tN(n,e,t,r,o,i){switch(t){case 2:return BT(e,o,r)[n.getMonth()];case 1:return HT(e,o,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(i){let l=VT(e),u=$T(e,o,r),h=l.findIndex(g=>{if(Array.isArray(g)){let[p,E]=g,_=s>=p.hours&&a>=p.minutes,b=s<E.hours||s===E.hours&&a<E.minutes;if(p.hours<E.hours){if(_&&b)return!0}else if(_||b)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(h!==-1)return u[h]}return UT(e,o,r)[s<12?0:1];case 3:return jT(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new A(2302,!1)}}function ch(n){return function(e,t,r){let o=-1*r,i=kc(t,Yn.MinusSign),s=o>0?Math.floor(o/60):Math.ceil(o/60);switch(n){case 0:return(o>=0?"+":"")+tn(s,2,i)+tn(Math.abs(o%60),2,i);case 1:return"GMT"+(o>=0?"+":"")+tn(s,1,i);case 2:return"GMT"+(o>=0?"+":"")+tn(s,2,i)+":"+tn(Math.abs(o%60),2,i);case 3:return r===0?"Z":(o>=0?"+":"")+tn(s,2,i)+":"+tn(Math.abs(o%60),2,i);default:throw new A(2302,!1)}}}var nN=0,uh=4;function rN(n){let e=dh(n,nN,1).getDay();return dh(n,0,1+(e<=uh?uh:uh+7)-e)}function qT(n){let e=n.getDay(),t=e===0?-3:uh-e;return dh(n.getFullYear(),n.getMonth(),n.getDate()+t)}function yy(n,e=!1){return function(t,r){let o;if(e){let i=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();o=1+Math.floor((s+i)/7)}else{let i=qT(t),s=rN(i.getFullYear()),a=i.getTime()-s.getTime();o=1+Math.round(a/6048e5)}return tn(o,n,kc(r,Yn.MinusSign))}}function lh(n,e=!1){return function(t,r){let i=qT(t).getFullYear();return tn(i,n,kc(r,Yn.MinusSign),e)}}var vy={};function oN(n){if(vy[n])return vy[n];let e;switch(n){case"G":case"GG":case"GGG":e=ae(3,oe.Abbreviated);break;case"GGGG":e=ae(3,oe.Wide);break;case"GGGGG":e=ae(3,oe.Narrow);break;case"y":e=Me(0,1,0,!1,!0);break;case"yy":e=Me(0,2,0,!0,!0);break;case"yyy":e=Me(0,3,0,!1,!0);break;case"yyyy":e=Me(0,4,0,!1,!0);break;case"Y":e=lh(1);break;case"YY":e=lh(2,!0);break;case"YYY":e=lh(3);break;case"YYYY":e=lh(4);break;case"M":case"L":e=Me(1,1,1);break;case"MM":case"LL":e=Me(1,2,1);break;case"MMM":e=ae(2,oe.Abbreviated);break;case"MMMM":e=ae(2,oe.Wide);break;case"MMMMM":e=ae(2,oe.Narrow);break;case"LLL":e=ae(2,oe.Abbreviated,Qe.Standalone);break;case"LLLL":e=ae(2,oe.Wide,Qe.Standalone);break;case"LLLLL":e=ae(2,oe.Narrow,Qe.Standalone);break;case"w":e=yy(1);break;case"ww":e=yy(2);break;case"W":e=yy(1,!0);break;case"d":e=Me(2,1);break;case"dd":e=Me(2,2);break;case"c":case"cc":e=Me(7,1);break;case"ccc":e=ae(1,oe.Abbreviated,Qe.Standalone);break;case"cccc":e=ae(1,oe.Wide,Qe.Standalone);break;case"ccccc":e=ae(1,oe.Narrow,Qe.Standalone);break;case"cccccc":e=ae(1,oe.Short,Qe.Standalone);break;case"E":case"EE":case"EEE":e=ae(1,oe.Abbreviated);break;case"EEEE":e=ae(1,oe.Wide);break;case"EEEEE":e=ae(1,oe.Narrow);break;case"EEEEEE":e=ae(1,oe.Short);break;case"a":case"aa":case"aaa":e=ae(0,oe.Abbreviated);break;case"aaaa":e=ae(0,oe.Wide);break;case"aaaaa":e=ae(0,oe.Narrow);break;case"b":case"bb":case"bbb":e=ae(0,oe.Abbreviated,Qe.Standalone,!0);break;case"bbbb":e=ae(0,oe.Wide,Qe.Standalone,!0);break;case"bbbbb":e=ae(0,oe.Narrow,Qe.Standalone,!0);break;case"B":case"BB":case"BBB":e=ae(0,oe.Abbreviated,Qe.Format,!0);break;case"BBBB":e=ae(0,oe.Wide,Qe.Format,!0);break;case"BBBBB":e=ae(0,oe.Narrow,Qe.Format,!0);break;case"h":e=Me(3,1,-12);break;case"hh":e=Me(3,2,-12);break;case"H":e=Me(3,1);break;case"HH":e=Me(3,2);break;case"m":e=Me(4,1);break;case"mm":e=Me(4,2);break;case"s":e=Me(5,1);break;case"ss":e=Me(5,2);break;case"S":e=Me(6,1);break;case"SS":e=Me(6,2);break;case"SSS":e=Me(6,3);break;case"Z":case"ZZ":case"ZZZ":e=ch(0);break;case"ZZZZZ":e=ch(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=ch(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=ch(2);break;default:return null}return vy[n]=e,e}function KT(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function iN(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function sN(n,e,t){let o=n.getTimezoneOffset(),i=KT(e,o);return iN(n,-1*(i-o))}function aN(n){if(PT(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[o,i=1,s=1]=n.split("-").map(a=>+a);return dh(o,i-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Zk))return cN(r)}let e=new Date(n);if(!PT(e))throw new A(2302,!1);return e}function cN(n){let e=new Date(0),t=0,r=0,o=n[8]?e.setUTCFullYear:e.setFullYear,i=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),o.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return i.call(e,s,a,c,l),e}function PT(n){return n instanceof Date&&!isNaN(n.valueOf())}var hh=class{$implicit;ngForOf;index;count;constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ph=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((o,i,s)=>{if(o.previousIndex==null)r.createEmbeddedView(this._template,new hh(o.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(i===null?void 0:i);else if(i!==null){let a=r.get(i);r.move(a,s),xT(a,o)}});for(let o=0,i=r.length;o<i;o++){let a=r.get(o).context;a.index=o,a.count=i,a.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{let i=r.get(o.currentIndex);xT(i,o)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Fe(Uo),Fe(yc),Fe(fy))};static \u0275dir=Lr({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function xT(n,e){n.context.$implicit=e.item}var Cy=(()=>{class n{_viewContainer;_context=new fh;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){LT(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){LT(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Fe(Uo),Fe(yc))};static \u0275dir=Lr({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),fh=class{$implicit=null;ngIf=null};function LT(n,e){if(n&&!n.createEmbeddedView)throw new A(2020,!1)}function lN(n,e){return new A(2100,!1)}var uN="mediumDate",WT=new M(""),YT=new M(""),Ey=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,o){this.locale=t,this.defaultTimezone=r,this.defaultOptions=o}transform(t,r,o,i){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??uN,a=o??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return GT(t,s,i||this.locale,a)}catch(s){throw lN(n,s.message)}}static \u0275fac=function(r){return new(r||n)(Fe(Sc,16),Fe(WT,24),Fe(YT,24))};static \u0275pipe=Km({name:"date",type:n,pure:!0})}return n})();var yn=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=en({type:n});static \u0275inj=Ht({})}return n})();function Nc(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[o,i]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(i)}return null}var zo=class{};var Iy="browser",dN="server";function QT(n){return n===Iy}function ZT(n){return n===dN}var yh=new M(""),Sy=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o,i){return this._findPluginFor(r).addEventListener(t,r,o,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(i=>i.supports(t)),!r)throw new A(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(R(yh),R(de))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})(),Oc=class{_doc;constructor(e){this._doc=e}manager},gh="ng-app-id";function XT(n){for(let e of n)e.remove()}function ew(n,e){let t=e.createElement("style");return t.textContent=n,t}function hN(n,e,t,r){let o=n.head?.querySelectorAll(`style[${gh}="${e}"],link[${gh}="${e}"]`);if(o)for(let i of o)i.removeAttribute(gh),i instanceof HTMLLinkElement?r.set(i.href.slice(i.href.lastIndexOf("/")+1),{usage:0,elements:[i]}):i.textContent&&t.set(i.textContent,{usage:0,elements:[i]})}function Ty(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var by=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,o,i={}){this.doc=t,this.appId=r,this.nonce=o,this.isServer=ZT(i),hN(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let o of t)this.addUsage(o,this.inline,ew);r?.forEach(o=>this.addUsage(o,this.external,Ty))}removeStyles(t,r){for(let o of t)this.removeUsage(o,this.inline);r?.forEach(o=>this.removeUsage(o,this.external))}addUsage(t,r,o){let i=r.get(t);i?i.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,o(t,this.doc)))})}removeUsage(t,r){let o=r.get(t);o&&(o.usage--,o.usage<=0&&(XT(o.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])XT(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:o}]of this.inline)o.push(this.addElement(t,ew(r,this.doc)));for(let[r,{elements:o}]of this.external)o.push(this.addElement(t,Ty(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(gh,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(R(De),R(Vd),R(Gd,8),R(xr))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})(),_y={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Ay=/%COMP%/g;var nw="%COMP%",fN=`_nghost-${nw}`,pN=`_ngcontent-${nw}`,gN=!0,mN=new M("",{providedIn:"root",factory:()=>gN});function yN(n){return pN.replace(Ay,n)}function vN(n){return fN.replace(Ay,n)}function rw(n,e){return e.map(t=>t.replace(Ay,n))}var Dy=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,o,i,s,a,c,l=null,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new Pc(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let o=this.getOrCreateRenderer(t,r);return o instanceof mh?o.applyToHost(t):o instanceof xc&&o.applyStyles(),o}getOrCreateRenderer(t,r){let o=this.rendererByCompId,i=o.get(r.id);if(!i){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case Vn.Emulated:i=new mh(c,l,r,this.appId,u,s,a,h,g);break;case Vn.ShadowDom:return new wy(c,l,t,r,s,a,this.nonce,h,g);default:i=new xc(c,l,r,u,s,a,h,g);break}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(R(Sy),R(by),R(Vd),R(mN),R(De),R(xr),R(de),R(Gd),R(Ic,8))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})(),Pc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,o,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=o,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(_y[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(tw(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(tw(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new A(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;let i=_y[o];i?e.setAttributeNS(i,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let o=_y[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(mn.DashCase|mn.Important)?e.style.setProperty(t,r,o&mn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&mn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,o){if(typeof e=="string"&&(e=qn().getGlobalEventTarget(this.doc,e),!e))throw new A(5102,!1);let i=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(i=this.tracingService.wrapEventListener(e,t,i)),this.eventManager.addEventListener(e,t,i,o)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function tw(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var wy=class extends Pc{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,o,i,s,a,c,l){super(e,i,s,c,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=o.styles;u=rw(o.id,u);for(let g of u){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=g,this.shadowRoot.appendChild(p)}let h=o.getExternalStyles?.();if(h)for(let g of h){let p=Ty(g,i);a&&p.setAttribute("nonce",a),this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},xc=class extends Pc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,o,i,s,a,c,l){super(e,i,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=o;let u=r.styles;this.styles=l?rw(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},mh=class extends xc{contentAttr;hostAttr;constructor(e,t,r,o,i,s,a,c,l){let u=o+"-"+r.id;super(e,t,r,i,s,a,c,l,u),this.contentAttr=yN(u),this.hostAttr=vN(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var vh=class n extends Ac{supportsDOMEvents=!0;static makeCurrent(){py(new n)}onAndCancel(e,t,r,o){return e.addEventListener(t,r,o),()=>{e.removeEventListener(t,r,o)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=CN();return t==null?null:EN(t)}resetBaseElement(){Lc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Nc(document.cookie,e)}},Lc=null;function CN(){return Lc=Lc||document.head.querySelector("base"),Lc?Lc.getAttribute("href"):null}function EN(n){return new URL(n,document.baseURI).pathname}var IN=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})(),iw=(()=>{class n extends Oc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o,i){return t.addEventListener(r,o,i),()=>this.removeEventListener(t,r,o,i)}removeEventListener(t,r,o,i){return t.removeEventListener(r,o,i)}static \u0275fac=function(r){return new(r||n)(R(De))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})(),ow=["alt","control","meta","shift"],_N={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},TN={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},sw=(()=>{class n extends Oc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,o,i){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>qn().onAndCancel(t,s.domEventName,a,i))}static parseEventName(t){let r=t.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let i=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),ow.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=i,r.length!=0||i.length===0)return null;let c={};return c.domEventName=o,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let o=_N[t.key]||t.key,i="";return r.indexOf("code.")>-1&&(o=t.code,i="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),ow.forEach(s=>{if(s!==o){let a=TN[s];a(t)&&(i+=s+".")}}),i+=o,i===r)}static eventCallback(t,r,o){return i=>{n.matchEventFullKeyCode(i,t)&&o.runGuarded(()=>r(i))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(R(De))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})();function Ch(n,e){return bT(m({rootComponent:n},wN(e)))}function wN(n){return{appProviders:[...MN,...n?.providers??[]],platformProviders:DN}}function SN(){vh.makeCurrent()}function bN(){return new fn}function AN(){return km(document),document}var DN=[{provide:xr,useValue:Iy},{provide:$d,useValue:SN,multi:!0},{provide:De,useFactory:AN}];var MN=[{provide:Qa,useValue:"root"},{provide:fn,useFactory:bN},{provide:yh,useClass:iw,multi:!0,deps:[De]},{provide:yh,useClass:sw,multi:!0,deps:[De]},Dy,by,Sy,{provide:Po,useExisting:Dy},{provide:zo,useClass:IN},[]];var ys=class{},Fc=class{},Ur=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let o=t.slice(0,r),i=t.slice(r+1).trim();this.addHeaderEntry(o,i)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let o=(e.op==="a"?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":let i=e.value;if(!i)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>i.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(i=>i.toString()),o=e.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(e,o)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Ih=class{encodeKey(e){return aw(e)}encodeValue(e){return aw(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function RN(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{let i=o.indexOf("="),[s,a]=i==-1?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,i)),e.decodeValue(o.slice(i+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var kN=/%(\d[a-f0-9])/gi,NN={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function aw(n){return encodeURIComponent(n).replace(kN,(e,t)=>NN[t]??e)}function Eh(n){return`${n}`}var Qn=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Ih,e.fromString){if(e.fromObject)throw new A(2805,!1);this.map=RN(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],o=Array.isArray(r)?r.map(Eh):[Eh(r)];this.map.set(t,o)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let o=e[r];Array.isArray(o)?o.forEach(i=>{t.push({param:r,value:i,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Eh(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],o=r.indexOf(Eh(e.value));o!==-1&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var _h=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function ON(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function cw(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function lw(n){return typeof Blob<"u"&&n instanceof Blob}function uw(n){return typeof FormData<"u"&&n instanceof FormData}function PN(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var dw="Content-Type",hw="Accept",pw="X-Request-URL",gw="text/plain",mw="application/json",xN=`${mw}, ${gw}, */*`,ms=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;keepalive=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,o){this.url=t,this.method=e.toUpperCase();let i;if(ON(this.method)||o?(this.body=r!==void 0?r:null,i=o):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,this.keepalive=!!i.keepalive,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),this.transferCache=i.transferCache),this.headers??=new Ur,this.context??=new _h,!this.params)this.params=new Qn,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||cw(this.body)||lw(this.body)||uw(this.body)||PN(this.body)?this.body:this.body instanceof Qn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||uw(this.body)?null:lw(this.body)?this.body.type||null:cw(this.body)?null:typeof this.body=="string"?gw:this.body instanceof Qn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?mw:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,o=e.responseType||this.responseType,i=e.keepalive??this.keepalive,s=e.transferCache??this.transferCache,a=e.body!==void 0?e.body:this.body,c=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,u=e.headers||this.headers,h=e.params||this.params,g=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((p,E)=>p.set(E,e.setHeaders[E]),u)),e.setParams&&(h=Object.keys(e.setParams).reduce((p,E)=>p.set(E,e.setParams[E]),h)),new n(t,r,a,{params:h,headers:u,context:g,reportProgress:l,responseType:o,withCredentials:c,transferCache:s,keepalive:i})}},Vo=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Vo||{}),vs=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new Ur,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Th=class n extends vs{constructor(e={}){super(e)}type=Vo.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Uc=class n extends vs{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Vo.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Hc=class extends vs{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},LN=200,FN=204;function My(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache,keepalive:n.keepalive}}var Sh=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,o={}){let i;if(t instanceof ms)i=t;else{let c;o.headers instanceof Ur?c=o.headers:c=new Ur(o.headers);let l;o.params&&(o.params instanceof Qn?l=o.params:l=new Qn({fromObject:o.params})),i=new ms(t,r,o.body!==void 0?o.body:null,{headers:c,context:o.context,params:l,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache,keepalive:o.keepalive})}let s=N(i).pipe(Wt(c=>this.handler.handle(c)));if(t instanceof ms||o.observe==="events")return s;let a=s.pipe(tt(c=>c instanceof Uc));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(B(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new A(2806,!1);return c.body}));case"blob":return a.pipe(B(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new A(2807,!1);return c.body}));case"text":return a.pipe(B(c=>{if(c.body!==null&&typeof c.body!="string")throw new A(2808,!1);return c.body}));case"json":default:return a.pipe(B(c=>c.body))}case"response":return a;default:throw new A(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Qn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,My(o,r))}post(t,r,o={}){return this.request("POST",t,My(o,r))}put(t,r,o={}){return this.request("PUT",t,My(o,r))}static \u0275fac=function(r){return new(r||n)(R(ys))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})();var UN=new M("");function yw(n,e){return e(n)}function HN(n,e){return(t,r)=>e.intercept(t,{handle:o=>n(o,r)})}function BN(n,e,t){return(r,o)=>rt(t,()=>e(r,i=>n(i,o)))}var vw=new M(""),ky=new M(""),Cw=new M(""),Ny=new M("",{providedIn:"root",factory:()=>!0});function jN(){let n=null;return(e,t)=>{n===null&&(n=(I(vw,{optional:!0})??[]).reduceRight(HN,yw));let r=I(cc);if(I(Ny)){let i=r.add();return n(e,t).pipe(wr(i))}else return n(e,t)}}var wh=(()=>{class n extends ys{backend;injector;chain=null;pendingTasks=I(cc);contributeToStability=I(Ny);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(ky),...this.injector.get(Cw,[])]));this.chain=r.reduceRight((o,i)=>BN(o,i,this.injector),yw)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,o=>this.backend.handle(o)).pipe(wr(r))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(R(Fc),R(xe))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})();var zN=/^\)\]\}',?\n/,VN=RegExp(`^${pw}:`,"m");function $N(n){return"responseURL"in n&&n.responseURL?n.responseURL:VN.test(n.getAllResponseHeaders())?n.getResponseHeader(pw):null}var Ry=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new A(-2800,!1);t.keepalive;let r=this.xhrFactory;return(r.\u0275loadImpl?J(r.\u0275loadImpl()):N(null)).pipe(qe(()=>new W(i=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((_,b)=>s.setRequestHeader(_,b.join(","))),t.headers.has(hw)||s.setRequestHeader(hw,xN),!t.headers.has(dw)){let _=t.detectContentTypeHeader();_!==null&&s.setRequestHeader(dw,_)}if(t.responseType){let _=t.responseType.toLowerCase();s.responseType=_!=="json"?_:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let _=s.statusText||"OK",b=new Ur(s.getAllResponseHeaders()),O=$N(s)||t.url;return c=new Th({headers:b,status:s.status,statusText:_,url:O}),c},u=()=>{let{headers:_,status:b,statusText:O,url:Lt}=l(),se=null;b!==FN&&(se=typeof s.response>"u"?s.responseText:s.response),b===0&&(b=se?LN:0);let ho=b>=200&&b<300;if(t.responseType==="json"&&typeof se=="string"){let ji=se;se=se.replace(zN,"");try{se=se!==""?JSON.parse(se):null}catch(Gb){se=ji,ho&&(ho=!1,se={error:Gb,text:se})}}ho?(i.next(new Uc({body:se,headers:_,status:b,statusText:O,url:Lt||void 0})),i.complete()):i.error(new Hc({error:se,headers:_,status:b,statusText:O,url:Lt||void 0}))},h=_=>{let{url:b}=l(),O=new Hc({error:_,status:s.status||0,statusText:s.statusText||"Unknown Error",url:b||void 0});i.error(O)},g=!1,p=_=>{g||(i.next(l()),g=!0);let b={type:Vo.DownloadProgress,loaded:_.loaded};_.lengthComputable&&(b.total=_.total),t.responseType==="text"&&s.responseText&&(b.partialText=s.responseText),i.next(b)},E=_=>{let b={type:Vo.UploadProgress,loaded:_.loaded};_.lengthComputable&&(b.total=_.total),i.next(b)};return s.addEventListener("load",u),s.addEventListener("error",h),s.addEventListener("timeout",h),s.addEventListener("abort",h),t.reportProgress&&(s.addEventListener("progress",p),a!==null&&s.upload&&s.upload.addEventListener("progress",E)),s.send(a),i.next({type:Vo.Sent}),()=>{s.removeEventListener("error",h),s.removeEventListener("abort",h),s.removeEventListener("load",u),s.removeEventListener("timeout",h),t.reportProgress&&(s.removeEventListener("progress",p),a!==null&&s.upload&&s.upload.removeEventListener("progress",E)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(R(zo))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})(),Ew=new M(""),GN="XSRF-TOKEN",qN=new M("",{providedIn:"root",factory:()=>GN}),KN="X-XSRF-TOKEN",WN=new M("",{providedIn:"root",factory:()=>KN}),Bc=class{},YN=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Nc(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(R(De),R(qN))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})();function QN(n,e){let t=n.url.toLowerCase();if(!I(Ew)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=I(Bc).getToken(),o=I(WN);return r!=null&&!n.headers.has(o)&&(n=n.clone({headers:n.headers.set(o,r)})),e(n)}var Oy=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Oy||{});function ZN(n,e){return{\u0275kind:n,\u0275providers:e}}function bh(...n){let e=[Sh,Ry,wh,{provide:ys,useExisting:wh},{provide:Fc,useFactory:()=>I(UN,{optional:!0})??I(Ry)},{provide:ky,useValue:QN,multi:!0},{provide:Ew,useValue:!0},{provide:Bc,useClass:YN}];for(let t of n)e.push(...t.\u0275providers);return ns(e)}var fw=new M("");function Ah(){return ZN(Oy.LegacyInterceptors,[{provide:fw,useFactory:jN},{provide:ky,useExisting:fw,multi:!0}])}var Py=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=en({type:n});static \u0275inj=Ht({providers:[bh(Ah())]})}return n})();var Iw=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(R(De))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var z="primary",tl=Symbol("RouteTitle"),Hy=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function qo(n){return new Hy(n)}function Mw(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let o={};for(let i=0;i<r.length;i++){let s=r[i],a=n[i];if(s[0]===":")o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function XN(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!vn(n[t],e[t]))return!1;return!0}function vn(n,e){let t=n?By(n):void 0,r=e?By(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let i=0;i<t.length;i++)if(o=t[i],!Rw(n[o],e[o]))return!1;return!0}function By(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Rw(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((o,i)=>r[i]===o)}else return n===e}function kw(n){return n.length>0?n[n.length-1]:null}function Xn(n){return zp(n)?n:gs(n)?J(Promise.resolve(n)):N(n)}var eO={exact:Ow,subset:Pw},Nw={exact:tO,subset:nO,ignored:()=>!0};function _w(n,e,t){return eO[t.paths](n.root,e.root,t.matrixParams)&&Nw[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function tO(n,e){return vn(n,e)}function Ow(n,e,t){if(!$o(n.segments,e.segments)||!Rh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Ow(n.children[r],e.children[r],t))return!1;return!0}function nO(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Rw(n[t],e[t]))}function Pw(n,e,t){return xw(n,e,e.segments,t)}function xw(n,e,t,r){if(n.segments.length>t.length){let o=n.segments.slice(0,t.length);return!(!$o(o,t)||e.hasChildren()||!Rh(o,t,r))}else if(n.segments.length===t.length){if(!$o(n.segments,t)||!Rh(n.segments,t,r))return!1;for(let o in e.children)if(!n.children[o]||!Pw(n.children[o],e.children[o],r))return!1;return!0}else{let o=t.slice(0,n.segments.length),i=t.slice(n.segments.length);return!$o(n.segments,o)||!Rh(n.segments,o,r)||!n.children[z]?!1:xw(n.children[z],e,i,r)}}function Rh(n,e,t){return e.every((r,o)=>Nw[t](n[o].parameters,r.parameters))}var En=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ne([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=qo(this.queryParams),this._queryParamMap}toString(){return iO.serialize(this)}},ne=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kh(this)}},Hr=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=qo(this.parameters),this._parameterMap}toString(){return Fw(this)}};function rO(n,e){return $o(n,e)&&n.every((t,r)=>vn(t.parameters,e[r].parameters))}function $o(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function oO(n,e){let t=[];return Object.entries(n.children).forEach(([r,o])=>{r===z&&(t=t.concat(e(o,r)))}),Object.entries(n.children).forEach(([r,o])=>{r!==z&&(t=t.concat(e(o,r)))}),t}var nl=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>new Ko,providedIn:"root"})}return n})(),Ko=class{parse(e){let t=new zy(e);return new En(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${jc(e.root,!0)}`,r=cO(e.queryParams),o=typeof e.fragment=="string"?`#${sO(e.fragment)}`:"";return`${t}${r}${o}`}},iO=new Ko;function kh(n){return n.segments.map(e=>Fw(e)).join("/")}function jc(n,e){if(!n.hasChildren())return kh(n);if(e){let t=n.children[z]?jc(n.children[z],!1):"",r=[];return Object.entries(n.children).forEach(([o,i])=>{o!==z&&r.push(`${o}:${jc(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=oO(n,(r,o)=>o===z?[jc(n.children[z],!1)]:[`${o}:${jc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[z]!=null?`${kh(n)}/${t[0]}`:`${kh(n)}/(${t.join("//")})`}}function Lw(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Dh(n){return Lw(n).replace(/%3B/gi,";")}function sO(n){return encodeURI(n)}function jy(n){return Lw(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Nh(n){return decodeURIComponent(n)}function Tw(n){return Nh(n.replace(/\+/g,"%20"))}function Fw(n){return`${jy(n.path)}${aO(n.parameters)}`}function aO(n){return Object.entries(n).map(([e,t])=>`;${jy(e)}=${jy(t)}`).join("")}function cO(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(o=>`${Dh(t)}=${Dh(o)}`).join("&"):`${Dh(t)}=${Dh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var lO=/^[^\/()?;#]+/;function xy(n){let e=n.match(lO);return e?e[0]:""}var uO=/^[^\/()?;=#]+/;function dO(n){let e=n.match(uO);return e?e[0]:""}var hO=/^[^=?&#]+/;function fO(n){let e=n.match(hO);return e?e[0]:""}var pO=/^[^&#]+/;function gO(n){let e=n.match(pO);return e?e[0]:""}var zy=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ne([],{}):new ne([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[z]=new ne(e,t)),r}parseSegment(){let e=xy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new A(4009,!1);return this.capture(e),new Hr(Nh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=dO(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=xy(this.remaining);o&&(r=o,this.capture(r))}e[Nh(t)]=Nh(r)}parseQueryParam(e){let t=fO(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=gO(this.remaining);s&&(r=s,this.capture(r))}let o=Tw(t),i=Tw(r);if(e.hasOwnProperty(o)){let s=e[o];Array.isArray(s)||(s=[s],e[o]=s),s.push(i)}else e[o]=i}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=xy(this.remaining),o=this.remaining[r.length];if(o!=="/"&&o!==")"&&o!==";")throw new A(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=z);let s=this.parseChildren();t[i]=Object.keys(s).length===1?s[z]:new ne([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new A(4011,!1)}};function Uw(n){return n.segments.length>0?new ne([],{[z]:n}):n}function Hw(n){let e={};for(let[r,o]of Object.entries(n.children)){let i=Hw(o);if(r===z&&i.segments.length===0&&i.hasChildren())for(let[s,a]of Object.entries(i.children))e[s]=a;else(i.segments.length>0||i.hasChildren())&&(e[r]=i)}let t=new ne(n.segments,e);return mO(t)}function mO(n){if(n.numberOfChildren===1&&n.children[z]){let e=n.children[z];return new ne(n.segments.concat(e.segments),e.children)}return n}function Ts(n){return n instanceof En}function Bw(n,e,t=null,r=null){let o=jw(n);return zw(o,e,t,r)}function jw(n){let e;function t(i){let s={};for(let c of i.children){let l=t(c);s[c.outlet]=l}let a=new ne(i.url,s);return i===n&&(e=a),a}let r=t(n.root),o=Uw(r);return e??o}function zw(n,e,t,r){let o=n;for(;o.parent;)o=o.parent;if(e.length===0)return Ly(o,o,o,t,r);let i=yO(e);if(i.toRoot())return Ly(o,o,new ne([],{}),t,r);let s=vO(i,o,n),a=s.processChildren?Vc(s.segmentGroup,s.index,i.commands):$w(s.segmentGroup,s.index,i.commands);return Ly(o,s.segmentGroup,a,t,r)}function Oh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function qc(n){return typeof n=="object"&&n!=null&&n.outlets}function Ly(n,e,t,r,o){let i={};r&&Object.entries(r).forEach(([c,l])=>{i[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;n===e?s=t:s=Vw(n,e,t);let a=Uw(Hw(s));return new En(a,i,o)}function Vw(n,e,t){let r={};return Object.entries(n.children).forEach(([o,i])=>{i===e?r[o]=t:r[o]=Vw(i,e,t)}),new ne(n.segments,r)}var Ph=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Oh(r[0]))throw new A(4003,!1);let o=r.find(qc);if(o&&o!==kw(r))throw new A(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function yO(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Ph(!0,0,n);let e=0,t=!1,r=n.reduce((o,i,s)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return typeof i!="string"?[...o,i]:s===0?(i.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&o.push(a))}),o):[...o,i]},[]);return new Ph(t,e,r)}var Is=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function vO(n,e,t){if(n.isAbsolute)return new Is(e,!0,0);if(!t)return new Is(e,!1,NaN);if(t.parent===null)return new Is(t,!0,0);let r=Oh(n.commands[0])?0:1,o=t.segments.length-1+r;return CO(t,o,n.numberOfDoubleDots)}function CO(n,e,t){let r=n,o=e,i=t;for(;i>o;){if(i-=o,r=r.parent,!r)throw new A(4005,!1);o=r.segments.length}return new Is(r,!1,o-i)}function EO(n){return qc(n[0])?n[0].outlets:{[z]:n}}function $w(n,e,t){if(n??=new ne([],{}),n.segments.length===0&&n.hasChildren())return Vc(n,e,t);let r=IO(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let i=new ne(n.segments.slice(0,r.pathIndex),{});return i.children[z]=new ne(n.segments.slice(r.pathIndex),n.children),Vc(i,0,o)}else return r.match&&o.length===0?new ne(n.segments,{}):r.match&&!n.hasChildren()?Vy(n,e,t):r.match?Vc(n,0,o):Vy(n,e,t)}function Vc(n,e,t){if(t.length===0)return new ne(n.segments,{});{let r=EO(t),o={};if(Object.keys(r).some(i=>i!==z)&&n.children[z]&&n.numberOfChildren===1&&n.children[z].segments.length===0){let i=Vc(n.children[z],e,t);return new ne(n.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(o[i]=$w(n.children[i],e,s))}),Object.entries(n.children).forEach(([i,s])=>{r[i]===void 0&&(o[i]=s)}),new ne(n.segments,o)}}function IO(n,e,t){let r=0,o=e,i={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return i;let s=n.segments[o],a=t[r];if(qc(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(o>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Sw(c,l,s))return i;r+=2}else{if(!Sw(c,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}function Vy(n,e,t){let r=n.segments.slice(0,e),o=0;for(;o<t.length;){let i=t[o];if(qc(i)){let c=_O(i.outlets);return new ne(r,c)}if(o===0&&Oh(t[0])){let c=n.segments[e];r.push(new Hr(c.path,ww(t[0]))),o++;continue}let s=qc(i)?i.outlets[z]:`${i}`,a=o<t.length-1?t[o+1]:null;s&&a&&Oh(a)?(r.push(new Hr(s,ww(a))),o+=2):(r.push(new Hr(s,{})),o++)}return new ne(r,{})}function _O(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Vy(new ne([],{}),0,r))}),e}function ww(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Sw(n,e,t){return n==t.path&&vn(e,t.parameters)}var $c="imperative",Ve=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ve||{}),Nt=class{id;url;constructor(e,t){this.id=e,this.url=t}},Wo=class extends Nt{type=Ve.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Zn=class extends Nt{urlAfterRedirects;type=Ve.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},at=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n}(at||{}),Kc=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Kc||{}),Cn=class extends Nt{reason;code;type=Ve.NavigationCancel;constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Jn=class extends Nt{reason;code;type=Ve.NavigationSkipped;constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o}},ws=class extends Nt{error;target;type=Ve.NavigationError;constructor(e,t,r,o){super(e,t),this.error=r,this.target=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Wc=class extends Nt{urlAfterRedirects;state;type=Ve.RoutesRecognized;constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xh=class extends Nt{urlAfterRedirects;state;type=Ve.GuardsCheckStart;constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lh=class extends Nt{urlAfterRedirects;state;shouldActivate;type=Ve.GuardsCheckEnd;constructor(e,t,r,o,i){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Fh=class extends Nt{urlAfterRedirects;state;type=Ve.ResolveStart;constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Uh=class extends Nt{urlAfterRedirects;state;type=Ve.ResolveEnd;constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hh=class{route;type=Ve.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Bh=class{route;type=Ve.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},jh=class{snapshot;type=Ve.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zh=class{snapshot;type=Ve.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vh=class{snapshot;type=Ve.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$h=class{snapshot;type=Ve.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Yc=class{},Ss=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function TO(n){return!(n instanceof Yc)&&!(n instanceof Ss)}function wO(n,e){return n.providers&&!n._injector&&(n._injector=Cc(n.providers,e,`Route: ${n.path}`)),n._injector??e}function nn(n){return n.outlet||z}function SO(n,e){let t=n.filter(r=>nn(r)===e);return t.push(...n.filter(r=>nn(r)!==e)),t}function rl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Gh=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return rl(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Ds(this.rootInjector)}},Ds=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Gh(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(R(xe))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qh=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=$y(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=$y(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Gy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Gy(e,this._root).map(t=>t.value)}};function $y(n,e){if(n===e.value)return e;for(let t of e.children){let r=$y(n,t);if(r)return r}return null}function Gy(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Gy(n,t);if(r.length)return r.unshift(e),r}return[]}var kt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Es(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Qc=class extends qh{snapshot;constructor(e,t){super(e),this.snapshot=t,Xy(this,e)}toString(){return this.snapshot.toString()}};function Gw(n){let e=bO(n),t=new Se([new Hr("",{})]),r=new Se({}),o=new Se({}),i=new Se({}),s=new Se(""),a=new Br(t,r,i,s,o,z,n,e.root);return a.snapshot=e.root,new Qc(new kt(a,[]),e)}function bO(n){let e={},t={},r={},o="",i=new Go([],e,r,o,t,z,n,null,{});return new Zc("",new kt(i,[]))}var Br=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,o,i,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(B(l=>l[tl]))??N(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(B(e=>qo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(B(e=>qo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Kh(n,e,t="emptyOnly"){let r,{routeConfig:o}=n;return e!==null&&(t==="always"||o?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:m(m({},e.params),n.params),data:m(m({},e.data),n.data),resolve:m(m(m(m({},n.data),e.data),o?.data),n._resolvedData)}:r={params:m({},n.params),data:m({},n.data),resolve:m(m({},n.data),n._resolvedData??{})},o&&Kw(o)&&(r.resolve[tl]=o.title),r}var Go=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[tl]}constructor(e,t,r,o,i,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=qo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=qo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Zc=class extends qh{url;constructor(e,t){super(t),this.url=e,Xy(this,t)}toString(){return qw(this._root)}};function Xy(n,e){e.value._routerState=n,e.children.forEach(t=>Xy(n,t))}function qw(n){let e=n.children.length>0?` { ${n.children.map(qw).join(", ")} } `:"";return`${n.value}${e}`}function Fy(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,vn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),vn(e.params,t.params)||n.paramsSubject.next(t.params),XN(e.url,t.url)||n.urlSubject.next(t.url),vn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function qy(n,e){let t=vn(n.params,e.params)&&rO(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||qy(n.parent,e.parent))}function Kw(n){return typeof n.title=="string"||n.title===null}var Ww=new M(""),ol=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=z;activateEvents=new Le;deactivateEvents=new Le;attachEvents=new Le;detachEvents=new Le;routerOutletData=ST(void 0);parentContexts=I(Ds);location=I(Uo);changeDetector=I(hy);inputBinder=I(Zh,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new A(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new A(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new A(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new A(4013,!1);this._activatedRoute=t;let o=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Ky(t,a,o.injector,this.routerOutletData);this.activated=o.createComponent(s,{index:o.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Lr({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Fo]})}return n})(),Ky=class{route;childContexts;parent;outletData;constructor(e,t,r,o){this.route=e,this.childContexts=t,this.parent=r,this.outletData=o}get(e,t){return e===Br?this.route:e===Ds?this.childContexts:e===Ww?this.outletData:this.parent.get(e,t)}},Zh=new M("");var ev=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=mt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,o){r&1&&st(0,"router-outlet")},dependencies:[ol],encapsulation:2})}return n})();function tv(n){let e=n.children&&n.children.map(tv),t=e?w(m({},n),{children:e}):m({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==z&&(t.component=ev),t}function AO(n,e,t){let r=Jc(n,e._root,t?t._root:void 0);return new Qc(r,e)}function Jc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let o=DO(n,e,t);return new kt(r,o)}else{if(n.shouldAttach(e.value)){let i=n.retrieve(e.value);if(i!==null){let s=i.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Jc(n,a)),s}}let r=MO(e.value),o=e.children.map(i=>Jc(n,i));return new kt(r,o)}}function DO(n,e,t){return e.children.map(r=>{for(let o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Jc(n,r,o);return Jc(n,r)})}function MO(n){return new Br(new Se(n.url),new Se(n.params),new Se(n.queryParams),new Se(n.fragment),new Se(n.data),n.outlet,n.component,n)}var bs=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Yw="ngNavigationCancelingError";function Wh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ts(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=Qw(!1,at.Redirect);return o.url=t,o.navigationBehaviorOptions=r,o}function Qw(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Yw]=!0,t.cancellationCode=e,t}function RO(n){return Zw(n)&&Ts(n.url)}function Zw(n){return!!n&&n[Yw]}var kO=(n,e,t,r)=>B(o=>(new Wy(e,o.targetRouterState,o.currentRouterState,t,r).activate(n),o)),Wy=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,o,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Fy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let o=Es(t);e.children.forEach(i=>{let s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,t,r){let o=e.value,i=t?t.value:null;if(o===i)if(o.component){let s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else i&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,i=Es(e);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,i=Es(e);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let o=Es(t);e.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new $h(i.value.snapshot))}),e.children.length&&this.forwardEvent(new zh(e.value.snapshot))}activateRoutes(e,t,r){let o=e.value,i=t?t.value:null;if(Fy(o),o===i)if(o.component){let s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(o.component){let s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Fy(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=o,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Yh=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},_s=class{component;route;constructor(e,t){this.component=e,this.route=t}};function NO(n,e,t){let r=n._root,o=e?e._root:null;return zc(r,o,t,[r.value])}function OO(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ms(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!ag(n)?n:e.get(n):r}function zc(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=Es(e);return n.children.forEach(s=>{PO(s,i[s.value.outlet],t,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>Gc(a,t.getContext(s),o)),o}function PO(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){let c=xO(s,i,i.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new Yh(r)):(i.data=s.data,i._resolvedData=s._resolvedData),i.component?zc(n,e,a?a.children:null,r,o):zc(n,e,t,r,o),c&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new _s(a.outlet.component,s))}else s&&Gc(e,a,o),o.canActivateChecks.push(new Yh(r)),i.component?zc(n,null,a?a.children:null,r,o):zc(n,null,t,r,o);return o}function xO(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!$o(n.url,e.url);case"pathParamsOrQueryParamsChange":return!$o(n.url,e.url)||!vn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qy(n,e)||!vn(n.queryParams,e.queryParams);case"paramsChange":default:return!qy(n,e)}}function Gc(n,e,t){let r=Es(n),o=n.value;Object.entries(r).forEach(([i,s])=>{o.component?e?Gc(s,e.children.getContext(i),t):Gc(s,null,t):Gc(s,e,t)}),o.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new _s(e.outlet.component,o)):t.canDeactivateChecks.push(new _s(null,o)):t.canDeactivateChecks.push(new _s(null,o))}function il(n){return typeof n=="function"}function LO(n){return typeof n=="boolean"}function FO(n){return n&&il(n.canLoad)}function UO(n){return n&&il(n.canActivate)}function HO(n){return n&&il(n.canActivateChild)}function BO(n){return n&&il(n.canDeactivate)}function jO(n){return n&&il(n.canMatch)}function Jw(n){return n instanceof Fn||n?.name==="EmptyError"}var Mh=Symbol("INITIAL_VALUE");function As(){return qe(n=>za(n.map(e=>e.pipe(St(1),Gp(Mh)))).pipe(B(e=>{for(let t of e)if(t!==!0){if(t===Mh)return Mh;if(t===!1||zO(t))return t}return!0}),tt(e=>e!==Mh),St(1)))}function zO(n){return Ts(n)||n instanceof bs}function VO(n,e){return Pe(t=>{let{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=t;return s.length===0&&i.length===0?N(w(m({},t),{guardsResult:!0})):$O(s,r,o,n).pipe(Pe(a=>a&&LO(a)?GO(r,i,n,e):N(a)),B(a=>w(m({},t),{guardsResult:a})))})}function $O(n,e,t,r){return J(n).pipe(Pe(o=>QO(o.component,o.route,t,e,r)),Un(o=>o!==!0,!0))}function GO(n,e,t,r){return J(e).pipe(Wt(o=>Ji(KO(o.route.parent,r),qO(o.route,r),YO(n,o.path,t),WO(n,o.route,t))),Un(o=>o!==!0,!0))}function qO(n,e){return n!==null&&e&&e(new Vh(n)),N(!0)}function KO(n,e){return n!==null&&e&&e(new jh(n)),N(!0)}function WO(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return N(!0);let o=r.map(i=>Va(()=>{let s=rl(e)??t,a=Ms(i,s),c=UO(a)?a.canActivate(e,n):rt(s,()=>a(e,n));return Xn(c).pipe(Un())}));return N(o).pipe(As())}function YO(n,e,t){let r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>OO(s)).filter(s=>s!==null).map(s=>Va(()=>{let a=s.guards.map(c=>{let l=rl(s.node)??t,u=Ms(c,l),h=HO(u)?u.canActivateChild(r,n):rt(l,()=>u(r,n));return Xn(h).pipe(Un())});return N(a).pipe(As())}));return N(i).pipe(As())}function QO(n,e,t,r,o){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return N(!0);let s=i.map(a=>{let c=rl(e)??o,l=Ms(a,c),u=BO(l)?l.canDeactivate(n,e,t,r):rt(c,()=>l(n,e,t,r));return Xn(u).pipe(Un())});return N(s).pipe(As())}function ZO(n,e,t,r){let o=e.canLoad;if(o===void 0||o.length===0)return N(!0);let i=o.map(s=>{let a=Ms(s,n),c=FO(a)?a.canLoad(e,t):rt(n,()=>a(e,t));return Xn(c)});return N(i).pipe(As(),Xw(r))}function Xw(n){return Fp(je(e=>{if(typeof e!="boolean")throw Wh(n,e)}),B(e=>e===!0))}function JO(n,e,t,r){let o=e.canMatch;if(!o||o.length===0)return N(!0);let i=o.map(s=>{let a=Ms(s,n),c=jO(a)?a.canMatch(e,t):rt(n,()=>a(e,t));return Xn(c)});return N(i).pipe(As(),Xw(r))}var Xc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},el=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Cs(n){return Zi(new Xc(n))}function XO(n){return Zi(new A(4e3,!1))}function eP(n){return Zi(Qw(!1,at.GuardRejected))}var Yy=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),o.numberOfChildren===0)return N(r);if(o.numberOfChildren>1||!o.children[z])return XO(`${e.redirectTo}`);o=o.children[z]}}applyRedirectCommands(e,t,r,o,i){return tP(t,o,i).pipe(B(s=>{if(s instanceof En)throw new el(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new el(a);return a}))}applyRedirectCreateUrlTree(e,t,r,o){let i=this.createSegmentGroup(e,t.root,r,o);return new En(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([o,i])=>{if(typeof i=="string"&&i[0]===":"){let a=i.substring(1);r[o]=t[a]}else r[o]=i}),r}createSegmentGroup(e,t,r,o){let i=this.createSegments(e,t.segments,r,o),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,o)}),new ne(i,s)}createSegments(e,t,r,o){return t.map(i=>i.path[0]===":"?this.findPosParam(e,i,o):this.findOrReturn(i,r))}findPosParam(e,t,r){let o=r[t.path.substring(1)];if(!o)throw new A(4001,!1);return o}findOrReturn(e,t){let r=0;for(let o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}};function tP(n,e,t){if(typeof n=="string")return N(n);let r=n,{queryParams:o,fragment:i,routeConfig:s,url:a,outlet:c,params:l,data:u,title:h}=e;return Xn(rt(t,()=>r({params:l,data:u,queryParams:o,fragment:i,routeConfig:s,url:a,outlet:c,title:h})))}var Qy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function nP(n,e,t,r,o){let i=eS(n,e,t);return i.matched?(r=wO(e,r),JO(r,e,t,o).pipe(B(s=>s===!0?i:m({},Qy)))):N(i)}function eS(n,e,t){if(e.path==="**")return rP(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?m({},Qy):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let o=(e.matcher||Mw)(t,n,e);if(!o)return m({},Qy);let i={};Object.entries(o.posParams??{}).forEach(([a,c])=>{i[a]=c.path});let s=o.consumed.length>0?m(m({},i),o.consumed[o.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function rP(n){return{matched:!0,parameters:n.length>0?kw(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function bw(n,e,t,r){return t.length>0&&sP(n,t,r)?{segmentGroup:new ne(e,iP(r,new ne(t,n.children))),slicedSegments:[]}:t.length===0&&aP(n,t,r)?{segmentGroup:new ne(n.segments,oP(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ne(n.segments,n.children),slicedSegments:t}}function oP(n,e,t,r){let o={};for(let i of t)if(Jh(n,e,i)&&!r[nn(i)]){let s=new ne([],{});o[nn(i)]=s}return m(m({},r),o)}function iP(n,e){let t={};t[z]=e;for(let r of n)if(r.path===""&&nn(r)!==z){let o=new ne([],{});t[nn(r)]=o}return t}function sP(n,e,t){return t.some(r=>Jh(n,e,r)&&nn(r)!==z)}function aP(n,e,t){return t.some(r=>Jh(n,e,r))}function Jh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function cP(n,e,t){return e.length===0&&!n.children[t]}var Zy=class{};function lP(n,e,t,r,o,i,s="emptyOnly"){return new Jy(n,e,t,r,o,s,i).recognize()}var uP=31,Jy=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,o,i,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Yy(this.urlSerializer,this.urlTree)}noMatchError(e){return new A(4002,`'${e.segmentGroup}'`)}recognize(){let e=bw(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(B(({children:t,rootSnapshot:r})=>{let o=new kt(r,t),i=new Zc("",o),s=Bw(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),{state:i,tree:s}}))}match(e){let t=new Go([],Object.freeze({}),Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),z,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,z,t).pipe(B(r=>({children:r,rootSnapshot:t})),hn(r=>{if(r instanceof el)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Xc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,o,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,i):this.processSegment(e,t,r,r.segments,o,!0,i).pipe(B(s=>s instanceof kt?[s]:[]))}processChildren(e,t,r,o){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return J(i).pipe(Wt(s=>{let a=r.children[s],c=SO(t,s);return this.processSegmentGroup(e,c,a,s,o)}),$p((s,a)=>(s.push(...a),s)),Tr(null),Vp(),Pe(s=>{if(s===null)return Cs(r);let a=tS(s);return dP(a),N(a)}))}processSegment(e,t,r,o,i,s,a){return J(t).pipe(Wt(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,o,i,s,a).pipe(hn(l=>{if(l instanceof Xc)return N(null);throw l}))),Un(c=>!!c),hn(c=>{if(Jw(c))return cP(r,o,i)?N(new Zy):Cs(r);throw c}))}processSegmentAgainstRoute(e,t,r,o,i,s,a,c){return nn(r)!==s&&(s===z||!Jh(o,i,r))?Cs(o):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,o,r,i,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,o,t,r,i,s,c):Cs(o)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,i,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:h,remainingSegments:g}=eS(t,o,i);if(!c)return Cs(t);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>uP&&(this.allowRedirects=!1));let p=new Go(i,l,Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,Aw(o),nn(o),o.component??o._loadedComponent??null,o,Dw(o)),E=Kh(p,a,this.paramsInheritanceStrategy);return p.params=Object.freeze(E.params),p.data=Object.freeze(E.data),this.applyRedirects.applyRedirectCommands(u,o.redirectTo,h,p,e).pipe(qe(b=>this.applyRedirects.lineralizeSegments(o,b)),Pe(b=>this.processSegment(e,r,t,b.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,o,i,s){let a=nP(t,r,o,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(qe(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,o).pipe(qe(({routes:l})=>{let u=r._loadedInjector??e,{parameters:h,consumedSegments:g,remainingSegments:p}=c,E=new Go(g,h,Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,Aw(r),nn(r),r.component??r._loadedComponent??null,r,Dw(r)),_=Kh(E,s,this.paramsInheritanceStrategy);E.params=Object.freeze(_.params),E.data=Object.freeze(_.data);let{segmentGroup:b,slicedSegments:O}=bw(t,g,p,l);if(O.length===0&&b.hasChildren())return this.processChildren(u,l,b,E).pipe(B(se=>new kt(E,se)));if(l.length===0&&O.length===0)return N(new kt(E,[]));let Lt=nn(r)===i;return this.processSegment(u,l,b,O,Lt?z:i,!0,E).pipe(B(se=>new kt(E,se instanceof kt?[se]:[])))}))):Cs(t)))}getChildConfig(e,t,r){return t.children?N({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?N({routes:t._loadedRoutes,injector:t._loadedInjector}):ZO(e,t,r,this.urlSerializer).pipe(Pe(o=>o?this.configLoader.loadChildren(e,t).pipe(je(i=>{t._loadedRoutes=i.routes,t._loadedInjector=i.injector})):eP(t))):N({routes:[],injector:e})}};function dP(n){n.sort((e,t)=>e.value.outlet===z?-1:t.value.outlet===z?1:e.value.outlet.localeCompare(t.value.outlet))}function hP(n){let e=n.value.routeConfig;return e&&e.path===""}function tS(n){let e=[],t=new Set;for(let r of n){if(!hP(r)){e.push(r);continue}let o=e.find(i=>r.value.routeConfig===i.value.routeConfig);o!==void 0?(o.children.push(...r.children),t.add(o)):e.push(r)}for(let r of t){let o=tS(r.children);e.push(new kt(r.value,o))}return e.filter(r=>!t.has(r))}function Aw(n){return n.data||{}}function Dw(n){return n.resolve||{}}function fP(n,e,t,r,o,i){return Pe(s=>lP(n,e,t,r,s.extractedUrl,o,i).pipe(B(({state:a,tree:c})=>w(m({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function pP(n,e){return Pe(t=>{let{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return N(t);let i=new Set(o.map(c=>c.route)),s=new Set;for(let c of i)if(!s.has(c))for(let l of nS(c))s.add(l);let a=0;return J(s).pipe(Wt(c=>i.has(c)?gP(c,r,n,e):(c.data=Kh(c,c.parent,n).resolve,N(void 0))),je(()=>a++),Xi(1),Pe(c=>a===s.size?N(t):et))})}function nS(n){let e=n.children.map(t=>nS(t)).flat();return[n,...e]}function gP(n,e,t,r){let o=n.routeConfig,i=n._resolve;return o?.title!==void 0&&!Kw(o)&&(i[tl]=o.title),Va(()=>(n.data=Kh(n,n.parent,t).resolve,mP(i,n,e,r).pipe(B(s=>(n._resolvedData=s,n.data=m(m({},n.data),s),null)))))}function mP(n,e,t,r){let o=By(n);if(o.length===0)return N({});let i={};return J(o).pipe(Pe(s=>yP(n[s],e,t,r).pipe(Un(),je(a=>{if(a instanceof bs)throw Wh(new Ko,a);i[s]=a}))),Xi(1),B(()=>i),hn(s=>Jw(s)?et:Zi(s)))}function yP(n,e,t,r){let o=rl(e)??r,i=Ms(n,o),s=i.resolve?i.resolve(e,t):rt(o,()=>i(e,t));return Xn(s)}function Uy(n){return qe(e=>{let t=n(e);return t?J(t).pipe(B(()=>e)):N(e)})}var nv=(()=>{class n{buildTitle(t){let r,o=t.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===z);return r}getResolvedTitleForRoute(t){return t.data[tl]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>I(rS),providedIn:"root"})}return n})(),rS=(()=>{class n extends nv{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(R(Iw))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sl=new M("",{providedIn:"root",factory:()=>({})}),al=new M(""),oS=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=I(sy);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return N(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Xn(t.loadComponent()).pipe(B(sS),je(i=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=i}),wr(()=>{this.componentLoaders.delete(t)})),o=new Qi(r,()=>new Ce).pipe(Yi());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return N({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=iS(r,this.compiler,t,this.onLoadEndListener).pipe(wr(()=>{this.childrenLoaders.delete(r)})),s=new Qi(i,()=>new Ce).pipe(Yi());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function iS(n,e,t,r){return Xn(n.loadChildren()).pipe(B(sS),Pe(o=>o instanceof Jd||Array.isArray(o)?N(o):J(e.compileModuleAsync(o))),B(o=>{r&&r(n);let i,s,a=!1;return Array.isArray(o)?(s=o,a=!0):(i=o.create(t).injector,s=i.get(al,[],{optional:!0,self:!0}).flat()),{routes:s.map(tv),injector:i}}))}function vP(n){return n&&typeof n=="object"&&"default"in n}function sS(n){return vP(n)?n.default:n}var Xh=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>I(CP),providedIn:"root"})}return n})(),CP=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),aS=new M("");var cS=new M(""),lS=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Ce;transitionAbortWithErrorSubject=new Ce;configLoader=I(oS);environmentInjector=I(xe);destroyRef=I(Ro);urlSerializer=I(nl);rootContexts=I(Ds);location=I(Kn);inputBindingEnabled=I(Zh,{optional:!0})!==null;titleStrategy=I(nv);options=I(sl,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=I(Xh);createViewTransition=I(aS,{optional:!0});navigationErrorHandler=I(cS,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>N(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=o=>this.events.next(new Hh(o)),r=o=>this.events.next(new Bh(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(w(m({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(t){return this.transitions=new Se(null),this.transitions.pipe(tt(r=>r!==null),qe(r=>{let o=!1;return N(r).pipe(qe(i=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",at.SupersededByNewNavigation),et;this.currentTransition=r,this.currentNavigation={id:i.id,initialUrl:i.rawUrl,extractedUrl:i.extractedUrl,targetBrowserUrl:typeof i.extras.browserUrl=="string"?this.urlSerializer.parse(i.extras.browserUrl):i.extras.browserUrl,trigger:i.source,extras:i.extras,previousNavigation:this.lastSuccessfulNavigation?w(m({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>i.abortController.abort()};let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=i.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload"){let c="";return this.events.next(new Jn(i.id,this.urlSerializer.serialize(i.rawUrl),c,Kc.IgnoredSameUrlNavigation)),i.resolve(!1),et}if(this.urlHandlingStrategy.shouldProcessUrl(i.rawUrl))return N(i).pipe(qe(c=>(this.events.next(new Wo(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?et:Promise.resolve(c))),fP(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),je(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=w(m({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let l=new Wc(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(i.currentRawUrl)){let{id:c,extractedUrl:l,source:u,restoredState:h,extras:g}=i,p=new Wo(c,this.urlSerializer.serialize(l),u,h);this.events.next(p);let E=Gw(this.rootComponentType).snapshot;return this.currentTransition=r=w(m({},i),{targetSnapshot:E,urlAfterRedirects:l,extras:w(m({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,N(r)}else{let c="";return this.events.next(new Jn(i.id,this.urlSerializer.serialize(i.extractedUrl),c,Kc.IgnoredByUrlHandlingStrategy)),i.resolve(!1),et}}),je(i=>{let s=new xh(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects),i.targetSnapshot);this.events.next(s)}),B(i=>(this.currentTransition=r=w(m({},i),{guards:NO(i.targetSnapshot,i.currentSnapshot,this.rootContexts)}),r)),VO(this.environmentInjector,i=>this.events.next(i)),je(i=>{if(r.guardsResult=i.guardsResult,i.guardsResult&&typeof i.guardsResult!="boolean")throw Wh(this.urlSerializer,i.guardsResult);let s=new Lh(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects),i.targetSnapshot,!!i.guardsResult);this.events.next(s)}),tt(i=>i.guardsResult?!0:(this.cancelNavigationTransition(i,"",at.GuardRejected),!1)),Uy(i=>{if(i.guards.canActivateChecks.length!==0)return N(i).pipe(je(s=>{let a=new Fh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),qe(s=>{let a=!1;return N(s).pipe(pP(this.paramsInheritanceStrategy,this.environmentInjector),je({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",at.NoDataFromResolver)}}))}),je(s=>{let a=new Uh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),Uy(i=>{let s=a=>{let c=[];a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(a.routeConfig).pipe(je(l=>{a.component=l}),B(()=>{})));for(let l of a.children)c.push(...s(l));return c};return za(s(i.targetSnapshot.root)).pipe(Tr(null),St(1))}),Uy(()=>this.afterPreactivation()),qe(()=>{let{currentSnapshot:i,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,i.root,s.root);return a?J(a).pipe(B(()=>r)):N(r)}),B(i=>{let s=AO(t.routeReuseStrategy,i.targetSnapshot,i.currentRouterState);return this.currentTransition=r=w(m({},i),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),je(()=>{this.events.next(new Yc)}),kO(this.rootContexts,t.routeReuseStrategy,i=>this.events.next(i),this.inputBindingEnabled),St(1),$a(new W(i=>{let s=r.abortController.signal,a=()=>i.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(tt(()=>!o&&!r.targetRouterState),je(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",at.Aborted)}))),je({next:i=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Zn(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects))),this.titleStrategy?.updateTitle(i.targetRouterState.snapshot),i.resolve(!0)},complete:()=>{o=!0}}),$a(this.transitionAbortWithErrorSubject.pipe(je(i=>{throw i}))),wr(()=>{o||this.cancelNavigationTransition(r,"",at.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),hn(i=>{if(this.destroyed)return r.resolve(!1),et;if(o=!0,Zw(i))this.events.next(new Cn(r.id,this.urlSerializer.serialize(r.extractedUrl),i.message,i.cancellationCode)),RO(i)?this.events.next(new Ss(i.url,i.navigationBehaviorOptions)):r.resolve(!1);else{let s=new ws(r.id,this.urlSerializer.serialize(r.extractedUrl),i,r.targetSnapshot??void 0);try{let a=rt(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof bs){let{message:c,cancellationCode:l}=Wh(this.urlSerializer,a);this.events.next(new Cn(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new Ss(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),i}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return et}))}))}cancelNavigationTransition(t,r,o){let i=new Cn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(i),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function EP(n){return n!==$c}var uS=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>I(IP),providedIn:"root"})}return n})(),Qh=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},IP=(()=>{class n extends Qh{static \u0275fac=(()=>{let t;return function(o){return(t||(t=jd(n)))(o||n)}})();static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dS=(()=>{class n{urlSerializer=I(nl);options=I(sl,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=I(Kn);urlHandlingStrategy=I(Xh);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new En;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:o}){let i=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=o??i;return s instanceof En?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:o}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,o),this.routerState=t):this.rawUrlTree=o}routerState=Gw(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>I(_P),providedIn:"root"})}return n})(),_P=(()=>{class n extends dS{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Wo?this.updateStateMemento():t instanceof Jn?this.commitTransition(r):t instanceof Wc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Yc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Cn&&t.code!==at.SupersededByNewNavigation&&t.code!==at.Redirect?this.restoreHistory(r):t instanceof ws?this.restoreHistory(r,!0):t instanceof Zn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:o}){let{replaceUrl:i,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||i){let a=this.browserPageId,c=m(m({},s),this.generateNgRouterState(o,a));this.location.replaceState(t,"",c)}else{let a=m(m({},s),this.generateNgRouterState(o,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,i=this.currentPageId-o;i!==0?this.location.historyGo(i):this.getCurrentUrlTree()===t.finalUrl&&i===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(o){return(t||(t=jd(n)))(o||n)}})();static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function rv(n,e){n.events.pipe(tt(t=>t instanceof Zn||t instanceof Cn||t instanceof ws||t instanceof Jn),B(t=>t instanceof Zn||t instanceof Jn?0:(t instanceof Cn?t.code===at.Redirect||t.code===at.SupersededByNewNavigation:!1)?2:1),tt(t=>t!==2),St(1)).subscribe(()=>{e()})}var TP={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},wP={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Rs=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=I(Zm);stateManager=I(dS);options=I(sl,{optional:!0})||{};pendingTasks=I(zn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=I(lS);urlSerializer=I(nl);location=I(Kn);urlHandlingStrategy=I(Xh);injector=I(xe);_events=new Ce;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=I(uS);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=I(al,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!I(Zh,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new we;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,i=this.navigationTransitions.currentNavigation;if(o!==null&&i!==null){if(this.stateManager.handleRouterEvent(r,i),r instanceof Cn&&r.code!==at.Redirect&&r.code!==at.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Zn)this.navigated=!0;else if(r instanceof Ss){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),c=m({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||EP(o.source)},s);this.scheduleNavigation(a,$c,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}TO(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortWithErrorSubject.next(o)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),$c,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,o)=>{this.navigateToSyncWithBrowser(t,o,r)})}navigateToSyncWithBrowser(t,r,o){let i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){let c=m({},o);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(i.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,i).catch(c=>{this.injector.get(Dt)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(tv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=m(m({},this.currentUrlTree.queryParams),i);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}u!==null&&(u=this.removeEmptyProps(u));let h;try{let g=o?o.snapshot:this.routerState.snapshot.root;h=jw(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),h=this.currentUrlTree.root}return zw(h,t,u,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let o=Ts(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,$c,null,r)}navigate(t,r={skipLocationChange:!1}){return SP(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let o;if(r===!0?o=m({},TP):r===!1?o=m({},wP):o=r,Ts(t))return _w(this.currentUrlTree,t,o);let i=this.parseUrl(t);return _w(this.currentUrlTree,i,o)}removeEmptyProps(t){return Object.entries(t).reduce((r,[o,i])=>(i!=null&&(r[o]=i),r),{})}scheduleNavigation(t,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((h,g)=>{a=h,c=g});let u=this.pendingTasks.add();return rv(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:i,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function SP(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new A(4008,!1)}var AP=new M("");function ov(n,...e){return ns([{provide:al,multi:!0,useValue:n},[],{provide:Br,useFactory:DP,deps:[Rs]},{provide:Xd,multi:!0,useFactory:MP},e.map(t=>t.\u0275providers)])}function DP(n){return n.routerState.root}function MP(){let n=I(Ut);return e=>{let t=n.get(Ho);if(e!==t.components[0])return;let r=n.get(Rs),o=n.get(RP);n.get(kP)===1&&r.initialNavigation(),n.get(NP,null,{optional:!0})?.setUpPreloading(),n.get(AP,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var RP=new M("",{factory:()=>new Ce}),kP=new M("",{providedIn:"root",factory:()=>1});var NP=new M("");var Yf={};Tt(Yf,{blockAPICallsBeforeInitialize:()=>Kf,blockAcquireTokenInPopups:()=>nb,blockNonBrowserEnvironment:()=>qf,blockRedirectInIframe:()=>tb,blockReloadInHiddenIframes:()=>eb,clearHash:()=>du,createGuid:()=>xC,getCurrentUri:()=>dt,getHomepage:()=>PC,invoke:()=>ke,invokeAsync:()=>y,isInIframe:()=>hu,isInPopup:()=>XS,preconnect:()=>pu,preflightCheck:()=>fu,redirectPreflightCheck:()=>Wf,replaceHash:()=>OC});var v={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},ks={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},rn=[v.OPENID_SCOPE,v.PROFILE_SCOPE,v.OFFLINE_ACCESS_SCOPE],iv=[...rn,v.EMAIL_SCOPE],Ae={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},ef={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},on={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},Ns={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},he={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},tf={PLAIN:"plain",S256:"S256"},nf={CODE:"code",IDTOKEN_TOKEN:"id_token token",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},In={QUERY:"query",FRAGMENT:"fragment"},sv={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},cl={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},Os={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},Ie={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},P={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"};var ll="appmetadata",hS="client_info",jr="1",Ps={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},ct={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},Ue={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},G={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},er={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},rf={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},of={username:"username",password:"password"},ul={httpSuccess:200,httpBadRequest:400},Yo={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},sf={CONFIGURED_MATCHES_DETECTED:"1",CONFIGURED_NO_AUTO_DETECTION:"2",CONFIGURED_NOT_DETECTED:"3",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},_n={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},af={Jwt:"JWT",Jwk:"JWK",Pop:"pop"};var av=300;var Qo={};Tt(Qo,{postRequestFailed:()=>hl,unexpectedError:()=>dl});var dl="unexpected_error",hl="post_request_failed";var cf={[dl]:"Unexpected error in authentication.",[hl]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},fS={unexpectedError:{code:dl,desc:cf[dl]},postRequestFailed:{code:hl,desc:cf[hl]}},F=class n extends Error{constructor(e,t,r){let o=t?`${e}: ${t}`:e;super(o),Object.setPrototypeOf(this,n.prototype),this.errorCode=e||v.EMPTY_STRING,this.errorMessage=t||v.EMPTY_STRING,this.subError=r||v.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}};function fl(n,e){return new F(n,e?`${cf[n]} ${e}`:cf[n])}var Re={};Tt(Re,{authTimeNotFound:()=>tr,authorizationCodeMissingFromServerResponse:()=>di,bindingKeyNotRemoved:()=>hi,cannotAppendScopeSet:()=>ci,cannotRemoveEmptyScope:()=>ai,clientInfoDecodingError:()=>zr,clientInfoEmptyError:()=>Zo,deviceCodeExpired:()=>yl,deviceCodePollingCancelled:()=>ml,deviceCodeUnknownError:()=>vl,emptyInputScopeSet:()=>Gr,endSessionEndpointNotSupported:()=>fi,endpointResolutionError:()=>lt,hashNotDeserialized:()=>ti,invalidAssertion:()=>Il,invalidCacheEnvironment:()=>rr,invalidCacheRecord:()=>li,invalidClientCredential:()=>_l,invalidState:()=>sn,keyIdMissing:()=>pi,maxAgeTranspired:()=>oi,methodNotImplemented:()=>V,missingTenantIdError:()=>bl,multipleMatchingAccounts:()=>gl,multipleMatchingAppMetadata:()=>ii,multipleMatchingTokens:()=>pl,nestedAppAuthBridgeDisabled:()=>Al,networkError:()=>Xo,noAccountFound:()=>Cl,noAccountInSilentRequest:()=>nr,noCryptoObject:()=>qr,noNetworkConnectivity:()=>wl,nonceMismatch:()=>ri,nullOrEmptyToken:()=>Jo,openIdConfigError:()=>ei,requestCannotBeMade:()=>si,stateMismatch:()=>ni,stateNotFound:()=>$r,tokenClaimsCnfRequiredForSignedJwt:()=>ui,tokenParsingError:()=>Vr,tokenRefreshRequired:()=>or,unexpectedCredentialType:()=>El,userCanceled:()=>Sl,userTimeoutReached:()=>Tl});var zr="client_info_decoding_error",Zo="client_info_empty_error",Vr="token_parsing_error",Jo="null_or_empty_token",lt="endpoints_resolution_error",Xo="network_error",ei="openid_config_error",ti="hash_not_deserialized",sn="invalid_state",ni="state_mismatch",$r="state_not_found",ri="nonce_mismatch",tr="auth_time_not_found",oi="max_age_transpired",pl="multiple_matching_tokens",gl="multiple_matching_accounts",ii="multiple_matching_appMetadata",si="request_cannot_be_made",ai="cannot_remove_empty_scope",ci="cannot_append_scopeset",Gr="empty_input_scopeset",ml="device_code_polling_cancelled",yl="device_code_expired",vl="device_code_unknown_error",nr="no_account_in_silent_request",li="invalid_cache_record",rr="invalid_cache_environment",Cl="no_account_found",qr="no_crypto_object",El="unexpected_credential_type",Il="invalid_assertion",_l="invalid_client_credential",or="token_refresh_required",Tl="user_timeout_reached",ui="token_claims_cnf_required_for_signedjwt",di="authorization_code_missing_from_server_response",hi="binding_key_not_removed",fi="end_session_endpoint_not_supported",pi="key_id_missing",wl="no_network_connectivity",Sl="user_canceled",bl="missing_tenant_id_error",V="method_not_implemented",Al="nested_app_auth_bridge_disabled";var U={[zr]:"The client info could not be parsed/decoded correctly",[Zo]:"The client info was empty",[Vr]:"Token cannot be parsed",[Jo]:"The token is null or empty",[lt]:"Endpoints cannot be resolved",[Xo]:"Network request failed",[ei]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[ti]:"The hash parameters could not be deserialized",[sn]:"State was not the expected format",[ni]:"State mismatch error",[$r]:"State not found",[ri]:"Nonce mismatch error",[tr]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[oi]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[pl]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[gl]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[ii]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[si]:"Token request cannot be made without authorization code or refresh token.",[ai]:"Cannot remove null or empty scope from ScopeSet",[ci]:"Cannot append ScopeSet",[Gr]:"Empty input ScopeSet cannot be processed",[ml]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[yl]:"Device code is expired.",[vl]:"Device code stopped polling for unknown reasons.",[nr]:"Please pass an account object, silent flow is not supported without account information",[li]:"Cache record object was null or undefined.",[rr]:"Invalid environment when attempting to create cache entry",[Cl]:"No account found in cache for given key.",[qr]:"No crypto object detected.",[El]:"Unexpected credential type.",[Il]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[_l]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[or]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[Tl]:"User defined timeout for device code polling reached",[ui]:"Cannot generate a POP jwt if the token_claims are not populated",[di]:"Server response does not contain an authorization code to proceed",[hi]:"Could not remove the credential's binding key from storage.",[fi]:"The provided authority does not support logout",[pi]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[wl]:"No network connectivity. Check your internet connection.",[Sl]:"User cancelled the flow.",[bl]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[V]:"This method has not been implemented",[Al]:"The nested app auth bridge is disabled"},pS={clientInfoDecodingError:{code:zr,desc:U[zr]},clientInfoEmptyError:{code:Zo,desc:U[Zo]},tokenParsingError:{code:Vr,desc:U[Vr]},nullOrEmptyToken:{code:Jo,desc:U[Jo]},endpointResolutionError:{code:lt,desc:U[lt]},networkError:{code:Xo,desc:U[Xo]},unableToGetOpenidConfigError:{code:ei,desc:U[ei]},hashNotDeserialized:{code:ti,desc:U[ti]},invalidStateError:{code:sn,desc:U[sn]},stateMismatchError:{code:ni,desc:U[ni]},stateNotFoundError:{code:$r,desc:U[$r]},nonceMismatchError:{code:ri,desc:U[ri]},authTimeNotFoundError:{code:tr,desc:U[tr]},maxAgeTranspired:{code:oi,desc:U[oi]},multipleMatchingTokens:{code:pl,desc:U[pl]},multipleMatchingAccounts:{code:gl,desc:U[gl]},multipleMatchingAppMetadata:{code:ii,desc:U[ii]},tokenRequestCannotBeMade:{code:si,desc:U[si]},removeEmptyScopeError:{code:ai,desc:U[ai]},appendScopeSetError:{code:ci,desc:U[ci]},emptyInputScopeSetError:{code:Gr,desc:U[Gr]},DeviceCodePollingCancelled:{code:ml,desc:U[ml]},DeviceCodeExpired:{code:yl,desc:U[yl]},DeviceCodeUnknownError:{code:vl,desc:U[vl]},NoAccountInSilentRequest:{code:nr,desc:U[nr]},invalidCacheRecord:{code:li,desc:U[li]},invalidCacheEnvironment:{code:rr,desc:U[rr]},noAccountFound:{code:Cl,desc:U[Cl]},noCryptoObj:{code:qr,desc:U[qr]},unexpectedCredentialType:{code:El,desc:U[El]},invalidAssertion:{code:Il,desc:U[Il]},invalidClientCredential:{code:_l,desc:U[_l]},tokenRefreshRequired:{code:or,desc:U[or]},userTimeoutReached:{code:Tl,desc:U[Tl]},tokenClaimsRequired:{code:ui,desc:U[ui]},noAuthorizationCodeFromServer:{code:di,desc:U[di]},bindingKeyNotRemovedError:{code:hi,desc:U[hi]},logoutNotSupported:{code:fi,desc:U[fi]},keyIdMissing:{code:pi,desc:U[pi]},noNetworkConnectivity:{code:wl,desc:U[wl]},userCanceledError:{code:Sl,desc:U[Sl]},missingTenantIdError:{code:bl,desc:U[bl]},nestedAppAuthBridgeDisabled:{code:Al,desc:U[Al]}},Dl=class n extends F{constructor(e,t){super(e,t?`${U[e]}: ${t}`:U[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,n.prototype)}};function C(n,e){return new Dl(n,e)}var Kr={createNewGuid:()=>{throw C(V)},base64Decode:()=>{throw C(V)},base64Encode:()=>{throw C(V)},base64UrlEncode:()=>{throw C(V)},encodeKid:()=>{throw C(V)},getPublicKeyThumbprint(){return f(this,null,function*(){throw C(V)})},removeTokenBindingKey(){return f(this,null,function*(){throw C(V)})},clearKeystore(){return f(this,null,function*(){throw C(V)})},signJwt(){return f(this,null,function*(){throw C(V)})},hashString(){return f(this,null,function*(){throw C(V)})}};var re=function(n){return n[n.Error=0]="Error",n[n.Warning=1]="Warning",n[n.Info=2]="Info",n[n.Verbose=3]="Verbose",n[n.Trace=4]="Trace",n}(re||{}),vt=class n{constructor(e,t,r){this.level=re.Info;let o=()=>{},i=e||n.createDefaultLoggerOptions();this.localCallback=i.loggerCallback||o,this.piiLoggingEnabled=i.piiLoggingEnabled||!1,this.level=typeof i.logLevel=="number"?i.logLevel:re.Info,this.correlationId=i.correlationId||v.EMPTY_STRING,this.packageName=t||v.EMPTY_STRING,this.packageVersion=r||v.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:re.Info}}clone(e,t,r){return new n({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;let i=`${`[${new Date().toUTCString()}] : [${t.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${re[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,i,t.containsPii||!1)}executeCallback(e,t,r){this.localCallback&&this.localCallback(e,t,r)}error(e,t){this.logMessage(e,{logLevel:re.Error,containsPii:!1,correlationId:t||v.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:re.Error,containsPii:!0,correlationId:t||v.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:re.Warning,containsPii:!1,correlationId:t||v.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:re.Warning,containsPii:!0,correlationId:t||v.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:re.Info,containsPii:!1,correlationId:t||v.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:re.Info,containsPii:!0,correlationId:t||v.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:re.Verbose,containsPii:!1,correlationId:t||v.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:re.Verbose,containsPii:!0,correlationId:t||v.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:re.Trace,containsPii:!1,correlationId:t||v.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:re.Trace,containsPii:!0,correlationId:t||v.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};var lf="@azure/msal-common",xs="15.6.0";var Wr={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};var fe={};Tt(fe,{createAccessTokenEntity:()=>uv,createIdTokenEntity:()=>lv,createRefreshTokenEntity:()=>dv,generateAppMetadataKey:()=>KP,generateAuthorityMetadataExpiresAt:()=>df,generateCredentialKey:()=>kl,isAccessTokenEntity:()=>FP,isAppMetadataEntity:()=>WP,isAuthorityMetadataEntity:()=>YP,isAuthorityMetadataExpired:()=>hf,isCredentialEntity:()=>uf,isIdTokenEntity:()=>UP,isRefreshTokenEntity:()=>HP,isServerTelemetryEntity:()=>GP,isThrottlingEntity:()=>qP,updateAuthorityEndpointMetadata:()=>Us,updateCloudDiscoveryMetadata:()=>Nl});var Ls={};Tt(Ls,{checkMaxAge:()=>Ml,extractTokenClaims:()=>ir,getJWSPayload:()=>gS});function ir(n,e){let t=gS(n);try{let r=e(t);return JSON.parse(r)}catch{throw C(Vr)}}function gS(n){if(!n)throw C(Jo);let t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(n);if(!t||t.length<4)throw C(Vr);return t[2]}function Ml(n,e){if(e===0||Date.now()-3e5>n+e)throw C(oi)}var Ze={};Tt(Ze,{delay:()=>LP,isTokenExpired:()=>Fs,nowSeconds:()=>Ot,toDateFromSeconds:()=>Rl,toSecondsFromDate:()=>xP,wasClockTurnedBack:()=>cv});function Ot(){return Math.round(new Date().getTime()/1e3)}function xP(n){return n.getTime()/1e3}function Rl(n){return n?new Date(Number(n)*1e3):new Date}function Fs(n,e){let t=Number(n)||0;return Ot()+e>t}function cv(n){return Number(n)>Ot()}function LP(n,e){return new Promise(t=>setTimeout(()=>t(e),n))}function kl(n){return[BP(n),jP(n),zP(n),VP(n),$P(n)].join(Ie.CACHE_KEY_SEPARATOR).toLowerCase()}function lv(n,e,t,r,o){return{credentialType:P.ID_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t,realm:o}}function uv(n,e,t,r,o,i,s,a,c,l,u,h,g,p,E){let _={homeAccountId:n,credentialType:P.ACCESS_TOKEN,secret:t,cachedAt:Ot().toString(),expiresOn:s.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:r,realm:o,target:i,tokenType:u||G.BEARER};if(h&&(_.userAssertionHash=h),l&&(_.refreshOn=l.toString()),p&&(_.requestedClaims=p,_.requestedClaimsHash=E),_.tokenType?.toLowerCase()!==G.BEARER.toLowerCase())switch(_.credentialType=P.ACCESS_TOKEN_WITH_AUTH_SCHEME,_.tokenType){case G.POP:let b=ir(t,c);if(!b?.cnf?.kid)throw C(ui);_.keyId=b.cnf.kid;break;case G.SSH:_.keyId=g}return _}function dv(n,e,t,r,o,i,s){let a={credentialType:P.REFRESH_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t};return i&&(a.userAssertionHash=i),o&&(a.familyId=o),s&&(a.expiresOn=s.toString()),a}function uf(n){return n.hasOwnProperty("homeAccountId")&&n.hasOwnProperty("environment")&&n.hasOwnProperty("credentialType")&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("secret")}function FP(n){return n?uf(n)&&n.hasOwnProperty("realm")&&n.hasOwnProperty("target")&&(n.credentialType===P.ACCESS_TOKEN||n.credentialType===P.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function UP(n){return n?uf(n)&&n.hasOwnProperty("realm")&&n.credentialType===P.ID_TOKEN:!1}function HP(n){return n?uf(n)&&n.credentialType===P.REFRESH_TOKEN:!1}function BP(n){return[n.homeAccountId,n.environment].join(Ie.CACHE_KEY_SEPARATOR).toLowerCase()}function jP(n){let e=n.credentialType===P.REFRESH_TOKEN&&n.familyId||n.clientId;return[n.credentialType,e,n.realm||""].join(Ie.CACHE_KEY_SEPARATOR).toLowerCase()}function zP(n){return(n.target||"").toLowerCase()}function VP(n){return(n.requestedClaimsHash||"").toLowerCase()}function $P(n){return n.tokenType&&n.tokenType.toLowerCase()!==G.BEARER.toLowerCase()?n.tokenType.toLowerCase():""}function GP(n,e){let t=n.indexOf(Ue.CACHE_KEY)===0,r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),t&&r}function qP(n,e){let t=!1;n&&(t=n.indexOf(er.THROTTLING_PREFIX)===0);let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),t&&r}function KP({environment:n,clientId:e}){return[ll,n,e].join(Ie.CACHE_KEY_SEPARATOR).toLowerCase()}function WP(n,e){return e?n.indexOf(ll)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function YP(n,e){return e?n.indexOf(Ps.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function df(){return Ot()+Ps.REFRESH_TIME_SECONDS}function Us(n,e,t){n.authorization_endpoint=e.authorization_endpoint,n.token_endpoint=e.token_endpoint,n.end_session_endpoint=e.end_session_endpoint,n.issuer=e.issuer,n.endpointsFromNetwork=t,n.jwks_uri=e.jwks_uri}function Nl(n,e,t){n.aliases=e.aliases,n.preferred_cache=e.preferred_cache,n.preferred_network=e.preferred_network,n.aliasesFromNetwork=t}function hf(n){return n.expiresAt<=Ot()}var Pt={};Tt(Pt,{authorityMismatch:()=>Hl,authorityUriInsecure:()=>mi,cannotAllowPlatformBroker:()=>Ul,cannotSetOIDCOptions:()=>Fl,claimsRequestParsingError:()=>Ol,emptyInputScopesError:()=>vi,invalidAuthenticationHeader:()=>Ll,invalidAuthorityMetadata:()=>Ti,invalidClaims:()=>wn,invalidCloudDiscoveryMetadata:()=>Yr,invalidCodeChallengeMethod:()=>_i,invalidPromptValue:()=>Ci,logoutRequestEmpty:()=>Ii,missingNonceAuthenticationHeader:()=>xl,missingSshJwk:()=>ar,missingSshKid:()=>Pl,pkceParamsMissing:()=>sr,redirectUriEmpty:()=>gi,tokenRequestEmpty:()=>Ei,untrustedAuthority:()=>wi,urlEmptyError:()=>yi,urlParseError:()=>Tn});var gi="redirect_uri_empty",Ol="claims_request_parsing_error",mi="authority_uri_insecure",Tn="url_parse_error",yi="empty_url_error",vi="empty_input_scopes_error",Ci="invalid_prompt_value",wn="invalid_claims",Ei="token_request_empty",Ii="logout_request_empty",_i="invalid_code_challenge_method",sr="pkce_params_missing",Yr="invalid_cloud_discovery_metadata",Ti="invalid_authority_metadata",wi="untrusted_authority",ar="missing_ssh_jwk",Pl="missing_ssh_kid",xl="missing_nonce_authentication_header",Ll="invalid_authentication_header",Fl="cannot_set_OIDCOptions",Ul="cannot_allow_platform_broker",Hl="authority_mismatch";var pe={[gi]:"A redirect URI is required for all calls, and none has been set.",[Ol]:"Could not parse the given claims request object.",[mi]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Tn]:"URL could not be parsed into appropriate segments.",[yi]:"URL was empty or null.",[vi]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[Ci]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[wn]:"Given claims parameter must be a stringified JSON object.",[Ei]:"Token request was empty and not found in cache.",[Ii]:"The logout request was null or undefined.",[_i]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[sr]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Yr]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Ti]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[wi]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[ar]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[Pl]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[xl]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[Ll]:"Invalid authentication header provided",[Fl]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Ul]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[Hl]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."},mS={redirectUriNotSet:{code:gi,desc:pe[gi]},claimsRequestParsingError:{code:Ol,desc:pe[Ol]},authorityUriInsecure:{code:mi,desc:pe[mi]},urlParseError:{code:Tn,desc:pe[Tn]},urlEmptyError:{code:yi,desc:pe[yi]},emptyScopesError:{code:vi,desc:pe[vi]},invalidPrompt:{code:Ci,desc:pe[Ci]},invalidClaimsRequest:{code:wn,desc:pe[wn]},tokenRequestEmptyError:{code:Ei,desc:pe[Ei]},logoutRequestEmptyError:{code:Ii,desc:pe[Ii]},invalidCodeChallengeMethod:{code:_i,desc:pe[_i]},invalidCodeChallengeParams:{code:sr,desc:pe[sr]},invalidCloudDiscoveryMetadata:{code:Yr,desc:pe[Yr]},invalidAuthorityMetadata:{code:Ti,desc:pe[Ti]},untrustedAuthority:{code:wi,desc:pe[wi]},missingSshJwk:{code:ar,desc:pe[ar]},missingSshKid:{code:Pl,desc:pe[Pl]},missingNonceAuthenticationHeader:{code:xl,desc:pe[xl]},invalidAuthenticationHeader:{code:Ll,desc:pe[Ll]},cannotSetOIDCOptions:{code:Fl,desc:pe[Fl]},cannotAllowPlatformBroker:{code:Ul,desc:pe[Ul]},authorityMismatch:{code:Hl,desc:pe[Hl]}},Bl=class n extends F{constructor(e){super(e,pe[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,n.prototype)}};function $(n){return new Bl(n)}var _e=class{static isEmptyObj(e){if(e)try{let t=JSON.parse(e);return Object.keys(t).length===0}catch{}return!0}static startsWith(e,t){return e.indexOf(t)===0}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){let t={},r=e.split("&"),o=i=>decodeURIComponent(i.replace(/\+/g," "));return r.forEach(i=>{if(i.trim()){let[s,a]=i.split(/=(.+)/g,2);s&&a&&(t[o(s)]=o(a))}}),t}static trimArrayEntries(e){return e.map(t=>t.trim())}static removeEmptyStringsFromArray(e){return e.filter(t=>!!t)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}};var le=class n{constructor(e){let t=e?_e.trimArrayEntries([...e]):[],r=t?_e.removeEmptyStringsFromArray(t):[];if(!r||!r.length)throw $(vi);this.scopes=new Set,r.forEach(o=>this.scopes.add(o))}static fromString(e){let r=(e||v.EMPTY_STRING).split(" ");return new n(r)}static createSearchScopes(e){let t=new n(e);return t.containsOnlyOIDCScopes()?t.removeScope(v.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t}containsScope(e){let t=this.printScopesLowerCase().split(" "),r=new n(t);return e?r.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(t=>this.containsScope(t))}containsOnlyOIDCScopes(){let e=0;return iv.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(t=>this.appendScope(t))}catch{throw C(ci)}}removeScope(e){if(!e)throw C(ai);this.scopes.delete(e.trim())}removeOIDCScopes(){iv.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw C(Gr);let t=new Set;return e.scopes.forEach(r=>t.add(r.toLowerCase())),this.scopes.forEach(r=>t.add(r.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw C(Gr);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let t=this.unionScopeSets(e),r=e.getScopeCount(),o=this.getScopeCount();return t.size<o+r}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):v.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}};function Hs(n,e){if(!n)throw C(Zo);try{let t=e(n);return JSON.parse(t)}catch{throw C(zr)}}function Sn(n){if(!n)throw C(zr);let e=n.split(Ie.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?v.EMPTY_STRING:e[1]}}function hv(n,e){return!!n&&!!e&&n===e.split(".")[1]}function Bs(n,e,t,r){if(r){let{oid:o,sub:i,tid:s,name:a,tfp:c,acr:l}=r,u=s||c||l||"";return{tenantId:u,localAccountId:o||i||"",name:a,isHomeTenant:hv(u,n)}}else return{tenantId:t,localAccountId:e,isHomeTenant:hv(t,n)}}function Si(n,e,t,r){let o=n;if(e){let i=e,{isHomeTenant:a}=i,c=xn(i,["isHomeTenant"]);o=m(m({},n),c)}if(t){let s=Bs(n.homeAccountId,n.localAccountId,n.tenantId,t),{isHomeTenant:a}=s,c=xn(s,["isHomeTenant"]);return o=w(m(m({},o),c),{idTokenClaims:t,idToken:r}),o}return o}var ut={Default:0,Adfs:1,Dsts:2,Ciam:3};function ff(n){return n&&(n.tid||n.tfp||n.acr)||null}var ge={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};var Te=class n{generateAccountId(){return[this.homeAccountId,this.environment].join(Ie.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return n.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){let t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",t||e.tenantId||""].join(Ie.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,t,r){let o=new n;t.authorityType===ut.Adfs?o.authorityType=Os.ADFS_ACCOUNT_TYPE:t.protocolMode===ge.OIDC?o.authorityType=Os.GENERIC_ACCOUNT_TYPE:o.authorityType=Os.MSSTS_ACCOUNT_TYPE;let i;e.clientInfo&&r&&(i=Hs(e.clientInfo,r)),o.clientInfo=e.clientInfo,o.homeAccountId=e.homeAccountId,o.nativeAccountId=e.nativeAccountId;let s=e.environment||t&&t.getPreferredCache();if(!s)throw C(rr);o.environment=s,o.realm=i?.utid||ff(e.idTokenClaims)||"",o.localAccountId=i?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let a=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,c=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(o.username=a||c||"",o.name=e.idTokenClaims?.name||"",o.cloudGraphHostName=e.cloudGraphHostName,o.msGraphHost=e.msGraphHost,e.tenantProfiles)o.tenantProfiles=e.tenantProfiles;else{let l=Bs(e.homeAccountId,o.localAccountId,o.realm,e.idTokenClaims);o.tenantProfiles=[l]}return o}static createFromAccountInfo(e,t,r){let o=new n;return o.authorityType=e.authorityType||Os.GENERIC_ACCOUNT_TYPE,o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.cloudGraphHostName=t,o.msGraphHost=r,o.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),o}static generateHomeAccountId(e,t,r,o,i){if(!(t===ut.Adfs||t===ut.Dsts)){if(e)try{let s=Hs(e,o.base64Decode);if(s.uid&&s.utid)return`${s.uid}.${s.utid}`}catch{}r.warning("No client info in response")}return i?.sub||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,t,r){if(!e||!t)return!1;let o=!0;if(r){let i=e.idTokenClaims||{},s=t.idTokenClaims||{};o=i.iat===s.iat&&i.nonce===s.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&o}};var Qr={};Tt(Qr,{getDeserializedResponse:()=>fv,mapToQueryString:()=>bn,stripLeadingHashOrQuery:()=>yS});function yS(n){return n.startsWith("#/")?n.substring(2):n.startsWith("#")||n.startsWith("?")?n.substring(1):n}function fv(n){if(!n||n.indexOf("=")<0)return null;try{let e=yS(n),t=Object.fromEntries(new URLSearchParams(e));if(t.code||t.ear_jwe||t.error||t.error_description||t.state)return t}catch{throw C(ti)}return null}function bn(n,e=!0,t){let r=new Array;return n.forEach((o,i)=>{!e&&t&&i in t?r.push(`${i}=${o}`):r.push(`${i}=${encodeURIComponent(o)}`)}),r.join("&")}var x=class n{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw $(yi);e.includes("#")||(this._urlString=n.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return _e.endsWith(t,"?")?t=t.slice(0,-1):_e.endsWith(t,"?/")&&(t=t.slice(0,-2)),_e.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw $(Tn)}if(!e.HostNameAndPort||!e.PathSegments)throw $(Tn);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw $(mi)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return n.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let t=this.getUrlComponents(),r=t.PathSegments;return e&&r.length!==0&&(r[0]===on.COMMON||r[0]===on.ORGANIZATIONS)&&(r[0]=e),n.constructAuthorityUriFromObject(t)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw $(Tn);let r={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]},o=r.AbsolutePath.split("/");return o=o.filter(i=>i&&i.length>0),r.PathSegments=o,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){let t=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(t);if(!r)throw $(Tn);return r[2]}static getAbsoluteUrl(e,t){if(e[0]===v.FORWARD_SLASH){let o=new n(t).getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new n(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!fv(e)}};var CS={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},pv=CS.endpointMetadata,gv=CS.instanceDiscoveryMetadata,mv=new Set;gv.metadata.forEach(n=>{n.aliases.forEach(e=>{mv.add(e)})});function ES(n,e){let t,r=n.canonicalAuthority;if(r){let o=new x(r).getUrlComponents().HostNameAndPort;t=vS(o,n.cloudDiscoveryMetadata?.metadata,ct.CONFIG,e)||vS(o,gv.metadata,ct.HARDCODED_VALUES,e)||n.knownAuthorities}return t||[]}function vS(n,e,t,r){if(r?.trace(`getAliasesFromMetadata called with source: ${t}`),n&&e){let o=jl(e,n);if(o)return r?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${t}, returning aliases`),o.aliases;r?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${t}`)}return null}function IS(n){return jl(gv.metadata,n)}function jl(n,e){for(let t=0;t<n.length;t++){let r=n[t];if(r.aliases.includes(e))return r}return null}var pf="cache_quota_exceeded",zl="cache_error_unknown";var yv={[pf]:"Exceeded cache storage capacity.",[zl]:"Unexpected error occurred when using cache storage."},cr=class n extends Error{constructor(e,t){let r=t||(yv[e]?yv[e]:yv[zl]);super(`${e}: ${r}`),Object.setPrototypeOf(this,n.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}};var bi=class{constructor(e,t,r,o){this.clientId=e,this.cryptoImpl=t,this.commonLogger=r.clone(lf,xs),this.staticAuthorityOptions=o}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){let t=this.getAllAccounts(e);return t.length>1?t.sort(o=>o.idTokenClaims?-1:1)[0]:t.length===1?t[0]:null}getBaseAccountInfo(e){let t=this.getAccountsFilteredBy(e);return t.length>0?t[0].getAccountInfo():null}buildTenantProfiles(e,t){return e.flatMap(r=>this.getTenantProfilesFromAccountEntity(r,t?.tenantId,t))}getTenantedAccountInfoByFilter(e,t,r,o){let i=null,s;if(o&&!this.tenantProfileMatchesFilter(r,o))return null;let a=this.getIdToken(e,t,r.tenantId);return a&&(s=ir(a.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(s,o))?null:(i=Si(e,r,s,a?.secret),i)}getTenantProfilesFromAccountEntity(e,t,r){let o=e.getAccountInfo(),i=o.tenantProfiles||new Map,s=this.getTokenKeys();if(t){let c=i.get(t);if(c)i=new Map([[t,c]]);else return[]}let a=[];return i.forEach(c=>{let l=this.getTenantedAccountInfoByFilter(o,s,c,r);l&&a.push(l)}),a}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId)||t.name&&e.name!==t.name||t.isHomeTenant!==void 0&&e.isHomeTenant!==t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){return!(t&&(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId)||t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint)||t.username&&!this.matchUsername(e.preferred_username,t.username)||t.name&&!this.matchName(e,t.name)||t.sid&&!this.matchSid(e,t.sid)))}saveCacheRecord(e,t,r){return f(this,null,function*(){if(!e)throw C(li);try{e.account&&(yield this.setAccount(e.account,t)),e.idToken&&r?.idToken!==!1&&(yield this.setIdTokenCredential(e.idToken,t)),e.accessToken&&r?.accessToken!==!1&&(yield this.saveAccessToken(e.accessToken,t)),e.refreshToken&&r?.refreshToken!==!1&&(yield this.setRefreshTokenCredential(e.refreshToken,t)),e.appMetadata&&this.setAppMetadata(e.appMetadata)}catch(o){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),o instanceof Error?(this.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${o.message}`,t),o.name==="QuotaExceededError"||o.name==="NS_ERROR_DOM_QUOTA_REACHED"||o.message.includes("exceeded the quota")?(this.commonLogger?.error("CacheManager.saveCacheRecord: exceeded storage quota",t),new cr(pf)):new cr(o.name,o.message)):(this.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${o}`,t),new cr(zl))}})}saveAccessToken(e,t){return f(this,null,function*(){let r={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},o=this.getTokenKeys(),i=le.fromString(e.target),s=[];o.accessToken.forEach(a=>{if(!this.accessTokenKeyMatchesFilter(a,r,!1))return;let c=this.getAccessTokenCredential(a);c&&this.credentialMatchesFilter(c,r)&&le.fromString(c.target).intersectingScopeSets(i)&&s.push(this.removeAccessToken(a))}),yield Promise.all(s),yield this.setAccessTokenCredential(e,t)})}getAccountsFilteredBy(e){let t=this.getAccountKeys(),r=[];return t.forEach(o=>{if(!this.isAccountKey(o,e.homeAccountId))return;let i=this.getAccount(o,this.commonLogger);if(!i||e.homeAccountId&&!this.matchHomeAccountId(i,e.homeAccountId)||e.username&&!this.matchUsername(i.username,e.username)||e.environment&&!this.matchEnvironment(i,e.environment)||e.realm&&!this.matchRealm(i,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(i,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(i,e.authorityType))return;let s={localAccountId:e?.localAccountId,name:e?.name},a=i.tenantProfiles?.filter(c=>this.tenantProfileMatchesFilter(c,s));a&&a.length===0||r.push(i)}),r}isAccountKey(e,t,r){return!(e.split(Ie.CACHE_KEY_SEPARATOR).length<3||t&&!e.toLowerCase().includes(t.toLowerCase())||r&&!e.toLowerCase().includes(r.toLowerCase()))}isCredentialKey(e){if(e.split(Ie.CACHE_KEY_SEPARATOR).length<6)return!1;let t=e.toLowerCase();if(t.indexOf(P.ID_TOKEN.toLowerCase())===-1&&t.indexOf(P.ACCESS_TOKEN.toLowerCase())===-1&&t.indexOf(P.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&t.indexOf(P.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(t.indexOf(P.REFRESH_TOKEN.toLowerCase())>-1){let r=`${P.REFRESH_TOKEN}${Ie.CACHE_KEY_SEPARATOR}${this.clientId}${Ie.CACHE_KEY_SEPARATOR}`,o=`${P.REFRESH_TOKEN}${Ie.CACHE_KEY_SEPARATOR}${jr}${Ie.CACHE_KEY_SEPARATOR}`;if(t.indexOf(r.toLowerCase())===-1&&t.indexOf(o.toLowerCase())===-1)return!1}else if(t.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,t){return!(t.clientId&&!this.matchClientId(e,t.clientId)||t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash)||typeof t.homeAccountId=="string"&&!this.matchHomeAccountId(e,t.homeAccountId)||t.environment&&!this.matchEnvironment(e,t.environment)||t.realm&&!this.matchRealm(e,t.realm)||t.credentialType&&!this.matchCredentialType(e,t.credentialType)||t.familyId&&!this.matchFamilyId(e,t.familyId)||t.target&&!this.matchTarget(e,t.target)||(t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash||e.credentialType===P.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(t.tokenType&&!this.matchTokenType(e,t.tokenType)||t.tokenType===G.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId)))}getAppMetadataFilteredBy(e){let t=this.getKeys(),r={};return t.forEach(o=>{if(!this.isAppMetadata(o))return;let i=this.getAppMetadata(o);i&&(e.environment&&!this.matchEnvironment(i,e.environment)||e.clientId&&!this.matchClientId(i,e.clientId)||(r[o]=i))}),r}getAuthorityMetadataByAlias(e){let t=this.getAuthorityMetadataKeys(),r=null;return t.forEach(o=>{if(!this.isAuthorityMetadata(o)||o.indexOf(this.clientId)===-1)return;let i=this.getAuthorityMetadata(o);i&&i.aliases.indexOf(e)!==-1&&(r=i)}),r}removeAllAccounts(){return f(this,null,function*(){let e=this.getAccountKeys(),t=[];e.forEach(r=>{t.push(this.removeAccount(r))}),yield Promise.all(t)})}removeAccount(e){return f(this,null,function*(){let t=this.getAccount(e,this.commonLogger);t&&(yield this.removeAccountContext(t),this.removeItem(e))})}removeAccountContext(e){return f(this,null,function*(){let t=this.getTokenKeys(),r=e.generateAccountId(),o=[];t.idToken.forEach(i=>{i.indexOf(r)===0&&this.removeIdToken(i)}),t.accessToken.forEach(i=>{i.indexOf(r)===0&&o.push(this.removeAccessToken(i))}),t.refreshToken.forEach(i=>{i.indexOf(r)===0&&this.removeRefreshToken(i)}),yield Promise.all(o)})}removeAccessToken(e){return f(this,null,function*(){let t=this.getAccessTokenCredential(e);if(t){if(t.credentialType.toLowerCase()===P.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&t.tokenType===G.POP){let o=t.keyId;if(o)try{yield this.cryptoImpl.removeTokenBindingKey(o)}catch{throw C(hi)}}return this.removeItem(e)}})}removeAppMetadata(){return this.getKeys().forEach(t=>{this.isAppMetadata(t)&&this.removeItem(t)}),!0}readAccountFromCache(e){let t=Te.generateAccountCacheKey(e);return this.getAccount(t,this.commonLogger)}getIdToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getIdToken called");let s={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:P.ID_TOKEN,clientId:this.clientId,realm:r},a=this.getIdTokensByFilter(s,t),c=a.size;if(c<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(c>1){let l=a;if(!r){let u=new Map;a.forEach((g,p)=>{g.realm===e.tenantId&&u.set(p,g)});let h=u.size;if(h<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(h===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),u.values().next().value;l=u}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),l.forEach((u,h)=>{this.removeIdToken(h)}),o&&i&&o.addFields({multiMatchedID:a.size},i),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t){let r=t&&t.idToken||this.getTokenKeys().idToken,o=new Map;return r.forEach(i=>{if(!this.idTokenKeyMatchesFilter(i,m({clientId:this.clientId},e)))return;let s=this.getIdTokenCredential(i);s&&this.credentialMatchesFilter(s,e)&&o.set(i,s)}),o}idTokenKeyMatchesFilter(e,t){let r=e.toLowerCase();return!(t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1)}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,t,r,o,i,s){this.commonLogger.trace("CacheManager - getAccessToken called");let a=le.createSearchScopes(t.scopes),c=t.authenticationScheme||G.BEARER,l=c&&c.toLowerCase()!==G.BEARER.toLowerCase()?P.ACCESS_TOKEN_WITH_AUTH_SCHEME:P.ACCESS_TOKEN,u={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:l,clientId:this.clientId,realm:o||e.tenantId,target:a,tokenType:c,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},h=r&&r.accessToken||this.getTokenKeys().accessToken,g=[];h.forEach(E=>{if(this.accessTokenKeyMatchesFilter(E,u,!0)){let _=this.getAccessTokenCredential(E);_&&this.credentialMatchesFilter(_,u)&&g.push(_)}});let p=g.length;return p<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):p>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),g.forEach(E=>{this.removeAccessToken(kl(E))}),i&&s&&i.addFields({multiMatchedAT:g.length},s),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),g[0])}accessTokenKeyMatchesFilter(e,t,r){let o=e.toLowerCase();if(t.clientId&&o.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&o.indexOf(t.homeAccountId.toLowerCase())===-1||t.realm&&o.indexOf(t.realm.toLowerCase())===-1||t.requestedClaimsHash&&o.indexOf(t.requestedClaimsHash.toLowerCase())===-1)return!1;if(t.target){let i=t.target.asArray();for(let s=0;s<i.length;s++){if(r&&!o.includes(i[s].toLowerCase()))return!1;if(!r&&o.includes(i[s].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){let t=this.getTokenKeys(),r=[];return t.accessToken.forEach(o=>{if(!this.accessTokenKeyMatchesFilter(o,e,!0))return;let i=this.getAccessTokenCredential(o);i&&this.credentialMatchesFilter(i,e)&&r.push(i)}),r}getRefreshToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getRefreshToken called");let s=t?jr:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:P.REFRESH_TOKEN,clientId:this.clientId,familyId:s},c=r&&r.refreshToken||this.getTokenKeys().refreshToken,l=[];c.forEach(h=>{if(this.refreshTokenKeyMatchesFilter(h,a)){let g=this.getRefreshTokenCredential(h);g&&this.credentialMatchesFilter(g,a)&&l.push(g)}});let u=l.length;return u<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(u>1&&o&&i&&o.addFields({multiMatchedRT:u},i),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),l[0])}refreshTokenKeyMatchesFilter(e,t){let r=e.toLowerCase();return!(t.familyId&&r.indexOf(t.familyId.toLowerCase())===-1||!t.familyId&&t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){let t={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(t),o=Object.keys(r).map(s=>r[s]),i=o.length;if(i<1)return null;if(i>1)throw C(ii);return o[0]}isAppMetadataFOCI(e){let t=this.readAppMetadataFromCache(e);return!!(t&&t.familyId===jr)}matchHomeAccountId(e,t){return typeof e.homeAccountId=="string"&&t===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,t){let r=e.oid||e.sub;return t===r}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){return t.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,t){return!!(e&&typeof e=="string"&&t?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,t){return!!(e.userAssertionHash&&t===e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){let o=ES(this.staticAuthorityOptions,this.commonLogger);if(o.includes(t)&&o.includes(e.environment))return!0}let r=this.getAuthorityMetadataByAlias(t);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!!(e.clientId&&t===e.clientId)}matchFamilyId(e,t){return!!(e.familyId&&t===e.familyId)}matchRealm(e,t){return e.realm?.toLowerCase()===t.toLowerCase()}matchNativeAccountId(e,t){return!!(e.nativeAccountId&&t===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!!(e.authorityType&&t.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,t){return e.credentialType!==P.ACCESS_TOKEN&&e.credentialType!==P.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:le.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!!(e.tokenType&&e.tokenType===t)}matchKeyId(e,t){return!!(e.keyId&&e.keyId===t)}isAppMetadata(e){return e.indexOf(ll)!==-1}isAuthorityMetadata(e){return e.indexOf(Ps.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${Ps.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,t){for(let r in t)e[r]=t[r];return e}},Vl=class extends bi{setAccount(){return f(this,null,function*(){throw C(V)})}getAccount(){throw C(V)}setIdTokenCredential(){return f(this,null,function*(){throw C(V)})}getIdTokenCredential(){throw C(V)}setAccessTokenCredential(){return f(this,null,function*(){throw C(V)})}getAccessTokenCredential(){throw C(V)}setRefreshTokenCredential(){return f(this,null,function*(){throw C(V)})}getRefreshTokenCredential(){throw C(V)}setAppMetadata(){throw C(V)}getAppMetadata(){throw C(V)}setServerTelemetry(){throw C(V)}getServerTelemetry(){throw C(V)}setAuthorityMetadata(){throw C(V)}getAuthorityMetadata(){throw C(V)}getAuthorityMetadataKeys(){throw C(V)}setThrottlingCache(){throw C(V)}getThrottlingCache(){throw C(V)}removeItem(){throw C(V)}getKeys(){throw C(V)}getAccountKeys(){throw C(V)}getTokenKeys(){throw C(V)}};var gf={tokenRenewalOffsetSeconds:av,preventCorsPreflight:!1},QP={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:re.Info,correlationId:v.EMPTY_STRING},ZP={claimsBasedCachingEnabled:!1},JP={sendGetRequestAsync(){return f(this,null,function*(){throw C(V)})},sendPostRequestAsync(){return f(this,null,function*(){throw C(V)})}},XP={sku:v.SKU,version:xs,cpu:v.EMPTY_STRING,os:v.EMPTY_STRING},ex={clientSecret:v.EMPTY_STRING,clientAssertion:void 0},tx={azureCloudInstance:Wr.None,tenant:`${v.DEFAULT_COMMON_TENANT}`},nx={application:{appName:"",appVersion:""}};function _S({authOptions:n,systemOptions:e,loggerOptions:t,cacheOptions:r,storageInterface:o,networkInterface:i,cryptoInterface:s,clientCredentials:a,libraryInfo:c,telemetry:l,serverTelemetryManager:u,persistencePlugin:h,serializableCache:g}){let p=m(m({},QP),t);return{authOptions:rx(n),systemOptions:m(m({},gf),e),loggerOptions:p,cacheOptions:m(m({},ZP),r),storageInterface:o||new Vl(n.clientId,Kr,new vt(p)),networkInterface:i||JP,cryptoInterface:s||Kr,clientCredentials:a||ex,libraryInfo:m(m({},XP),c),telemetry:m(m({},nx),l),serverTelemetryManager:u||null,persistencePlugin:h||null,serializableCache:g||null}}function rx(n){return m({clientCapabilities:[],azureCloudOptions:tx,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1},n)}function mf(n){return n.authOptions.authority.options.protocolMode===ge.OIDC}var Je={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};var Ct={};Tt(Ct,{addApplicationTelemetry:()=>ql,addAuthorizationCode:()=>cC,addBrokerParameters:()=>hr,addCcsOid:()=>ur,addCcsUpn:()=>Zr,addClaims:()=>ki,addClientAssertion:()=>Yl,addClientAssertionType:()=>Ql,addClientCapabilitiesToClaims:()=>TS,addClientId:()=>Mi,addClientInfo:()=>Oi,addClientSecret:()=>Wl,addCodeChallengeParams:()=>vx,addCodeVerifier:()=>uC,addCorrelationId:()=>Ni,addDeviceCode:()=>Cx,addDomainHint:()=>iC,addEARParameters:()=>wx,addExtraQueryParameters:()=>dr,addGrantType:()=>Zl,addIdTokenHint:()=>oC,addInstanceAware:()=>Jl,addLibraryInfo:()=>Gl,addLoginHint:()=>zs,addLogoutHint:()=>dC,addNativeBroker:()=>yx,addNonce:()=>aC,addOboAssertion:()=>Ex,addPassword:()=>Tx,addPopToken:()=>Xl,addPostLogoutRedirectUri:()=>rC,addPrompt:()=>sC,addRedirectUri:()=>Ri,addRefreshToken:()=>lC,addRequestTokenUse:()=>Ix,addResponseMode:()=>nC,addResponseType:()=>mx,addScopes:()=>Di,addServerTelemetry:()=>tu,addSid:()=>_f,addSshJwk:()=>eu,addState:()=>Kl,addThrottling:()=>nu,addUsername:()=>_x,instrumentBrokerParams:()=>Ai});var lr={};Tt(lr,{ACCESS_TOKEN:()=>sx,BROKER_CLIENT_ID:()=>$l,BROKER_REDIRECT_URI:()=>If,CCS_HEADER:()=>px,CLAIMS:()=>Iv,CLIENT_ASSERTION:()=>Gv,CLIENT_ASSERTION_TYPE:()=>qv,CLIENT_ID:()=>An,CLIENT_INFO:()=>dx,CLIENT_REQUEST_ID:()=>kv,CLIENT_SECRET:()=>$v,CODE:()=>Av,CODE_CHALLENGE:()=>Dv,CODE_CHALLENGE_METHOD:()=>Mv,CODE_VERIFIER:()=>Rv,DEVICE_CODE:()=>Vv,DOMAIN_HINT:()=>Xv,EAR_JWE_CRYPTO:()=>tC,EAR_JWK:()=>eC,ERROR:()=>ox,ERROR_DESCRIPTION:()=>ix,EXPIRES_IN:()=>cx,FOCI:()=>fx,GRANT_TYPE:()=>Ev,ID_TOKEN:()=>ax,ID_TOKEN_HINT:()=>zv,INSTANCE_AWARE:()=>js,LOGIN_HINT:()=>Jv,LOGOUT_HINT:()=>Qv,NATIVE_BROKER:()=>Yv,NONCE:()=>Sv,OBO_ASSERTION:()=>Kv,ON_BEHALF_OF:()=>hx,POST_LOGOUT_URI:()=>jv,PROMPT:()=>bv,REDIRECT_URI:()=>yf,REFRESH_TOKEN:()=>Tv,REFRESH_TOKEN_EXPIRES_IN:()=>lx,REQUESTED_TOKEN_USE:()=>Wv,REQ_CNF:()=>Cf,RESPONSE_MODE:()=>Cv,RESPONSE_TYPE:()=>vv,RETURN_SPA_CODE:()=>Ef,SCOPE:()=>_v,SESSION_STATE:()=>ux,SID:()=>Zv,STATE:()=>wv,TOKEN_TYPE:()=>vf,X_APP_NAME:()=>Hv,X_APP_VER:()=>Bv,X_CLIENT_CPU:()=>xv,X_CLIENT_CURR_TELEM:()=>Lv,X_CLIENT_EXTRA_SKU:()=>gx,X_CLIENT_LAST_TELEM:()=>Fv,X_CLIENT_OS:()=>Pv,X_CLIENT_SKU:()=>Nv,X_CLIENT_VER:()=>Ov,X_MS_LIB_CAPABILITY:()=>Uv});var An="client_id",yf="redirect_uri",vv="response_type",Cv="response_mode",Ev="grant_type",Iv="claims",_v="scope",ox="error",ix="error_description",sx="access_token",ax="id_token",Tv="refresh_token",cx="expires_in",lx="refresh_token_expires_in",wv="state",Sv="nonce",bv="prompt",ux="session_state",dx="client_info",Av="code",Dv="code_challenge",Mv="code_challenge_method",Rv="code_verifier",kv="client-request-id",Nv="x-client-SKU",Ov="x-client-VER",Pv="x-client-OS",xv="x-client-CPU",Lv="x-client-current-telemetry",Fv="x-client-last-telemetry",Uv="x-ms-lib-capability",Hv="x-app-name",Bv="x-app-ver",jv="post_logout_redirect_uri",zv="id_token_hint",Vv="device_code",$v="client_secret",Gv="client_assertion",qv="client_assertion_type",vf="token_type",Cf="req_cnf",Kv="assertion",Wv="requested_token_use",hx="on_behalf_of",fx="foci",px="X-AnchorMailbox",Ef="return_spa_code",Yv="nativebroker",Qv="logout_hint",Zv="sid",Jv="login_hint",Xv="domain_hint",gx="x-client-xtra-sku",$l="brk_client_id",If="brk_redirect_uri",js="instance_aware",eC="ear_jwk",tC="ear_jwe_crypto";function Ai(n,e,t){if(!e)return;let r=n.get(An);r&&n.has($l)&&t?.addFields({embeddedClientId:r,embeddedRedirectUri:n.get(yf)},e)}function mx(n,e){n.set(vv,e)}function nC(n,e){n.set(Cv,e||sv.QUERY)}function yx(n){n.set(Yv,"1")}function Di(n,e,t=!0,r=rn){t&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");let o=t?[...e||[],...r]:e||[],i=new le(o);n.set(_v,i.printScopes())}function Mi(n,e){n.set(An,e)}function Ri(n,e){n.set(yf,e)}function rC(n,e){n.set(jv,e)}function oC(n,e){n.set(zv,e)}function iC(n,e){n.set(Xv,e)}function zs(n,e){n.set(Jv,e)}function Zr(n,e){n.set(Ae.CCS_HEADER,`UPN:${e}`)}function ur(n,e){n.set(Ae.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}function _f(n,e){n.set(Zv,e)}function ki(n,e,t){let r=TS(e,t);try{JSON.parse(r)}catch{throw $(wn)}n.set(Iv,r)}function Ni(n,e){n.set(kv,e)}function Gl(n,e){n.set(Nv,e.sku),n.set(Ov,e.version),e.os&&n.set(Pv,e.os),e.cpu&&n.set(xv,e.cpu)}function ql(n,e){e?.appName&&n.set(Hv,e.appName),e?.appVersion&&n.set(Bv,e.appVersion)}function sC(n,e){n.set(bv,e)}function Kl(n,e){e&&n.set(wv,e)}function aC(n,e){n.set(Sv,e)}function vx(n,e,t){if(e&&t)n.set(Dv,e),n.set(Mv,t);else throw $(sr)}function cC(n,e){n.set(Av,e)}function Cx(n,e){n.set(Vv,e)}function lC(n,e){n.set(Tv,e)}function uC(n,e){n.set(Rv,e)}function Wl(n,e){n.set($v,e)}function Yl(n,e){e&&n.set(Gv,e)}function Ql(n,e){e&&n.set(qv,e)}function Ex(n,e){n.set(Kv,e)}function Ix(n,e){n.set(Wv,e)}function Zl(n,e){n.set(Ev,e)}function Oi(n){n.set(hS,"1")}function Jl(n){n.has(js)||n.set(js,"true")}function dr(n,e){Object.entries(e).forEach(([t,r])=>{!n.has(t)&&r&&n.set(t,r)})}function TS(n,e){let t;if(!n)t={};else try{t=JSON.parse(n)}catch{throw $(wn)}return e&&e.length>0&&(t.hasOwnProperty(Ns.ACCESS_TOKEN)||(t[Ns.ACCESS_TOKEN]={}),t[Ns.ACCESS_TOKEN][Ns.XMS_CC]={values:e}),JSON.stringify(t)}function _x(n,e){n.set(of.username,e)}function Tx(n,e){n.set(of.password,e)}function Xl(n,e){e&&(n.set(vf,G.POP),n.set(Cf,e))}function eu(n,e){e&&(n.set(vf,G.SSH),n.set(Cf,e))}function tu(n,e){n.set(Lv,e.generateCurrentRequestHeaderValue()),n.set(Fv,e.generateLastRequestHeaderValue())}function nu(n){n.set(Uv,er.X_MS_LIB_CAPABILITY_VALUE)}function dC(n,e){n.set(Qv,e)}function hr(n,e,t){n.has($l)||n.set($l,e),n.has(If)||n.set(If,t)}function wx(n,e){n.set(eC,encodeURIComponent(e)),n.set(tC,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}var wf={};Tt(wf,{createDiscoveredInstance:()=>pC});function wS(n){return n.hasOwnProperty("authorization_endpoint")&&n.hasOwnProperty("token_endpoint")&&n.hasOwnProperty("issuer")&&n.hasOwnProperty("jwks_uri")}function SS(n){return n.hasOwnProperty("tenant_discovery_endpoint")&&n.hasOwnProperty("metadata")}function bS(n){return n.hasOwnProperty("error")&&n.hasOwnProperty("error_description")}var d={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},J4=new Map([[d.AcquireTokenByCode,"ATByCode"],[d.AcquireTokenByRefreshToken,"ATByRT"],[d.AcquireTokenSilent,"ATS"],[d.AcquireTokenSilentAsync,"ATSAsync"],[d.AcquireTokenPopup,"ATPopup"],[d.AcquireTokenRedirect,"ATRedirect"],[d.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[d.CryptoOptsSignJwt,"CryptoSignJwt"],[d.SilentCacheClientAcquireToken,"SltCacheClientAT"],[d.SilentIframeClientAcquireToken,"SltIframeClientAT"],[d.SilentRefreshClientAcquireToken,"SltRClientAT"],[d.SsoSilent,"SsoSlt"],[d.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[d.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[d.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[d.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[d.NetworkClientSendPostRequestAsync,"NetClientSendPost"],[d.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[d.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[d.BrokerHandhshake,"BrokerHandshake"],[d.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[d.AcquireTokenByBroker,"ATByBroker"],[d.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[d.RefreshTokenClientAcquireToken,"RTClientAT"],[d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[d.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[d.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[d.AcquireTokenFromCache,"ATFromCache"],[d.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[d.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[d.AcquireTokenBySilentIframe,"ATBySltIframe"],[d.InitializeBaseRequest,"InitBaseReq"],[d.InitializeSilentRequest,"InitSltReq"],[d.InitializeClientApplication,"InitClientApplication"],[d.InitializeCache,"InitCache"],[d.ImportExistingCache,"importCache"],[d.SetUserData,"setUserData"],[d.LocalStorageUpdated,"localStorageUpdated"],[d.SilentIframeClientTokenHelper,"SIClientTHelper"],[d.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[d.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[d.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[d.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[d.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[d.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[d.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[d.GetAuthCodeUrl,"GetAuthCodeUrl"],[d.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[d.HandleCodeResponse,"HandleCodeResp"],[d.HandleResponseEar,"HandleRespEar"],[d.HandleResponseCode,"HandleRespCode"],[d.HandleResponsePlatformBroker,"HandleRespPlatBroker"],[d.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[d.AuthClientAcquireToken,"AuthClientAT"],[d.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[d.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[d.PopTokenGenerateCnf,"PopTGenCnf"],[d.PopTokenGenerateKid,"PopTGenKid"],[d.HandleServerTokenResponse,"HandleServerTRes"],[d.DeserializeResponse,"DeserializeRes"],[d.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[d.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[d.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[d.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[d.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[d.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[d.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[d.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[d.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[d.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[d.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[d.AcquireTokenByCodeAsync,"ATByCodeAsync"],[d.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[d.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[d.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[d.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[d.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[d.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[d.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[d.NativeGenerateAuthResult,"NtvGenAuthRes"],[d.RemoveHiddenIframe,"RemoveHiddenIframe"],[d.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[d.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[d.GeneratePkceCodes,"GenPkceCodes"],[d.GenerateCodeVerifier,"GenCodeVerifier"],[d.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[d.Sha256Digest,"Sha256Digest"],[d.GetRandomValues,"GetRandomValues"],[d.GenerateHKDF,"genHKDF"],[d.GenerateBaseKey,"genBaseKey"],[d.Base64Decode,"b64Decode"],[d.UrlEncodeArr,"urlEncArr"],[d.Encrypt,"encrypt"],[d.Decrypt,"decrypt"],[d.GenerateEarKey,"genEarKey"],[d.DecryptEarResponse,"decryptEarResp"]]),hC={NotStarted:0,InProgress:1,Completed:2};var ke=(n,e,t,r,o)=>(...i)=>{t.trace(`Executing function ${e}`);let s=r?.startMeasurement(e,o);if(o){let a=e+"CallCount";r?.incrementFields({[a]:1},o)}try{let a=n(...i);return s?.end({success:!0}),t.trace(`Returning result from ${e}`),a}catch(a){t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s?.end({success:!1},a),a}},y=(n,e,t,r,o)=>(...i)=>{t.trace(`Executing function ${e}`);let s=r?.startMeasurement(e,o);if(o){let a=e+"CallCount";r?.incrementFields({[a]:1},o)}return r?.setPreQueueTime(e,o),n(...i).then(a=>(t.trace(`Returning result from ${e}`),s?.end({success:!0}),a)).catch(a=>{t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s?.end({success:!1},a),a})};var AS=(()=>{class n{constructor(t,r,o,i){this.networkInterface=t,this.logger=r,this.performanceClient=o,this.correlationId=i}detectRegion(t,r){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RegionDiscoveryDetectRegion,this.correlationId);let o=t;if(o)r.region_source=Yo.ENVIRONMENT_VARIABLE;else{let i=n.IMDS_OPTIONS;try{let s=yield y(this.getRegionFromIMDS.bind(this),d.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(v.IMDS_VERSION,i);if(s.status===ul.httpSuccess&&(o=s.body,r.region_source=Yo.IMDS),s.status===ul.httpBadRequest){let a=yield y(this.getCurrentVersion.bind(this),d.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!a)return r.region_source=Yo.FAILED_AUTO_DETECTION,null;let c=yield y(this.getRegionFromIMDS.bind(this),d.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a,i);c.status===ul.httpSuccess&&(o=c.body,r.region_source=Yo.IMDS)}}catch{return r.region_source=Yo.FAILED_AUTO_DETECTION,null}}return o||(r.region_source=Yo.FAILED_AUTO_DETECTION),o||null})}getRegionFromIMDS(t,r){return f(this,null,function*(){return this.performanceClient?.addQueueMeasurement(d.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${v.IMDS_ENDPOINT}?api-version=${t}&format=text`,r,v.IMDS_TIMEOUT)})}getCurrentVersion(t){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let r=yield this.networkInterface.sendGetRequestAsync(`${v.IMDS_ENDPOINT}?format=json`,t);return r.status===ul.httpBadRequest&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}})}}return n.IMDS_OPTIONS={headers:{Metadata:"true"}},n})();var $t=class n{constructor(e,t,r,o,i,s,a,c){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=r,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=a,this.correlationId=s,this.managedIdentity=c||!1,this.regionDiscovery=new AS(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(v.CIAM_AUTH_URL))return ut.Ciam;let t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case v.ADFS:return ut.Adfs;case v.DSTS:return ut.Dsts}return ut.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new x(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw C(lt)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw C(lt)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw C(lt)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw C(fi);return this.replacePath(this.metadata.end_session_endpoint)}else throw C(lt)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw C(lt)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw C(lt)}canReplaceTenant(e){return e.PathSegments.length===1&&!n.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===ut.Default&&this.protocolMode!==ge.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e,o=new x(this.metadata.canonical_authority).getUrlComponents(),i=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,c)=>{let l=i[c];if(c===0&&this.canReplaceTenant(o)){let u=new x(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];l!==u&&(this.logger.verbose(`Replacing tenant domain name ${l} with id ${u}`),l=u)}a!==l&&(t=t.replace(`/${l}/`,`/${a}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===ut.Adfs||this.protocolMode===ge.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}resolveEndpointsAsync(){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),t=yield y(this.updateCloudDiscoveryMetadata.bind(this),d.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let r=yield y(this.updateEndpointMetadata.bind(this),d.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:r}),this.performanceClient?.addFields({cloudDiscoverySource:t,authorityEndpointSource:r},this.correlationId)})}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:df(),jwks_uri:""}),e}updateCachedMetadata(e,t,r){t!==ct.CACHE&&r?.source!==ct.CACHE&&(e.expiresAt=df(),e.canonical_authority=this.canonicalAuthority);let o=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(o,e),this.metadata=e}updateEndpointMetadata(e){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityUpdateEndpointMetadata,this.correlationId);let t=this.updateEndpointMetadataFromLocalSources(e);if(t){if(t.source===ct.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&t.metadata){let o=yield y(this.updateMetadataWithRegionalInformation.bind(this),d.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(t.metadata);Us(e,o,!1),e.canonical_authority=this.canonicalAuthority}return t.source}let r=yield y(this.getEndpointMetadataFromNetwork.bind(this),d.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(r=yield y(this.updateMetadataWithRegionalInformation.bind(this),d.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),Us(e,r,!0),ct.NETWORK;throw C(ei,this.defaultOpenIdConfigurationEndpoint)})}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),Us(e,t,!1),{source:ct.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let o=this.getEndpointMetadataFromHardcodedValues();if(o)return Us(e,o,!1),{source:ct.HARDCODED_VALUES,metadata:o};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let r=hf(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:ct.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new x(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw $(Ti)}return null}getEndpointMetadataFromNetwork(){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e={},t=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${t}`);try{let r=yield this.networkInterface.sendGetRequestAsync(t,e);return wS(r.body)?r.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(r){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${r}`),null}})}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in pv?pv[this.hostnameAndPort]:null}updateMetadataWithRegionalInformation(e){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let t=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(t){if(t!==v.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=sf.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=t,n.replaceWithRegionalInformation(e,t);let r=yield y(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),d.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(r)return this.regionDiscoveryMetadata.region_outcome=sf.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=r,n.replaceWithRegionalInformation(e,r);this.regionDiscoveryMetadata.region_outcome=sf.AUTO_DETECTION_REQUESTED_FAILED}return e})}updateCloudDiscoveryMetadata(e){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;let r=yield y(this.getCloudDiscoveryMetadataFromNetwork.bind(this),d.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return Nl(e,r,!0),ct.NETWORK;throw $(wi)})}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||v.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||v.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||v.NOT_APPLICABLE}`);let t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),Nl(e,t,!1),ct.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{let o=IS(this.hostnameAndPort);if(o)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),Nl(e,o,!1),ct.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let r=hf(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),ct.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===ut.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),t=jl(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),t)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),t;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),$(Yr)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}getCloudDiscoveryMetadataFromNetwork(){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${v.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t={},r=null;try{let o=yield this.networkInterface.sendGetRequestAsync(e,t),i,s;if(SS(o.body))i=o.body,s=i.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${i.tenant_discovery_endpoint}`);else if(bS(o.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${o.status}`),i=o.body,i.error===v.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${i.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${i.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),s=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=jl(s,this.hostnameAndPort)}catch(o){if(o instanceof F)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${o.errorCode}
Error Description: ${o.errorMessage}`);else{let i=o;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${i.name}
Error Description: ${i.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r})}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(t=>t&&x.getDomainFromUrl(t).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let r;if(t&&t.azureCloudInstance!==Wr.None){let o=t.tenant?t.tenant:v.DEFAULT_COMMON_TENANT;r=`${t.azureCloudInstance}/${o}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return v.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw C(lt)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return mv.has(e)}static isPublicCloudAuthority(e){return v.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,r){let o=new x(e);o.validateAsUri();let i=o.getUrlComponents(),s=`${t}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(s=`${t}.${v.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let a=x.constructAuthorityUriFromObject(w(m({},o.getUrlComponents()),{HostNameAndPort:s})).urlString;return r?`${a}?${r}`:a}static replaceWithRegionalInformation(e,t){let r=m({},e);return r.authorization_endpoint=n.buildRegionalAuthorityString(r.authorization_endpoint,t),r.token_endpoint=n.buildRegionalAuthorityString(r.token_endpoint,t),r.end_session_endpoint&&(r.end_session_endpoint=n.buildRegionalAuthorityString(r.end_session_endpoint,t)),r}static transformCIAMAuthority(e){let t=e,o=new x(e).getUrlComponents();if(o.PathSegments.length===0&&o.HostNameAndPort.endsWith(v.CIAM_AUTH_URL)){let i=o.HostNameAndPort.split(".")[0];t=`${t}${i}${v.AAD_TENANT_DOMAIN_SUFFIX}`}return t}};$t.reservedTenantDomains=new Set(["{tenant}","{tenantid}",on.COMMON,on.CONSUMERS,on.ORGANIZATIONS]);function DS(n){let r=new x(n).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case on.COMMON:case on.ORGANIZATIONS:case on.CONSUMERS:return;default:return r}}function Tf(n){return n.endsWith(v.FORWARD_SLASH)?n:`${n}${v.FORWARD_SLASH}`}function fC(n){let e=n.cloudDiscoveryMetadata,t;if(e)try{t=JSON.parse(e)}catch{throw $(Yr)}return{canonicalAuthority:n.authority?Tf(n.authority):void 0,knownAuthorities:n.knownAuthorities,cloudDiscoveryMetadata:t}}function pC(n,e,t,r,o,i,s){return f(this,null,function*(){s?.addQueueMeasurement(d.AuthorityFactoryCreateDiscoveredInstance,i);let a=$t.transformCIAMAuthority(Tf(n)),c=new $t(a,e,t,r,o,i,s);try{return yield y(c.resolveEndpointsAsync.bind(c),d.AuthorityResolveEndpointsAsync,o,s,i)(),c}catch{throw C(lt)}})}var Et=class n extends F{constructor(e,t,r,o,i){super(e,t,r),this.name="ServerError",this.errorNo=o,this.status=i,Object.setPrototypeOf(this,n.prototype)}};function fr(n,e,t){return{clientId:n,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:t,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||e.tokenBodyParameters?.clientId}}var pr=class n{static generateThrottlingStorageKey(e){return`${er.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,t){let r=n.generateThrottlingStorageKey(t),o=e.getThrottlingCache(r);if(o){if(o.throttleTime<Date.now()){e.removeItem(r);return}throw new Et(o.errorCodes?.join(" ")||v.EMPTY_STRING,o.errorMessage,o.subError)}}static postProcess(e,t,r){if(n.checkResponseStatus(r)||n.checkResponseForRetryAfter(r)){let o={throttleTime:n.calculateThrottleTime(parseInt(r.headers[Ae.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(n.generateThrottlingStorageKey(t),o)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(Ae.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){let t=e<=0?0:e,r=Date.now()/1e3;return Math.floor(Math.min(r+(t||er.DEFAULT_THROTTLE_TIME_SECONDS),r+er.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,t,r,o){let i=fr(t,r,o),s=this.generateThrottlingStorageKey(i);e.removeItem(s)}};var Vs=class n extends F{constructor(e,t,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,n.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=r}};function Pi(n,e,t,r){return n.errorMessage=`${n.errorMessage}, additionalErrorInfo: error.name:${r?.name}, error.message:${r?.message}`,new Vs(n,e,t)}var Jr=class{constructor(e,t){this.config=_S(e),this.logger=new vt(this.config.loggerOptions,lf,xs),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){let t={};if(t[Ae.CONTENT_TYPE]=v.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case Je.HOME_ACCOUNT_ID:try{let r=Sn(e.credential);t[Ae.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case Je.UPN:t[Ae.CCS_HEADER]=`UPN: ${e.credential}`;break}return t}executePostToTokenEndpoint(e,t,r,o,i,s){return f(this,null,function*(){s&&this.performanceClient?.addQueueMeasurement(s,i);let a=yield this.sendPostRequest(o,e,{body:t,headers:r},i);return this.config.serverTelemetryManager&&a.status<500&&a.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),a})}sendPostRequest(e,t,r,o){return f(this,null,function*(){pr.preProcess(this.cacheManager,e);let i;try{i=yield y(this.networkClient.sendPostRequestAsync.bind(this.networkClient),d.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,o)(t,r);let s=i.headers||{};this.performanceClient?.addFields({refreshTokenSize:i.body.refresh_token?.length||0,httpVerToken:s[Ae.X_MS_HTTP_VERSION]||"",requestId:s[Ae.X_MS_REQUEST_ID]||""},o)}catch(s){if(s instanceof Vs){let a=s.responseHeaders;throw a&&this.performanceClient?.addFields({httpVerToken:a[Ae.X_MS_HTTP_VERSION]||"",requestId:a[Ae.X_MS_REQUEST_ID]||"",contentTypeHeader:a[Ae.CONTENT_TYPE]||void 0,contentLengthHeader:a[Ae.CONTENT_LENGTH]||void 0,httpStatus:s.httpStatus},o),s.error}throw s instanceof F?s:C(Xo)}return pr.postProcess(this.cacheManager,e,i),i})}updateAuthority(e,t){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.UpdateTokenEndpointAuthority,t);let r=`https://${e}/${this.authority.tenant}/`,o=yield pC(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=o})}createTokenQueryParameters(e){let t=new Map;return e.embeddedClientId&&hr(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&dr(t,e.tokenQueryParameters),Ni(t,e.correlationId),Ai(t,e.correlationId,this.performanceClient),bn(t)}};var gr={};Tt(gr,{badToken:()=>eo,consentRequired:()=>mC,interactionRequired:()=>gC,loginRequired:()=>yC,nativeAccountUnavailable:()=>ru,noTokensFound:()=>Xr,refreshTokenExpired:()=>ou});var Xr="no_tokens_found",ru="native_account_unavailable",ou="refresh_token_expired",gC="interaction_required",mC="consent_required",yC="login_required",eo="bad_token";var MS=[gC,mC,yC,eo],Sx=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],Sf={[Xr]:"No refresh token found in the cache. Please sign-in.",[ru]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[ou]:"Refresh token has expired.",[eo]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."},RS={noTokensFoundError:{code:Xr,desc:Sf[Xr]},native_account_unavailable:{code:ru,desc:Sf[ru]},bad_token:{code:eo,desc:Sf[eo]}},$e=class n extends F{constructor(e,t,r,o,i,s,a,c){super(e,t,r),Object.setPrototypeOf(this,n.prototype),this.timestamp=o||v.EMPTY_STRING,this.traceId=i||v.EMPTY_STRING,this.correlationId=s||v.EMPTY_STRING,this.claims=a||v.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}};function bf(n,e,t){let r=!!n&&MS.indexOf(n)>-1,o=!!t&&Sx.indexOf(t)>-1,i=!!e&&MS.some(s=>e.indexOf(s)>-1);return r||i||o}function $s(n){return new $e(n,Sf[n])}var an=class n{static setRequestState(e,t,r){let o=n.generateLibraryState(e,r);return t?`${o}${v.RESOURCE_DELIM}${t}`:o}static generateLibraryState(e,t){if(!e)throw C(qr);let r={id:e.createNewGuid()};t&&(r.meta=t);let o=JSON.stringify(r);return e.base64Encode(o)}static parseRequestState(e,t){if(!e)throw C(qr);if(!t)throw C(sn);try{let r=t.split(v.RESOURCE_DELIM),o=r[0],i=r.length>1?r.slice(1).join(v.RESOURCE_DELIM):v.EMPTY_STRING,s=e.base64Decode(o),a=JSON.parse(s);return{userRequestState:i||v.EMPTY_STRING,libraryState:a}}catch{throw C(sn)}}};var bx={SW:"sw",UHW:"uhw"},It=class{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}generateCnf(e,t){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.PopTokenGenerateCnf,e.correlationId);let r=yield y(this.generateKid.bind(this),d.PopTokenGenerateCnf,t,this.performanceClient,e.correlationId)(e),o=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:o}})}generateKid(e){return f(this,null,function*(){return this.performanceClient?.addQueueMeasurement(d.PopTokenGenerateKid,e.correlationId),{kid:yield this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:bx.SW}})}signPopToken(e,t,r){return f(this,null,function*(){return this.signPayload(e,t,r)})}signPayload(e,t,r,o){return f(this,null,function*(){let{resourceRequestMethod:i,resourceRequestUri:s,shrClaims:a,shrNonce:c,shrOptions:l}=r,h=(s?new x(s):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt(m({at:e,ts:Ot(),m:i?.toUpperCase(),u:h?.HostNameAndPort,nonce:c||this.cryptoUtils.createNewGuid(),p:h?.AbsolutePath,q:h?.QueryString?[[],h.QueryString]:void 0,client_claims:a||void 0},o),t,l,r.correlationId)})}};var Af=class{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}};var cn=class n{constructor(e,t,r,o,i,s,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=r,this.logger=o,this.serializableCache=i,this.persistencePlugin=s,this.performanceClient=a}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){let r=`Error(s): ${e.error_codes||v.NOT_AVAILABLE} - Timestamp: ${e.timestamp||v.NOT_AVAILABLE} - Description: ${e.error_description||v.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||v.NOT_AVAILABLE} - Trace ID: ${e.trace_id||v.NOT_AVAILABLE}`,o=e.error_codes?.length?e.error_codes[0]:void 0,i=new Et(e.error,r,e.suberror,o,e.status);if(t&&e.status&&e.status>=ks.SERVER_ERROR_RANGE_START&&e.status<=ks.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${i}`);return}else if(t&&e.status&&e.status>=ks.CLIENT_ERROR_RANGE_START&&e.status<=ks.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${i}`);return}throw bf(e.error,e.error_description,e.suberror)?new $e(e.error,e.error_description,e.suberror,e.timestamp||v.EMPTY_STRING,e.trace_id||v.EMPTY_STRING,e.correlation_id||v.EMPTY_STRING,e.claims||v.EMPTY_STRING,o):i}}handleServerTokenResponse(e,t,r,o,i,s,a,c,l){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.HandleServerTokenResponse,e.correlation_id);let u;if(e.id_token){if(u=ir(e.id_token||v.EMPTY_STRING,this.cryptoObj.base64Decode),i&&i.nonce&&u.nonce!==i.nonce)throw C(ri);if(o.maxAge||o.maxAge===0){let E=u.auth_time;if(!E)throw C(tr);Ml(E,o.maxAge)}}this.homeAccountIdentifier=Te.generateHomeAccountId(e.client_info||v.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,u);let h;i&&i.state&&(h=an.parseRequestState(this.cryptoObj,i.state)),e.key_id=e.key_id||o.sshKid||void 0;let g=this.generateCacheRecord(e,t,r,o,u,s,i),p;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),p=new Af(this.serializableCache,!0),yield this.persistencePlugin.beforeCacheAccess(p)),a&&!c&&g.account){let E=g.account.generateAccountKey();if(!this.cacheStorage.getAccount(E))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),yield n.generateAuthenticationResult(this.cryptoObj,t,g,!1,o,u,h,void 0,l)}yield this.cacheStorage.saveCacheRecord(g,o.correlationId,o.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&p&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),yield this.persistencePlugin.afterCacheAccess(p))}return n.generateAuthenticationResult(this.cryptoObj,t,g,!1,o,u,h,e,l)})}generateCacheRecord(e,t,r,o,i,s,a){let c=t.getPreferredCache();if(!c)throw C(rr);let l=ff(i),u,h;e.id_token&&i&&(u=lv(this.homeAccountIdentifier,c,e.id_token,this.clientId,l||""),h=Gs(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,i,e.client_info,c,l,a,void 0,this.logger));let g=null;if(e.access_token){let _=e.scope?le.fromString(e.scope):new le(o.scopes||[]),b=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,O=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,Lt=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,se=r+b,ho=se+O,ji=Lt&&Lt>0?r+Lt:void 0;g=uv(this.homeAccountIdentifier,c,e.access_token,this.clientId,l||t.tenant||"",_.printScopes(),se,ho,this.cryptoObj.base64Decode,ji,e.token_type,s,e.key_id,o.claims,o.requestedClaimsHash)}let p=null;if(e.refresh_token){let _;if(e.refresh_token_expires_in){let b=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;_=r+b}p=dv(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,s,_)}let E=null;return e.foci&&(E={clientId:this.clientId,environment:c,familyId:e.foci}),{account:h,idToken:u,accessToken:g,refreshToken:p,appMetadata:E}}static generateAuthenticationResult(e,t,r,o,i,s,a,c,l){return f(this,null,function*(){let u=v.EMPTY_STRING,h=[],g=null,p,E,_=v.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===G.POP&&!i.popKid){let se=new It(e),{secret:ho,keyId:ji}=r.accessToken;if(!ji)throw C(pi);u=yield se.signPopToken(ho,ji,i)}else u=r.accessToken.secret;h=le.fromString(r.accessToken.target).asArray(),g=Rl(r.accessToken.expiresOn),p=Rl(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(E=Rl(r.accessToken.refreshOn))}r.appMetadata&&(_=r.appMetadata.familyId===jr?jr:"");let b=s?.oid||s?.sub||"",O=s?.tid||"";c?.spa_accountid&&r.account&&(r.account.nativeAccountId=c?.spa_accountid);let Lt=r.account?Si(r.account.getAccountInfo(),void 0,s,r.idToken?.secret):null;return{authority:t.canonicalAuthority,uniqueId:b,tenantId:O,scopes:h,account:Lt,idToken:r?.idToken?.secret||"",idTokenClaims:s||{},accessToken:u,fromCache:o,expiresOn:g,extExpiresOn:p,refreshOn:E,correlationId:i.correlationId,requestId:l||v.EMPTY_STRING,familyId:_,tokenType:r.accessToken?.tokenType||v.EMPTY_STRING,state:a?a.userRequestState:v.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||v.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||v.EMPTY_STRING,code:c?.spa_code,fromNativeBroker:!1}})}};function Gs(n,e,t,r,o,i,s,a,c,l,u){u?.verbose("setCachedAccount called");let g=n.getAccountKeys().find(O=>O.startsWith(t)),p=null;g&&(p=n.getAccount(g));let E=p||Te.createAccount({homeAccountId:t,idTokenClaims:o,clientInfo:i,environment:s,cloudGraphHostName:c?.cloud_graph_host_name,msGraphHost:c?.msgraph_host,nativeAccountId:l},e,r),_=E.tenantProfiles||[],b=a||E.realm;if(b&&!_.find(O=>O.tenantId===b)){let O=Bs(t,E.localAccountId,b,o);_.push(O)}return E.tenantProfiles=_,E}var Df=class{static validateRedirectUri(e){if(!e)throw $(gi)}static validatePrompt(e){let t=[];for(let r in he)t.push(he[r]);if(t.indexOf(e)<0)throw $(Ci)}static validateClaims(e){try{JSON.parse(e)}catch{throw $(wn)}}static validateCodeChallengeParams(e,t){if(!e||!t)throw $(sr);this.validateCodeChallengeMethod(t)}static validateCodeChallengeMethod(e){if([tf.PLAIN,tf.S256].indexOf(e)<0)throw $(_i)}};function Mf(n,e,t){return f(this,null,function*(){return typeof n=="string"?n:n({clientId:e,tokenEndpoint:t})})}var xi=class extends Jr{constructor(e,t){super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}acquireToken(e,t){return f(this,null,function*(){if(this.performanceClient?.addQueueMeasurement(d.AuthClientAcquireToken,e.correlationId),!e.code)throw C(si);let r=Ot(),o=yield y(this.executeTokenRequest.bind(this),d.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),i=o.headers?.[Ae.X_MS_REQUEST_ID],s=new cn(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return s.validateTokenResponse(o.body),y(s.handleServerTokenResponse.bind(s),d.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(o.body,this.authority,r,e,t,void 0,void 0,void 0,i)})}getLogoutUri(e){if(!e)throw $(Ii);let t=this.createLogoutUrlQueryString(e);return x.appendQueryString(this.authority.endSessionEndpoint,t)}executeTokenRequest(e,t){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthClientExecuteTokenRequest,t.correlationId);let r=this.createTokenQueryParameters(t),o=x.appendQueryString(e.tokenEndpoint,r),i=yield y(this.createTokenRequestBody.bind(this),d.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,t.correlationId)(t),s;if(t.clientInfo)try{let l=Hs(t.clientInfo,this.cryptoUtils.base64Decode);s={credential:`${l.uid}${Ie.CLIENT_INFO_SEPARATOR}${l.utid}`,type:Je.HOME_ACCOUNT_ID}}catch(l){this.logger.verbose("Could not parse client info for CCS Header: "+l)}let a=this.createTokenRequestHeaders(s||t.ccsCredential),c=fr(this.config.authOptions.clientId,t);return y(this.executePostToTokenEndpoint.bind(this),d.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,t.correlationId)(o,i,a,c,t.correlationId,d.AuthorizationCodeClientExecutePostToTokenEndpoint)})}createTokenRequestBody(e){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthClientCreateTokenRequestBody,e.correlationId);let t=new Map;if(Mi(t,e.embeddedClientId||e.tokenBodyParameters?.[An]||this.config.authOptions.clientId),this.includeRedirectUri?Ri(t,e.redirectUri):Df.validateRedirectUri(e.redirectUri),Di(t,e.scopes,!0,this.oidcDefaultScopes),cC(t,e.code),Gl(t,this.config.libraryInfo),ql(t,this.config.telemetry.application),nu(t),this.serverTelemetryManager&&!mf(this.config)&&tu(t,this.serverTelemetryManager),e.codeVerifier&&uC(t,e.codeVerifier),this.config.clientCredentials.clientSecret&&Wl(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let o=this.config.clientCredentials.clientAssertion;Yl(t,yield Mf(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Ql(t,o.assertionType)}if(Zl(t,cl.AUTHORIZATION_CODE_GRANT),Oi(t),e.authenticationScheme===G.POP){let o=new It(this.cryptoUtils,this.performanceClient),i;e.popKid?i=this.cryptoUtils.encodeKid(e.popKid):i=(yield y(o.generateCnf.bind(o),d.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,Xl(t,i)}else if(e.authenticationScheme===G.SSH)if(e.sshJwk)eu(t,e.sshJwk);else throw $(ar);(!_e.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&ki(t,e.claims,this.config.authOptions.clientCapabilities);let r;if(e.clientInfo)try{let o=Hs(e.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${o.uid}${Ie.CLIENT_INFO_SEPARATOR}${o.utid}`,type:Je.HOME_ACCOUNT_ID}}catch(o){this.logger.verbose("Could not parse client info for CCS Header: "+o)}else r=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case Je.HOME_ACCOUNT_ID:try{let o=Sn(r.credential);ur(t,o)}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case Je.UPN:Zr(t,r.credential);break}return e.embeddedClientId&&hr(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&dr(t,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[Ef])&&dr(t,{[Ef]:"1"}),Ai(t,e.correlationId,this.performanceClient),bn(t)})}createLogoutUrlQueryString(e){let t=new Map;return e.postLogoutRedirectUri&&rC(t,e.postLogoutRedirectUri),e.correlationId&&Ni(t,e.correlationId),e.idTokenHint&&oC(t,e.idTokenHint),e.state&&Kl(t,e.state),e.logoutHint&&dC(t,e.logoutHint),e.extraQueryParameters&&dr(t,e.extraQueryParameters),this.config.authOptions.instanceAware&&Jl(t),bn(t,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}};var Ax=300,iu=class extends Jr{constructor(e,t){super(e,t)}acquireToken(e){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientAcquireToken,e.correlationId);let t=Ot(),r=yield y(this.executeTokenRequest.bind(this),d.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),o=r.headers?.[Ae.X_MS_REQUEST_ID],i=new cn(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(r.body),y(i.handleServerTokenResponse.bind(i),d.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,o)})}acquireTokenByRefreshToken(e){return f(this,null,function*(){if(!e)throw $(Ei);if(this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw C(nr);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return yield y(this.acquireTokenWithCachedRefreshToken.bind(this),d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(r){let o=r instanceof $e&&r.errorCode===Xr,i=r instanceof Et&&r.errorCode===rf.INVALID_GRANT_ERROR&&r.subError===rf.CLIENT_MISMATCH_ERROR;if(o||i)return y(this.acquireTokenWithCachedRefreshToken.bind(this),d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw r}return y(this.acquireTokenWithCachedRefreshToken.bind(this),d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)})}acquireTokenWithCachedRefreshToken(e,t){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let r=ke(this.cacheManager.getRefreshToken.bind(this.cacheManager),d.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,t,void 0,this.performanceClient,e.correlationId);if(!r)throw $s(Xr);if(r.expiresOn&&Fs(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||Ax))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),$s(ou);let o=w(m({},e),{refreshToken:r.secret,authenticationScheme:e.authenticationScheme||G.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:Je.HOME_ACCOUNT_ID}});try{return yield y(this.acquireToken.bind(this),d.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(o)}catch(i){if(i instanceof $e&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),i.subError===eo)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let s=kl(r);this.cacheManager.removeRefreshToken(s)}throw i}})}executeTokenRequest(e,t){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientExecuteTokenRequest,e.correlationId);let r=this.createTokenQueryParameters(e),o=x.appendQueryString(t.tokenEndpoint,r),i=yield y(this.createTokenRequestBody.bind(this),d.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),s=this.createTokenRequestHeaders(e.ccsCredential),a=fr(this.config.authOptions.clientId,e);return y(this.executePostToTokenEndpoint.bind(this),d.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(o,i,s,a,e.correlationId,d.RefreshTokenClientExecutePostToTokenEndpoint)})}createTokenRequestBody(e){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let t=new Map;if(Mi(t,e.embeddedClientId||e.tokenBodyParameters?.[An]||this.config.authOptions.clientId),e.redirectUri&&Ri(t,e.redirectUri),Di(t,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),Zl(t,cl.REFRESH_TOKEN_GRANT),Oi(t),Gl(t,this.config.libraryInfo),ql(t,this.config.telemetry.application),nu(t),this.serverTelemetryManager&&!mf(this.config)&&tu(t,this.serverTelemetryManager),lC(t,e.refreshToken),this.config.clientCredentials.clientSecret&&Wl(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let r=this.config.clientCredentials.clientAssertion;Yl(t,yield Mf(r.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Ql(t,r.assertionType)}if(e.authenticationScheme===G.POP){let r=new It(this.cryptoUtils,this.performanceClient),o;e.popKid?o=this.cryptoUtils.encodeKid(e.popKid):o=(yield y(r.generateCnf.bind(r),d.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,Xl(t,o)}else if(e.authenticationScheme===G.SSH)if(e.sshJwk)eu(t,e.sshJwk);else throw $(ar);if((!_e.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&ki(t,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case Je.HOME_ACCOUNT_ID:try{let r=Sn(e.ccsCredential.credential);ur(t,r)}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case Je.UPN:Zr(t,e.ccsCredential.credential);break}return e.embeddedClientId&&hr(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&dr(t,e.tokenBodyParameters),Ai(t,e.correlationId,this.performanceClient),bn(t)})}};var su=class extends Jr{constructor(e,t){super(e,t)}acquireCachedToken(e){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.SilentFlowClientAcquireCachedToken,e.correlationId);let t=_n.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!_e.isEmptyObj(e.claims))throw this.setCacheOutcome(_n.FORCE_REFRESH_OR_CLAIMS,e.correlationId),C(or);if(!e.account)throw C(nr);let r=e.account.tenantId||DS(e.authority),o=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,o,r,this.performanceClient,e.correlationId);if(i){if(cv(i.cachedAt)||Fs(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(_n.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),C(or);i.refreshOn&&Fs(i.refreshOn,0)&&(t=_n.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(_n.NO_CACHED_ACCESS_TOKEN,e.correlationId),C(or);let s=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.readAccountFromCache(e.account),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,o,r,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(s)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[yield y(this.generateResultFromCacheRecord.bind(this),d.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(a,e),t]})}setCacheOutcome(e,t){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},t),e!==_n.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}generateResultFromCacheRecord(e,t){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.SilentFlowClientGenerateResultFromCacheRecord,t.correlationId);let r;if(e.idToken&&(r=ir(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||t.maxAge===0){let o=r?.auth_time;if(!o)throw C(tr);Ml(o,t.maxAge)}return cn.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,r)})}};var vC={sendGetRequestAsync:()=>Promise.reject(C(V)),sendPostRequestAsync:()=>Promise.reject(C(V))};var mr={};Tt(mr,{getAuthorizationCodePayload:()=>Rx,getAuthorizeUrl:()=>Mx,getStandardAuthorizeRequestParameters:()=>Dx,validateAuthorizationResponse:()=>kS});function Dx(n,e,t,r){let o=e.correlationId,i=new Map;Mi(i,e.embeddedClientId||e.extraQueryParameters?.[An]||n.clientId);let s=[...e.scopes||[],...e.extraScopesToConsent||[]];if(Di(i,s,!0,n.authority.options.OIDCOptions?.defaultScopes),Ri(i,e.redirectUri),Ni(i,o),nC(i,e.responseMode),Oi(i),e.prompt&&(sC(i,e.prompt),r?.addFields({prompt:e.prompt},o)),e.domainHint&&(iC(i,e.domainHint),r?.addFields({domainHintFromRequest:!0},o)),e.prompt!==he.SELECT_ACCOUNT)if(e.sid&&e.prompt===he.NONE)t.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),_f(i,e.sid),r?.addFields({sidFromRequest:!0},o);else if(e.account){let a=Nx(e.account),c=Ox(e.account);if(c&&e.domainHint&&(t.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),c=null),c){t.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),zs(i,c),r?.addFields({loginHintFromClaim:!0},o);try{let l=Sn(e.account.homeAccountId);ur(i,l)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(a&&e.prompt===he.NONE){t.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),_f(i,a),r?.addFields({sidFromClaim:!0},o);try{let l=Sn(e.account.homeAccountId);ur(i,l)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)t.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),zs(i,e.loginHint),Zr(i,e.loginHint),r?.addFields({loginHintFromRequest:!0},o);else if(e.account.username){t.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),zs(i,e.account.username),r?.addFields({loginHintFromUpn:!0},o);try{let l=Sn(e.account.homeAccountId);ur(i,l)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(t.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),zs(i,e.loginHint),Zr(i,e.loginHint),r?.addFields({loginHintFromRequest:!0},o));else t.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&aC(i,e.nonce),e.state&&Kl(i,e.state),(e.claims||n.clientCapabilities&&n.clientCapabilities.length>0)&&ki(i,e.claims,n.clientCapabilities),e.embeddedClientId&&hr(i,n.clientId,n.redirectUri),n.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(js))&&Jl(i),i}function Mx(n,e,t,r){let o=bn(e,t,r);return x.appendQueryString(n.authorizationEndpoint,o)}function Rx(n,e){if(kS(n,e),!n.code)throw C(di);return n}function kS(n,e){if(!n.state||!e)throw n.state?C($r,"Cached State"):C($r,"Server State");let t,r;try{t=decodeURIComponent(n.state)}catch{throw C(sn,n.state)}try{r=decodeURIComponent(e)}catch{throw C(sn,n.state)}if(t!==r)throw C(ni);if(n.error||n.error_description||n.suberror){let o=kx(n);throw bf(n.error,n.error_description,n.suberror)?new $e(n.error||"",n.error_description,n.suberror,n.timestamp||"",n.trace_id||"",n.correlation_id||"",n.claims||"",o):new Et(n.error||"",n.error_description,n.suberror,o)}}function kx(n){let e="code=",t=n.error_uri?.lastIndexOf(e);return t&&t>=0?n.error_uri?.substring(t+e.length):void 0}function Nx(n){return n.idTokenClaims?.sid||null}function Ox(n){return n.idTokenClaims?.login_hint||null}var NS=",",OS="|";function Px(n){let{skus:e,libraryName:t,libraryVersion:r,extensionName:o,extensionVersion:i}=n,s=new Map([[0,[t,r]],[2,[o,i]]]),a=[];if(e?.length){if(a=e.split(NS),a.length<4)return e}else a=Array.from({length:4},()=>OS);return s.forEach((c,l)=>{c.length===2&&c[0]?.length&&c[1]?.length&&xx({skuArr:a,index:l,skuName:c[0],skuVersion:c[1]})}),a.join(NS)}function xx(n){let{skuArr:e,index:t,skuName:r,skuVersion:o}=n;t>=e.length||(e[t]=[r,o].join(OS))}var Li=class n{constructor(e,t){this.cacheOutcome=_n.NOT_APPLICABLE,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||v.EMPTY_STRING,this.wrapperVer=e.wrapperVer||v.EMPTY_STRING,this.telemetryCacheKey=Ue.CACHE_KEY+Ie.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${Ue.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&t.push(`broker_error=${r}`);let o=t.join(Ue.VALUE_SEPARATOR),i=this.getRegionDiscoveryFields(),s=[e,i].join(Ue.VALUE_SEPARATOR);return[Ue.SCHEMA_VERSION,s,o].join(Ue.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),t=n.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*t).join(Ue.VALUE_SEPARATOR),o=e.errors.slice(0,t).join(Ue.VALUE_SEPARATOR),i=e.errors.length,s=t<i?Ue.OVERFLOW_TRUE:Ue.OVERFLOW_FALSE,a=[i,s].join(Ue.VALUE_SEPARATOR);return[Ue.SCHEMA_VERSION,e.cacheHits,r,o,a].join(Ue.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let t=this.getLastRequests();t.errors.length>=Ue.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof F?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(Ue.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){let e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){let e=this.getLastRequests(),t=n.maxErrorsToSend(e),r=e.errors.length;if(t===r)this.cacheManager.removeItem(this.telemetryCacheKey);else{let o={failedRequests:e.failedRequests.slice(t*2),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o)}}static maxErrorsToSend(e){let t,r=0,o=0,i=e.errors.length;for(t=0;t<i;t++){let s=e.failedRequests[2*t]||v.EMPTY_STRING,a=e.failedRequests[2*t+1]||v.EMPTY_STRING,c=e.errors[t]||v.EMPTY_STRING;if(o+=s.toString().length+a.toString().length+c.length+3,o<Ue.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||v.EMPTY_STRING),e.push(this.regionSource||v.EMPTY_STRING),e.push(this.regionOutcome||v.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}static makeExtraSkuString(e){return Px(e)}};var Rf="missing_kid_error",kf="missing_alg_error";var Lx={[Rf]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[kf]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."},CC=class n extends F{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,n.prototype)}};function EC(n){return new CC(n,Lx[n])}var au=class n{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw EC(Rf);if(!e.alg)throw EC(kf);let t=new n({typ:e.typ||af.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(t)}};var Nf=class{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}},qs=class{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:hC.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new Nf}}startPerformanceMeasurement(){return new Nf}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}};var Fi="pkce_not_created",cu="ear_jwk_empty",Of="ear_jwe_empty",Ui="crypto_nonexistent",Dn="empty_navigate_uri",Ks="hash_empty_error",to="no_state_in_hash",Ws="hash_does_not_contain_known_properties",Ys="unable_to_parse_state",Qs="state_interaction_type_mismatch",Zs="interaction_in_progress",Js="popup_window_error",Xs="empty_window_error",ln="user_cancelled",Pf="monitor_popup_timeout",ea="monitor_window_timeout",ta="redirect_in_iframe",na="block_iframe_reload",ra="block_nested_popups",xf="iframe_closed_prematurely",Mn="silent_logout_unsupported",oa="no_account_error",Lf="silent_prompt_value_error",ia="no_token_request_cache_error",sa="unable_to_parse_token_request_cache_error",Ff="auth_request_not_set_error",Uf="invalid_cache_type",Rn="non_browser_environment",kn="database_not_open",yr="no_network_connectivity",aa="post_request_failed",ca="get_request_failed",Hi="failed_to_parse_response",la="unable_to_load_token",no="crypto_key_not_found",ua="auth_code_required",da="auth_code_or_nativeAccountId_required",ha="spa_code_and_nativeAccountId_present",ro="database_unavailable",fa="unable_to_acquire_token_from_native_platform",pa="native_handshake_timeout",ga="native_extension_not_installed",oo="native_connection_not_established",vr="uninitialized_public_client_application",ma="native_prompt_not_supported",ya="invalid_base64_string",va="invalid_pop_token_request",Hf="failed_to_build_headers",Bf="failed_to_parse_headers",Ca="failed_to_decrypt_ear_response";var Cr="For more visit: aka.ms/msaljs/browser-errors",L={[Fi]:"The PKCE code challenge and verifier could not be generated.",[cu]:"No EAR encryption key provided. This is unexpected.",[Of]:"Server response does not contain ear_jwe property. This is unexpected.",[Ui]:"The crypto object or function is not available.",[Dn]:"Navigation URI is empty. Please check stack trace for more info.",[Ks]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${Cr}`,[to]:"Hash does not contain state. Please verify that the request originated from msal.",[Ws]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${Cr}`,[Ys]:"Unable to parse state. Please verify that the request originated from msal.",[Qs]:"Hash contains state but the interaction type does not match the caller.",[Zs]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${Cr}`,[Js]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[Xs]:"window.open returned null or undefined window object.",[ln]:"User cancelled the flow.",[Pf]:`Token acquisition in popup failed due to timeout.  ${Cr}`,[ea]:`Token acquisition in iframe failed due to timeout.  ${Cr}`,[ta]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[na]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${Cr}`,[ra]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[xf]:"The iframe being monitored was closed prematurely.",[Mn]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[oa]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[Lf]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[ia]:"No token request found in cache.",[sa]:"The cached token request could not be parsed.",[Ff]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[Uf]:"Invalid cache type",[Rn]:"Login and token requests are not supported in non-browser environments.",[kn]:"Database is not open!",[yr]:"No network connectivity. Check your internet connection.",[aa]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[ca]:"Network request failed. Please check the network trace to determine root cause.",[Hi]:"Failed to parse network response. Check network trace.",[la]:"Error loading token to cache.",[no]:"Cryptographic Key or Keypair not found in browser storage.",[ua]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[da]:"An authorization code or nativeAccountId must be provided to this flow.",[ha]:"Request cannot contain both spa code and native account id.",[ro]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[fa]:`Unable to acquire token from native platform.  ${Cr}`,[pa]:"Timed out while attempting to establish connection to browser extension",[ga]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[oo]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${Cr}`,[vr]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${Cr}`,[ma]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[ya]:"Invalid base64 encoded string.",[va]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[Hf]:"Failed to build request headers object.",[Bf]:"Failed to parse response headers",[Ca]:"Failed to decrypt ear response"},g9={pkceNotGenerated:{code:Fi,desc:L[Fi]},cryptoDoesNotExist:{code:Ui,desc:L[Ui]},emptyNavigateUriError:{code:Dn,desc:L[Dn]},hashEmptyError:{code:Ks,desc:L[Ks]},hashDoesNotContainStateError:{code:to,desc:L[to]},hashDoesNotContainKnownPropertiesError:{code:Ws,desc:L[Ws]},unableToParseStateError:{code:Ys,desc:L[Ys]},stateInteractionTypeMismatchError:{code:Qs,desc:L[Qs]},interactionInProgress:{code:Zs,desc:L[Zs]},popupWindowError:{code:Js,desc:L[Js]},emptyWindowError:{code:Xs,desc:L[Xs]},userCancelledError:{code:ln,desc:L[ln]},monitorPopupTimeoutError:{code:Pf,desc:L[Pf]},monitorIframeTimeoutError:{code:ea,desc:L[ea]},redirectInIframeError:{code:ta,desc:L[ta]},blockTokenRequestsInHiddenIframeError:{code:na,desc:L[na]},blockAcquireTokenInPopupsError:{code:ra,desc:L[ra]},iframeClosedPrematurelyError:{code:xf,desc:L[xf]},silentLogoutUnsupportedError:{code:Mn,desc:L[Mn]},noAccountError:{code:oa,desc:L[oa]},silentPromptValueError:{code:Lf,desc:L[Lf]},noTokenRequestCacheError:{code:ia,desc:L[ia]},unableToParseTokenRequestCacheError:{code:sa,desc:L[sa]},authRequestNotSet:{code:Ff,desc:L[Ff]},invalidCacheType:{code:Uf,desc:L[Uf]},notInBrowserEnvironment:{code:Rn,desc:L[Rn]},databaseNotOpen:{code:kn,desc:L[kn]},noNetworkConnectivity:{code:yr,desc:L[yr]},postRequestFailed:{code:aa,desc:L[aa]},getRequestFailed:{code:ca,desc:L[ca]},failedToParseNetworkResponse:{code:Hi,desc:L[Hi]},unableToLoadTokenError:{code:la,desc:L[la]},signingKeyNotFoundInStorage:{code:no,desc:L[no]},authCodeRequired:{code:ua,desc:L[ua]},authCodeOrNativeAccountRequired:{code:da,desc:L[da]},spaCodeAndNativeAccountPresent:{code:ha,desc:L[ha]},databaseUnavailable:{code:ro,desc:L[ro]},unableToAcquireTokenFromNativePlatform:{code:fa,desc:L[fa]},nativeHandshakeTimeout:{code:pa,desc:L[pa]},nativeExtensionNotInstalled:{code:ga,desc:L[ga]},nativeConnectionNotEstablished:{code:oo,desc:L[oo]},uninitializedPublicClientApplication:{code:vr,desc:L[vr]},nativePromptNotSupported:{code:ma,desc:L[ma]},invalidBase64StringError:{code:ya,desc:L[ya]},invalidPopTokenRequest:{code:va,desc:L[va]}},Bi=class n extends F{constructor(e,t){super(e,L[e],t),Object.setPrototypeOf(this,n.prototype),this.name="BrowserAuthError"}};function T(n,e){return new Bi(n,e)}var me={INTERACTION_IN_PROGRESS_VALUE:"interaction_in_progress",INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},io={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS"},Er={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},ye={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},IC={GET:"GET",POST:"POST"},un={SIGNIN:"signin",SIGNOUT:"signout"},ve={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},dn={ACCOUNT_KEYS:"msal.account.keys",TOKEN_KEYS:"msal.token.keys"},lu={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},X={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962},D=function(n){return n.Redirect="redirect",n.Popup="popup",n.Silent="silent",n.None="none",n}(D||{}),Ne={Startup:"startup",Login:"login",Logout:"logout",AcquireToken:"acquireToken",SsoSilent:"ssoSilent",HandleRedirect:"handleRedirect",None:"none"},_C={scopes:rn},TC="jwk",wC={React:"@azure/msal-react",Angular:"@azure/msal-angular"},jf="msal.db",PS=1,xS=`${jf}.keys`,Ge={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},LS=[Ge.Default,Ge.Skip,Ge.RefreshTokenAndNetwork],FS="msal.browser.log.level",US="msal.browser.log.pii";function uu(n){return encodeURIComponent(so(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Gt(n){return HS(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function so(n){return HS(new TextEncoder().encode(n))}function HS(n){let e=Array.from(n,t=>String.fromCodePoint(t)).join("");return btoa(e)}function Xe(n){return new TextDecoder().decode(Nn(n))}function Nn(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw T(ya)}let t=atob(e);return Uint8Array.from(t,r=>r.codePointAt(0)||0)}var Fx="RSASSA-PKCS1-v1_5",Ea="AES-GCM",zS="HKDF",bC="SHA-256",Ux=2048,Hx=new Uint8Array([1,0,1]),BS="0123456789abcdef",jS=new Uint32Array(1),AC="raw",VS="encrypt",DC="decrypt",Bx="deriveKey",jx="crypto_subtle_undefined",MC={name:Fx,hash:bC,modulusLength:Ux,publicExponent:Hx};function $S(n){if(!window)throw T(Rn);if(!window.crypto)throw T(Ui);if(!n&&!window.crypto.subtle)throw T(Ui,jx)}function RC(n,e,t){return f(this,null,function*(){e?.addQueueMeasurement(d.Sha256Digest,t);let o=new TextEncoder().encode(n);return window.crypto.subtle.digest(bC,o)})}function GS(n){return window.crypto.getRandomValues(n)}function SC(){return window.crypto.getRandomValues(jS),jS[0]}function He(){let n=Date.now(),e=SC()*1024+(SC()&1023),t=new Uint8Array(16),r=Math.trunc(e/2**30),o=e&2**30-1,i=SC();t[0]=n/2**40,t[1]=n/2**32,t[2]=n/2**24,t[3]=n/2**16,t[4]=n/2**8,t[5]=n,t[6]=112|r>>>8,t[7]=r,t[8]=128|o>>>24,t[9]=o>>>16,t[10]=o>>>8,t[11]=o,t[12]=i>>>24,t[13]=i>>>16,t[14]=i>>>8,t[15]=i;let s="";for(let a=0;a<t.length;a++)s+=BS.charAt(t[a]>>>4),s+=BS.charAt(t[a]&15),(a===3||a===5||a===7||a===9)&&(s+="-");return s}function qS(n,e){return f(this,null,function*(){return window.crypto.subtle.generateKey(MC,n,e)})}function zf(n){return f(this,null,function*(){return window.crypto.subtle.exportKey(TC,n)})}function KS(n,e,t){return f(this,null,function*(){return window.crypto.subtle.importKey(TC,n,MC,e,t)})}function WS(n,e){return f(this,null,function*(){return window.crypto.subtle.sign(MC,n,e)})}function Ia(){return f(this,null,function*(){let n=yield kC(),t={alg:"dir",kty:"oct",k:Gt(new Uint8Array(n))};return so(JSON.stringify(t))})}function zx(n){return f(this,null,function*(){let e=Xe(n),r=JSON.parse(e).k,o=Nn(r);return window.crypto.subtle.importKey(AC,o,Ea,!1,[DC])})}function YS(n,e){return f(this,null,function*(){let t=e.split(".");if(t.length!==5)throw T(Ca,"jwe_length");let r=yield zx(n).catch(()=>{throw T(Ca,"import_key")});try{let o=new TextEncoder().encode(t[0]),i=Nn(t[2]),s=Nn(t[3]),a=Nn(t[4]),c=a.byteLength*8,l=new Uint8Array(s.length+a.length);l.set(s),l.set(a,s.length);let u=yield window.crypto.subtle.decrypt({name:Ea,iv:i,tagLength:c,additionalData:o},r,l);return new TextDecoder().decode(u)}catch{throw T(Ca,"decrypt")}})}function kC(){return f(this,null,function*(){let n=yield window.crypto.subtle.generateKey({name:Ea,length:256},!0,[VS,DC]);return window.crypto.subtle.exportKey(AC,n)})}function NC(n){return f(this,null,function*(){return window.crypto.subtle.importKey(AC,n,zS,!1,[Bx])})}function QS(n,e,t){return f(this,null,function*(){return window.crypto.subtle.deriveKey({name:zS,salt:e,hash:bC,info:new TextEncoder().encode(t)},n,{name:Ea,length:256},!1,[VS,DC])})}function ZS(n,e,t){return f(this,null,function*(){let r=new TextEncoder().encode(e),o=window.crypto.getRandomValues(new Uint8Array(16)),i=yield QS(n,o,t),s=yield window.crypto.subtle.encrypt({name:Ea,iv:new Uint8Array(12)},i,r);return{data:Gt(new Uint8Array(s)),nonce:Gt(o)}})}function JS(n,e,t,r){return f(this,null,function*(){let o=Nn(r),i=yield QS(n,Nn(e),t),s=yield window.crypto.subtle.decrypt({name:Ea,iv:new Uint8Array(12)},i,o);return new TextDecoder().decode(s)})}function Vf(n){return f(this,null,function*(){let e=yield RC(n),t=new Uint8Array(e);return Gt(t)})}var ao="storage_not_supported",$f="stubbed_public_client_application_called",_a="in_mem_redirect_unavailable";var Gf={[ao]:"Given storage configuration option was not supported.",[$f]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[_a]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."},Vx={storageNotSupportedError:{code:ao,desc:Gf[ao]},stubPcaInstanceCalled:{code:$f,desc:Gf[$f]},inMemRedirectUnavailable:{code:_a,desc:Gf[_a]}},Ta=class n extends F{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,n.prototype)}};function wa(n){return new Ta(n,Gf[n])}function du(n){n.location.hash="",typeof n.history.replaceState=="function"&&n.history.replaceState(null,"",`${n.location.origin}${n.location.pathname}${n.location.search}`)}function OC(n){let e=n.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function hu(){return window.parent!==window}function XS(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${me.POPUP_NAME_PREFIX}.`)===0}function dt(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function PC(){let e=new x(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function eb(){if(x.hashContainsKnownProperties(window.location.hash)&&hu())throw T(na)}function tb(n){if(hu()&&!n)throw T(ta)}function nb(){if(XS())throw T(ra)}function qf(){if(typeof window>"u")throw T(Rn)}function Kf(n){if(!n)throw T(vr)}function fu(n){qf(),eb(),nb(),Kf(n)}function Wf(n,e){if(fu(n),tb(e.system.allowRedirectInIframe),e.cache.cacheLocation===ye.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw wa(_a)}function pu(n){let e=document.createElement("link");e.rel="preconnect",e.href=new URL(n).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function xC(){return He()}var gu=class n{navigateInternal(e,t){return n.defaultNavigateWindow(e,t)}navigateExternal(e,t){return n.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise(r=>{setTimeout(()=>{r(!0)},t.timeout)})}};var Qf=class{sendGetRequestAsync(e,t){return f(this,null,function*(){let r,o={},i=0,s=rb(t);try{r=yield fetch(e,{method:IC.GET,headers:s})}catch(a){throw Pi(T(window.navigator.onLine?ca:yr),void 0,void 0,a)}o=ob(r.headers);try{return i=r.status,{headers:o,body:yield r.json(),status:i}}catch(a){throw Pi(T(Hi),i,o,a)}})}sendPostRequestAsync(e,t){return f(this,null,function*(){let r=t&&t.body||"",o=rb(t),i,s=0,a={};try{i=yield fetch(e,{method:IC.POST,headers:o,body:r})}catch(c){throw Pi(T(window.navigator.onLine?aa:yr),void 0,void 0,c)}a=ob(i.headers);try{return s=i.status,{headers:a,body:yield i.json(),status:s}}catch(c){throw Pi(T(Hi),s,a,c)}})}};function rb(n){try{let e=new Headers;if(!(n&&n.headers))return e;let t=n.headers;return Object.entries(t).forEach(([r,o])=>{e.append(r,o)}),e}catch(e){throw Pi(T(Hf),void 0,void 0,e)}}function ob(n){try{let e={};return n.forEach((t,r)=>{e[r]=t}),e}catch{throw T(Bf)}}var $x=6e4,Zf=1e4,Gx=3e4,qx=2e3;function ib({auth:n,cache:e,system:t,telemetry:r},o){let i={clientId:v.EMPTY_STRING,authority:`${v.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:v.EMPTY_STRING,authorityMetadata:v.EMPTY_STRING,redirectUri:typeof window<"u"?dt():"",postLogoutRedirectUri:v.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:ge.AAD,OIDCOptions:{serverResponseType:In.FRAGMENT,defaultScopes:[v.OPENID_SCOPE,v.PROFILE_SCOPE,v.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:Wr.None,tenant:v.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},s={cacheLocation:ye.SessionStorage,temporaryCacheLocation:ye.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===ye.LocalStorage),claimsBasedCachingEnabled:!1},a={loggerCallback:()=>{},logLevel:re.Info,piiLoggingEnabled:!1},c=w(m({},gf),{loggerOptions:a,networkClient:o?new Qf:vC,navigationClient:new gu,loadFrameTimeout:0,windowHashTimeout:t?.loadFrameTimeout||$x,iframeHashTimeout:t?.loadFrameTimeout||Zf,navigateFrameWait:0,redirectNavigationTimeout:Gx,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:t?.nativeBrokerHandshakeTimeout||qx,pollIntervalMilliseconds:me.DEFAULT_POLL_INTERVAL_MS}),l=w(m(m({},c),t),{loggerOptions:t?.loggerOptions||a}),u={application:{appName:v.EMPTY_STRING,appVersion:v.EMPTY_STRING},client:new qs};if(n?.protocolMode!==ge.OIDC&&n?.OIDCOptions&&new vt(l.loggerOptions).warning(JSON.stringify($(Pt.cannotSetOIDCOptions))),n?.protocolMode&&n.protocolMode===ge.OIDC&&l?.allowPlatformBroker)throw $(Pt.cannotAllowPlatformBroker);return{auth:w(m(m({},i),n),{OIDCOptions:m(m({},i.OIDCOptions),n?.OIDCOptions)}),cache:m(m({},s),e),system:l,telemetry:m(m({},u),r)}}var sb="@azure/msal-browser",On="4.12.0";var Jf=class n{static loggerCallback(e,t){switch(e){case re.Error:console.error(t);return;case re.Info:console.info(t);return;case re.Verbose:console.debug(t);return;case re.Warning:console.warn(t);return;default:console.log(t);return}}constructor(e){this.browserEnvironment=typeof window<"u",this.config=ib(e,this.browserEnvironment);let t;try{t=window[ye.SessionStorage]}catch{}let r=t?.getItem(FS),o=t?.getItem(US)?.toLowerCase(),i=o==="true"?!0:o==="false"?!1:void 0,s=m({},this.config.system.loggerOptions),a=r&&Object.keys(re).includes(r)?re[r]:void 0;a&&(s.loggerCallback=n.loggerCallback,s.logLevel=a),i!==void 0&&(s.piiLoggingEnabled=i),this.logger=new vt(s,sb,On),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}};var Xf=(()=>{class n extends Jf{getModuleName(){return n.MODULE_NAME}getId(){return n.ID}initialize(){return f(this,null,function*(){return this.available=typeof window<"u",this.available})}}return n.MODULE_NAME="",n.ID="StandardOperatingContext",n})();var ep=class{constructor(){this.dbName=jf,this.version=PS,this.tableName=xS,this.dbOpen=!1}open(){return f(this,null,function*(){return new Promise((e,t)=>{let r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",o=>{o.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",o=>{let i=o;this.db=i.target.result,this.dbOpen=!0,e()}),r.addEventListener("error",()=>t(T(ro)))})})}closeConnection(){let e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}validateDbIsOpen(){return f(this,null,function*(){if(!this.dbOpen)return this.open()})}getItem(e){return f(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(T(kn));let s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);s.addEventListener("success",a=>{let c=a;this.closeConnection(),t(c.target.result)}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})})}setItem(e,t){return f(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((r,o)=>{if(!this.db)return o(T(kn));let a=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);a.addEventListener("success",()=>{this.closeConnection(),r()}),a.addEventListener("error",c=>{this.closeConnection(),o(c)})})})}removeItem(e){return f(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(T(kn));let s=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);s.addEventListener("success",()=>{this.closeConnection(),t()}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})})}getKeys(){return f(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((e,t)=>{if(!this.db)return t(T(kn));let i=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();i.addEventListener("success",s=>{let a=s;this.closeConnection(),e(a.target.result)}),i.addEventListener("error",s=>{this.closeConnection(),t(s)})})})}containsKey(e){return f(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(T(kn));let s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);s.addEventListener("success",a=>{let c=a;this.closeConnection(),t(c.target.result===1)}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})})}deleteDatabase(){return f(this,null,function*(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,t)=>{let r=window.indexedDB.deleteDatabase(jf),o=setTimeout(()=>t(!1),200);r.addEventListener("success",()=>(clearTimeout(o),e(!0))),r.addEventListener("blocked",()=>(clearTimeout(o),e(!0))),r.addEventListener("error",()=>(clearTimeout(o),t(!1)))})})}};var Ir=class{constructor(){this.cache=new Map}initialize(){return f(this,null,function*(){})}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,t){this.cache.set(e,t)}setUserData(e,t){return f(this,null,function*(){this.setItem(e,t)})}removeItem(e){this.cache.delete(e)}getKeys(){let e=[];return this.cache.forEach((t,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}};var tp=class{constructor(e){this.inMemoryCache=new Ir,this.indexedDBCache=new ep,this.logger=e}handleDatabaseAccessError(e){if(e instanceof Bi&&e.errorCode===ro)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}getItem(e){return f(this,null,function*(){let t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),yield this.indexedDBCache.getItem(e)}catch(r){this.handleDatabaseAccessError(r)}return t})}setItem(e,t){return f(this,null,function*(){this.inMemoryCache.setItem(e,t);try{yield this.indexedDBCache.setItem(e,t)}catch(r){this.handleDatabaseAccessError(r)}})}removeItem(e){return f(this,null,function*(){this.inMemoryCache.removeItem(e);try{yield this.indexedDBCache.removeItem(e)}catch(t){this.handleDatabaseAccessError(t)}})}getKeys(){return f(this,null,function*(){let e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),yield this.indexedDBCache.getKeys()}catch(t){this.handleDatabaseAccessError(t)}return e})}containsKey(e){return f(this,null,function*(){let t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),yield this.indexedDBCache.containsKey(e)}catch(r){this.handleDatabaseAccessError(r)}return t})}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}clearPersistent(){return f(this,null,function*(){try{this.logger.verbose("Deleting persistent keystore");let e=yield this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}})}};var Sa=(()=>{class n{constructor(t,r,o){this.logger=t,$S(o??!1),this.cache=new tp(this.logger),this.performanceClient=r}createNewGuid(){return He()}base64Encode(t){return so(t)}base64Decode(t){return Xe(t)}base64UrlEncode(t){return uu(t)}encodeKid(t){return this.base64UrlEncode(JSON.stringify({kid:t}))}getPublicKeyThumbprint(t){return f(this,null,function*(){let r=this.performanceClient?.startMeasurement(d.CryptoOptsGetPublicKeyThumbprint,t.correlationId),o=yield qS(n.EXTRACTABLE,n.POP_KEY_USAGES),i=yield zf(o.publicKey),s={e:i.e,kty:i.kty,n:i.n},a=ab(s),c=yield this.hashString(a),l=yield zf(o.privateKey),u=yield KS(l,!1,["sign"]);return yield this.cache.setItem(c,{privateKey:u,publicKey:o.publicKey,requestMethod:t.resourceRequestMethod,requestUri:t.resourceRequestUri}),r&&r.end({success:!0}),c})}removeTokenBindingKey(t){return f(this,null,function*(){return yield this.cache.removeItem(t),!(yield this.cache.containsKey(t))})}clearKeystore(){return f(this,null,function*(){this.cache.clearInMemory();try{return yield this.cache.clearPersistent(),!0}catch(t){return t instanceof Error?this.logger.error(`Clearing keystore failed with error: ${t.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}})}signJwt(t,r,o,i){return f(this,null,function*(){let s=this.performanceClient?.startMeasurement(d.CryptoOptsSignJwt,i),a=yield this.cache.getItem(r);if(!a)throw T(no);let c=yield zf(a.publicKey),l=ab(c),u=uu(JSON.stringify({kid:r})),h=au.getShrHeaderString(w(m({},o?.header),{alg:c.alg,kid:u})),g=uu(h);t.cnf={jwk:JSON.parse(l)};let p=uu(JSON.stringify(t)),E=`${g}.${p}`,b=new TextEncoder().encode(E),O=yield WS(a.privateKey,b),Lt=Gt(new Uint8Array(O)),se=`${E}.${Lt}`;return s&&s.end({success:!0}),se})}hashString(t){return f(this,null,function*(){return Vf(t)})}}return n.POP_KEY_USAGES=["sign","verify"],n.EXTRACTABLE=!0,n})();function ab(n){return JSON.stringify(n,Object.keys(n).sort())}var Kx=24*60*60*1e3,np={Lax:"Lax",None:"None"},ba=class{initialize(){return Promise.resolve()}getItem(e){let t=`${encodeURIComponent(e)}`,r=document.cookie.split(";");for(let o=0;o<r.length;o++){let i=r[o],[s,...a]=decodeURIComponent(i).trim().split("="),c=a.join("=");if(s===t)return c}return""}getUserData(){throw C(Re.methodNotImplemented)}setItem(e,t,r,o=!0,i=np.Lax){let s=`${encodeURIComponent(e)}=${encodeURIComponent(t)};path=/;SameSite=${i};`;if(r){let a=Wx(r);s+=`expires=${a};`}(o||i===np.None)&&(s+="Secure;"),document.cookie=s}setUserData(){return f(this,null,function*(){return Promise.reject(C(Re.methodNotImplemented))})}removeItem(e){this.setItem(e,"",-1)}getKeys(){let e=document.cookie.split(";"),t=[];return e.forEach(r=>{let o=decodeURIComponent(r).trim().split("=");t.push(o[0])}),t}containsKey(e){return this.getKeys().includes(e)}};function Wx(n){let e=new Date;return new Date(e.getTime()+n*Kx).toUTCString()}function mu(n){let e=n.getItem(dn.ACCOUNT_KEYS);return e?JSON.parse(e):[]}function yu(n,e){let t=e.getItem(`${dn.TOKEN_KEYS}.${n}`);if(t){let r=JSON.parse(t);if(r&&r.hasOwnProperty("idToken")&&r.hasOwnProperty("accessToken")&&r.hasOwnProperty("refreshToken"))return r}return{idToken:[],accessToken:[],refreshToken:[]}}var cb="msal.cache.encryption",Yx="msal.broadcast.cache",rp=class{constructor(e,t,r){if(!window.localStorage)throw wa(ao);this.memoryStorage=new Ir,this.initialized=!1,this.clientId=e,this.logger=t,this.performanceClient=r,this.broadcast=new BroadcastChannel(Yx)}initialize(e){return f(this,null,function*(){let t=new ba,r=t.getItem(cb),o={key:"",id:""};if(r)try{o=JSON.parse(r)}catch{}if(o.key&&o.id){let i=ke(Nn,d.Base64Decode,this.logger,this.performanceClient,e)(o.key);this.encryptionCookie={id:o.id,key:yield y(NC,d.GenerateHKDF,this.logger,this.performanceClient,e)(i)},yield y(this.importExistingCache.bind(this),d.ImportExistingCache,this.logger,this.performanceClient,e)(e)}else{this.clear();let i=He(),s=yield y(kC,d.GenerateBaseKey,this.logger,this.performanceClient,e)(),a=ke(Gt,d.UrlEncodeArr,this.logger,this.performanceClient,e)(new Uint8Array(s));this.encryptionCookie={id:i,key:yield y(NC,d.GenerateHKDF,this.logger,this.performanceClient,e)(s)};let c={id:i,key:a};t.setItem(cb,JSON.stringify(c),0,!0,np.None)}this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0})}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw T(vr);return this.memoryStorage.getItem(e)}setItem(e,t){window.localStorage.setItem(e,t)}setUserData(e,t,r){return f(this,null,function*(){if(!this.initialized||!this.encryptionCookie)throw T(vr);let{data:o,nonce:i}=yield y(ZS,d.Encrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,t,this.getContext(e)),s={id:this.encryptionCookie.id,nonce:i,data:o};this.memoryStorage.setItem(e,t),this.setItem(e,JSON.stringify(s)),this.broadcast.postMessage({key:e,value:t,context:this.getContext(e)})})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear(),mu(this).forEach(r=>this.removeItem(r));let t=yu(this.clientId,this);t.idToken.forEach(r=>this.removeItem(r)),t.accessToken.forEach(r=>this.removeItem(r)),t.refreshToken.forEach(r=>this.removeItem(r)),this.getKeys().forEach(r=>{(r.startsWith(v.CACHE_PREFIX)||r.indexOf(this.clientId)!==-1)&&this.removeItem(r)})}importExistingCache(e){return f(this,null,function*(){if(!this.encryptionCookie)return;let t=mu(this);t=yield this.importArray(t,e),this.setItem(dn.ACCOUNT_KEYS,JSON.stringify(t));let r=yu(this.clientId,this);r.idToken=yield this.importArray(r.idToken,e),r.accessToken=yield this.importArray(r.accessToken,e),r.refreshToken=yield this.importArray(r.refreshToken,e),this.setItem(`${dn.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(r))})}getItemFromEncryptedCache(e,t){return f(this,null,function*(){if(!this.encryptionCookie)return null;let r=this.getItem(e);if(!r)return null;let o;try{o=JSON.parse(r)}catch{return null}return!o.id||!o.nonce||!o.data?(this.performanceClient.incrementFields({unencryptedCacheCount:1},t),null):o.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},t),null):y(JS,d.Decrypt,this.logger,this.performanceClient,t)(this.encryptionCookie.key,o.nonce,this.getContext(e),o.data)})}importArray(e,t){return f(this,null,function*(){let r=[],o=[];return e.forEach(i=>{let s=this.getItemFromEncryptedCache(i,t).then(a=>{a?(this.memoryStorage.setItem(i,a),r.push(i)):this.removeItem(i)});o.push(s)}),yield Promise.all(o),r})}getContext(e){let t="";return e.includes(this.clientId)&&(t=this.clientId),t}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");let t=this.performanceClient.startMeasurement(d.LocalStorageUpdated);t.add({isBackground:!0});let{key:r,value:o,context:i}=e.data;if(!r){this.logger.error("Broadcast event missing key"),t.end({success:!1,errorCode:"noKey"});return}if(i&&i!==this.clientId){this.logger.trace(`Ignoring broadcast event from clientId: ${i}`),t.end({success:!1,errorCode:"contextMismatch"});return}o?(this.memoryStorage.setItem(r,o),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(r),this.logger.verbose("Removed item from internal cache")),t.end({success:!0})}};var op=class{constructor(){if(!window.sessionStorage)throw wa(ao)}initialize(){return f(this,null,function*(){})}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,t){window.sessionStorage.setItem(e,t)}setUserData(e,t){return f(this,null,function*(){this.setItem(e,t)})}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}};var S={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache"};var Aa=class n extends bi{constructor(e,t,r,o,i,s,a){super(e,r,o,a),this.cacheConfig=t,this.logger=o,this.internalStorage=new Ir,this.browserStorage=lb(e,t.cacheLocation,o,i),this.temporaryCacheStorage=lb(e,t.temporaryCacheLocation,o,i),this.cookieStorage=new ba,this.performanceClient=i,this.eventHandler=s}initialize(e){return f(this,null,function*(){yield this.browserStorage.initialize(e)})}validateAndParseJson(e){try{let t=JSON.parse(e);return t&&typeof t=="object"?t:null}catch{return null}}getAccount(e){this.logger.trace("BrowserCacheManager.getAccount called");let t=this.browserStorage.getUserData(e);if(!t)return this.removeAccountKeyFromMap(e),null;let r=this.validateAndParseJson(t);return!r||!Te.isAccountEntity(r)?(this.removeAccountKeyFromMap(e),null):bi.toObject(new Te,r)}setAccount(e,t){return f(this,null,function*(){this.logger.trace("BrowserCacheManager.setAccount called");let r=e.generateAccountKey();yield y(this.browserStorage.setUserData.bind(this.browserStorage),d.SetUserData,this.logger,this.performanceClient)(r,JSON.stringify(e),t);let o=this.addAccountKeyToMap(r);this.cacheConfig.cacheLocation===ye.LocalStorage&&o&&this.eventHandler.emitEvent(S.ACCOUNT_ADDED,void 0,e.getAccountInfo())})}getAccountKeys(){return mu(this.browserStorage)}addAccountKeyToMap(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);let t=this.getAccountKeys();return t.indexOf(e)===-1?(t.push(e),this.browserStorage.setItem(dn.ACCOUNT_KEYS,JSON.stringify(t)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);let t=this.getAccountKeys(),r=t.indexOf(e);r>-1?(t.splice(r,1),this.browserStorage.setItem(dn.ACCOUNT_KEYS,JSON.stringify(t)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e){return f(this,null,function*(){zi(n.prototype,this,"removeAccount").call(this,e),this.removeAccountKeyFromMap(e)})}removeAccountContext(e){return f(this,null,function*(){yield zi(n.prototype,this,"removeAccountContext").call(this,e),this.cacheConfig.cacheLocation===ye.LocalStorage&&this.eventHandler.emitEvent(S.ACCOUNT_REMOVED,void 0,e.getAccountInfo())})}removeIdToken(e){super.removeIdToken(e),this.removeTokenKey(e,P.ID_TOKEN)}removeAccessToken(e){return f(this,null,function*(){zi(n.prototype,this,"removeAccessToken").call(this,e),this.removeTokenKey(e,P.ACCESS_TOKEN)})}removeRefreshToken(e){super.removeRefreshToken(e),this.removeTokenKey(e,P.REFRESH_TOKEN)}getTokenKeys(){return yu(this.clientId,this.browserStorage)}addTokenKey(e,t){this.logger.trace("BrowserCacheManager addTokenKey called");let r=this.getTokenKeys();switch(t){case P.ID_TOKEN:r.idToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),r.idToken.push(e));break;case P.ACCESS_TOKEN:r.accessToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),r.accessToken.push(e));break;case P.REFRESH_TOKEN:r.refreshToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),r.refreshToken.push(e));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${t}`),C(Re.unexpectedCredentialType)}this.browserStorage.setItem(`${dn.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(r))}removeTokenKey(e,t){this.logger.trace("BrowserCacheManager removeTokenKey called");let r=this.getTokenKeys();switch(t){case P.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${e} from map`);let o=r.idToken.indexOf(e);o>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),r.idToken.splice(o,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case P.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${e} from map`);let i=r.accessToken.indexOf(e);i>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),r.accessToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case P.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${e} from map`);let s=r.refreshToken.indexOf(e);s>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),r.refreshToken.splice(s,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${t}`),C(Re.unexpectedCredentialType)}this.browserStorage.setItem(`${dn.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(r))}getIdTokenCredential(e){let t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,P.ID_TOKEN),null;let r=this.validateAndParseJson(t);return!r||!fe.isIdTokenEntity(r)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,P.ID_TOKEN),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),r)}setIdTokenCredential(e,t){return f(this,null,function*(){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");let r=fe.generateCredentialKey(e);yield y(this.browserStorage.setUserData.bind(this.browserStorage),d.SetUserData,this.logger,this.performanceClient)(r,JSON.stringify(e),t),this.addTokenKey(r,P.ID_TOKEN)})}getAccessTokenCredential(e){let t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,P.ACCESS_TOKEN),null;let r=this.validateAndParseJson(t);return!r||!fe.isAccessTokenEntity(r)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,P.ACCESS_TOKEN),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),r)}setAccessTokenCredential(e,t){return f(this,null,function*(){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");let r=fe.generateCredentialKey(e);yield y(this.browserStorage.setUserData.bind(this.browserStorage),d.SetUserData,this.logger,this.performanceClient)(r,JSON.stringify(e),t),this.addTokenKey(r,P.ACCESS_TOKEN)})}getRefreshTokenCredential(e){let t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,P.REFRESH_TOKEN),null;let r=this.validateAndParseJson(t);return!r||!fe.isRefreshTokenEntity(r)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,P.REFRESH_TOKEN),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),r)}setRefreshTokenCredential(e,t){return f(this,null,function*(){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");let r=fe.generateCredentialKey(e);yield y(this.browserStorage.setUserData.bind(this.browserStorage),d.SetUserData,this.logger,this.performanceClient)(r,JSON.stringify(e),t),this.addTokenKey(r,P.REFRESH_TOKEN)})}getAppMetadata(e){let t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;let r=this.validateAndParseJson(t);return!r||!fe.isAppMetadataEntity(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");let t=fe.generateAppMetadataKey(e);this.browserStorage.setItem(t,JSON.stringify(e))}getServerTelemetry(e){let t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;let r=this.validateAndParseJson(t);return!r||!fe.isServerTelemetryEntity(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(e,t){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.browserStorage.setItem(e,JSON.stringify(t))}getAuthorityMetadata(e){let t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;let r=this.validateAndParseJson(t);return r&&fe.isAuthorityMetadataEntity(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(t=>this.isAuthorityMetadata(t))}setWrapperMetadata(e,t){this.internalStorage.setItem(lu.WRAPPER_SKU,e),this.internalStorage.setItem(lu.WRAPPER_VER,t)}getWrapperMetadata(){let e=this.internalStorage.getItem(lu.WRAPPER_SKU)||v.EMPTY_STRING,t=this.internalStorage.getItem(lu.WRAPPER_VER)||v.EMPTY_STRING;return[e,t]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(){let e=this.generateCacheKey(ef.ACTIVE_ACCOUNT_FILTERS),t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;let r=this.validateAndParseJson(t);return r?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:r.homeAccountId,localAccountId:r.localAccountId,tenantId:r.tenantId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e){let t=this.generateCacheKey(ef.ACTIVE_ACCOUNT_FILTERS);if(e){this.logger.verbose("setActiveAccount: Active account set");let r={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId};this.browserStorage.setItem(t,JSON.stringify(r))}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(t);this.eventHandler.emitEvent(S.ACTIVE_ACCOUNT_CHANGED)}getThrottlingCache(e){let t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;let r=this.validateAndParseJson(t);return!r||!fe.isThrottlingEntity(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(e,t){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.browserStorage.setItem(e,JSON.stringify(t))}getTemporaryCache(e,t){let r=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){let i=this.cookieStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),i}let o=this.temporaryCacheStorage.getItem(r);if(!o){if(this.cacheConfig.cacheLocation===ye.LocalStorage){let i=this.browserStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),i}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),o}setTemporaryCache(e,t,r){let o=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(o,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(o,t,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(){return f(this,null,function*(){yield this.removeAllAccounts(),this.removeAppMetadata(),this.temporaryCacheStorage.getKeys().forEach(e=>{(e.indexOf(v.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(e)}),this.browserStorage.getKeys().forEach(e=>{(e.indexOf(v.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(e)}),this.internalStorage.clear()})}clearTokensAndKeysWithClaims(e,t){return f(this,null,function*(){e.addQueueMeasurement(d.ClearTokensAndKeysWithClaims,t);let r=this.getTokenKeys(),o=[];r.accessToken.forEach(i=>{let s=this.getAccessTokenCredential(i);s?.requestedClaimsHash&&i.includes(s.requestedClaimsHash.toLowerCase())&&o.push(this.removeAccessToken(i))}),yield Promise.all(o),o.length>0&&this.logger.warning(`${o.length} access tokens with claims in the cache keys have been removed from the cache.`)})}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):_e.startsWith(e,v.CACHE_PREFIX)?e:`${v.CACHE_PREFIX}.${this.clientId}.${e}`}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(ve.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(ve.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(ve.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(ve.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(ve.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(e,t){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");let r=so(JSON.stringify(e));if(this.setTemporaryCache(ve.REQUEST_PARAMS,r,!0),t){let o=so(t);this.setTemporaryCache(ve.VERIFIER,o,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");let e=this.getTemporaryCache(ve.REQUEST_PARAMS,!0);if(!e)throw T(ia);let t=this.getTemporaryCache(ve.VERIFIER,!0),r,o="";try{r=JSON.parse(Xe(e)),t&&(o=Xe(t))}catch(i){throw this.logger.errorPii(`Attempted to parse: ${e}`),this.logger.error(`Parsing cached token request threw with error: ${i}`),T(sa)}return[r,o]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");let e=this.getTemporaryCache(ve.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;let t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){let t=this.getInteractionInProgress()?.clientId;return e?t===this.clientId:!!t}getInteractionInProgress(){let e=`${v.CACHE_PREFIX}.${ve.INTERACTION_STATUS_KEY}`,t=this.getTemporaryCache(e,!1);try{return t?JSON.parse(t):null}catch{return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(e),this.resetRequestCache(),du(window),null}}setInteractionInProgress(e,t=un.SIGNIN){let r=`${v.CACHE_PREFIX}.${ve.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw T(Zs);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:t}),!1)}else!e&&this.getInteractionInProgress()?.clientId===this.clientId&&this.removeTemporaryItem(r)}hydrateCache(e,t){return f(this,null,function*(){let r=fe.createIdTokenEntity(e.account?.homeAccountId,e.account?.environment,e.idToken,this.clientId,e.tenantId),o;t.claims&&(o=yield this.cryptoImpl.hashString(t.claims));let i=fe.createAccessTokenEntity(e.account?.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?Ze.toSecondsFromDate(e.expiresOn):0,e.extExpiresOn?Ze.toSecondsFromDate(e.extExpiresOn):0,Xe,void 0,e.tokenType,void 0,t.sshKid,t.claims,o),s={idToken:r,accessToken:i};return this.saveCacheRecord(s,e.correlationId)})}saveCacheRecord(e,t,r){return f(this,null,function*(){try{yield zi(n.prototype,this,"saveCacheRecord").call(this,e,t,r)}catch(o){if(o instanceof cr&&this.performanceClient&&t)try{let i=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:i.refreshToken.length,cacheIdCount:i.idToken.length,cacheAtCount:i.accessToken.length},t)}catch{}throw o}})}};function lb(n,e,t,r){try{switch(e){case ye.LocalStorage:return new rp(n,t,r);case ye.SessionStorage:return new op;case ye.MemoryStorage:default:break}}catch(o){t.error(o)}return new Ir}var ub=(n,e,t,r)=>{let o={cacheLocation:ye.MemoryStorage,temporaryCacheLocation:ye.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new Aa(n,o,Kr,e,t,r)};function db(n,e,t,r){return n.verbose("getAllAccounts called"),t?e.getAllAccounts(r):[]}function hb(n,e,t){if(e.trace("getAccount called"),Object.keys(n).length===0)return e.warning("getAccount: No accountFilter provided"),null;let r=t.getAccountInfoFilteredBy(n);return r?(e.verbose("getAccount: Account matching provided filter found, returning"),r):(e.verbose("getAccount: No matching account found, returning null"),null)}function fb(n,e,t){if(e.trace("getAccountByUsername called"),!n)return e.warning("getAccountByUsername: No username provided"),null;let r=t.getAccountInfoFilteredBy({username:n});return r?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${n}`),r):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function pb(n,e,t){if(e.trace("getAccountByHomeId called"),!n)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;let r=t.getAccountInfoFilteredBy({homeAccountId:n});return r?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${n}`),r):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function gb(n,e,t){if(e.trace("getAccountByLocalId called"),!n)return e.warning("getAccountByLocalId: No localAccountId provided"),null;let r=t.getAccountInfoFilteredBy({localAccountId:n});return r?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${n}`),r):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function mb(n,e){e.setActiveAccount(n)}function yb(n){return n.getActiveAccount()}var Qx="msal.broadcast.event",ip=class{constructor(e){this.eventCallbacks=new Map,this.logger=e||new vt({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(Qx)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,t,r){if(typeof window<"u"){let o=r||xC();return this.eventCallbacks.has(o)?(this.logger.error(`Event callback with id: ${o} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(o,[e,t||[]]),this.logger.verbose(`Event callback registered with id: ${o}`),o)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,t,r,o){let i={eventType:e,interactionType:t||null,payload:r||null,error:o||null,timestamp:Date.now()};switch(e){case S.ACCOUNT_ADDED:case S.ACCOUNT_REMOVED:case S.ACTIVE_ACCOUNT_CHANGED:this.broadcastChannel?.postMessage(i);break;default:this.invokeCallbacks(i);break}}invokeCallbacks(e){this.eventCallbacks.forEach(([t,r],o)=>{(r.length===0||r.includes(e.eventType))&&(this.logger.verbose(`Emitting event to callback ${o}: ${e.eventType}`),t.apply(null,[e]))})}invokeCrossTabCallbacks(e){let t=e.data;this.invokeCallbacks(t)}subscribeCrossTab(){this.broadcastChannel?.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){this.broadcastChannel?.removeEventListener("message",this.invokeCrossTabCallbacks)}};var Da=class{constructor(e,t,r,o,i,s,a,c,l){this.config=e,this.browserStorage=t,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=i,this.navigationClient=s,this.nativeMessageHandler=c,this.correlationId=l||He(),this.logger=o.clone(me.MSAL_SKU,On,this.correlationId),this.performanceClient=a}clearCacheOnLogout(e){return f(this,null,function*(){if(e){Te.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null));try{yield this.browserStorage.removeAccount(Te.generateAccountCacheKey(e)),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),yield this.browserStorage.clear(),yield this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}})}getRedirectUri(e){this.logger.verbose("getRedirectUri called");let t=e||this.config.auth.redirectUri;return x.getAbsoluteUrl(t,dt())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");let r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new Li(r,this.browserStorage)}getDiscoveredAuthority(e){return f(this,null,function*(){let{account:t}=e,r=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(d.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);let o={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},i=e.requestAuthority||this.config.auth.authority,s=r?.length?r==="true":this.config.auth.instanceAware,a=t&&s?this.config.auth.authority.replace(x.getDomainFromUrl(i),t.environment):i,c=$t.generateAuthority(a,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),l=yield y(wf.createDiscoveredInstance,d.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(c,this.config.system.networkClient,this.browserStorage,o,this.logger,this.correlationId,this.performanceClient);if(t&&!l.isAlias(t.environment))throw $(Pt.authorityMismatch);return l})}};function vu(n,e,t,r){return f(this,null,function*(){t.addQueueMeasurement(d.InitializeBaseRequest,n.correlationId);let o=n.authority||e.auth.authority,i=[...n&&n.scopes||[]],s=w(m({},n),{correlationId:n.correlationId,authority:o,scopes:i});if(!s.authenticationScheme)s.authenticationScheme=G.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(s.authenticationScheme===G.SSH){if(!n.sshJwk)throw $(Pt.missingSshJwk);if(!n.sshKid)throw $(Pt.missingSshKid)}r.verbose(`Authentication Scheme set to "${s.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&n.claims&&!_e.isEmptyObj(n.claims)&&(s.requestedClaimsHash=yield Vf(n.claims)),s})}function vb(n,e,t,r,o){return f(this,null,function*(){r.addQueueMeasurement(d.InitializeSilentRequest,n.correlationId);let i=yield y(vu,d.InitializeBaseRequest,o,r,n.correlationId)(n,t,r,o);return w(m(m({},n),i),{account:e,forceRefresh:n.forceRefresh||!1})})}var _t=class extends Da{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e?.correlationId);let t=m({correlationId:this.correlationId||He()},e);if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){let r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=x.getAbsoluteUrl(e.postLogoutRedirectUri,dt())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=x.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,dt())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=x.getAbsoluteUrl(dt(),dt())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId),t}getLogoutHintFromIdTokenClaims(e){let t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}createAuthCodeClient(e){return f(this,null,function*(){this.performanceClient.addQueueMeasurement(d.StandardInteractionClientCreateAuthCodeClient,this.correlationId);let t=yield y(this.getClientConfiguration.bind(this),d.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e);return new xi(t,this.performanceClient)})}getClientConfiguration(e){return f(this,null,function*(){let{serverTelemetryManager:t,requestAuthority:r,requestAzureCloudOptions:o,requestExtraQueryParameters:i,account:s}=e;this.performanceClient.addQueueMeasurement(d.StandardInteractionClientGetClientConfiguration,this.correlationId);let a=yield y(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:o,requestExtraQueryParameters:i,account:s}),c=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:c.loggerCallback,piiLoggingEnabled:c.piiLoggingEnabled,logLevel:c.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:me.MSAL_SKU,version:On,cpu:v.EMPTY_STRING,os:v.EMPTY_STRING},telemetry:this.config.telemetry}})}initializeAuthorizationRequest(e,t){return f(this,null,function*(){this.performanceClient.addQueueMeasurement(d.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);let r=this.getRedirectUri(e.redirectUri),o={interactionType:t},i=an.setRequestState(this.browserCrypto,e&&e.state||v.EMPTY_STRING,o),s=yield y(vu,d.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)(w(m({},e),{correlationId:this.correlationId}),this.config,this.performanceClient,this.logger),a=w(m({},s),{redirectUri:r,state:i,nonce:e.nonce||He(),responseMode:this.config.auth.OIDCOptions.serverResponseType});if(e.loginHint||e.sid)return a;let c=e.account||this.browserStorage.getActiveAccount();return c&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${c.homeAccountId}`,this.correlationId),a.account=c),a})}};var Cb="ContentError",sp="user_switch";var Eb="USER_INTERACTION_REQUIRED",Ib="USER_CANCEL",_b="NO_NETWORK",Tb="PERSISTENT_ERROR",wb="DISABLED",Sb="ACCOUNT_UNAVAILABLE";var Zx=-2147186943,Jx={[sp]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."},qt=class n extends F{constructor(e,t,r){super(e,t),Object.setPrototypeOf(this,n.prototype),this.name="NativeAuthError",this.ext=r}};function co(n){if(n.ext&&n.ext.status&&(n.ext.status===Tb||n.ext.status===wb)||n.ext&&n.ext.error&&n.ext.error===Zx)return!0;switch(n.errorCode){case Cb:return!0;default:return!1}}function Cu(n,e,t){if(t&&t.status)switch(t.status){case Sb:return $s(gr.nativeAccountUnavailable);case Eb:return new $e(n,e);case Ib:return T(ln);case _b:return T(yr)}return new qt(n,Jx[n]||e,t)}var xt=class n{constructor(e,t,r,o){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=o,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(d.NativeMessageHandlerHandshake)}sendMessage(e){return f(this,null,function*(){this.logger.trace("NativeMessageHandler - sendMessage called.");let t={channel:io.CHANNEL_ID,extensionId:this.extensionId,responseId:He(),body:e};return this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(t)}`),this.messageChannel.port1.postMessage(t),new Promise((r,o)=>{this.resolvers.set(t.responseId,{resolve:r,reject:o})})})}static createProvider(e,t,r){return f(this,null,function*(){e.trace("NativeMessageHandler - createProvider called.");try{let o=new n(e,t,r,io.PREFERRED_EXTENSION_ID);return yield o.sendHandshakeRequest(),o}catch{let i=new n(e,t,r);return yield i.sendHandshakeRequest(),i}})}sendHandshakeRequest(){return f(this,null,function*(){this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);let e={channel:io.CHANNEL_ID,extensionId:this.extensionId,responseId:He(),body:{method:Er.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=t=>{this.onChannelMessage(t)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((t,r)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(T(pa)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})})}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;let t=e.data;if(!(!t.channel||t.channel!==io.CHANNEL_ID)&&!(t.extensionId&&t.extensionId!==this.extensionId)&&t.body.method===Er.HandshakeRequest){let r=this.handshakeResolvers.get(t.responseId);if(!r){this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${t.responseId}`);return}this.logger.verbose(t.extensionId?`Extension with id: ${t.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(T(ga))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");let t=e.data,r=this.resolvers.get(t.responseId),o=this.handshakeResolvers.get(t.responseId);try{let i=t.body.method;if(i===Er.Response){if(!r)return;let s=t.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(s)}`),s.status!=="Success")r.reject(Cu(s.code,s.description,s.ext));else if(s.result)s.result.code&&s.result.description?r.reject(Cu(s.result.code,s.result.description,s.result.ext)):r.resolve(s.result);else throw fl(Qo.unexpectedError,"Event does not contain result.");this.resolvers.delete(t.responseId)}else if(i===Er.HandshakeResponse){if(!o){this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${t.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),o.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(i){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${i}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(i):o&&o.reject(i)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isPlatformBrokerAvailable(e,t,r,o){if(t.trace("isPlatformBrokerAvailable called"),!e.system.allowPlatformBroker)return t.trace("isPlatformBrokerAvailable: allowPlatformBroker is not enabled, returning false"),!1;if(!r)return t.trace("isPlatformBrokerAvailable: Platform extension provider is not initialized, returning false"),!1;if(o)switch(o){case G.BEARER:case G.POP:return t.trace("isPlatformBrokerAvailable: authenticationScheme is supported, returning true"),!0;default:return t.trace("isPlatformBrokerAvailable: authenticationScheme is not supported, returning false"),!1}return!0}};function bb(n,e){if(!e)return null;try{return an.parseRequestState(n,e).libraryState.meta}catch{throw C(Re.invalidState)}}function Ma(n,e,t){let r=Qr.getDeserializedResponse(n);if(!r)throw Qr.stripLeadingHashOrQuery(n)?(t.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),t.errorPii(`The ${e} detected is: ${n}`),T(Ws)):(t.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),T(Ks));return r}function Ab(n,e,t){if(!n.state)throw T(to);let r=bb(e,n.state);if(!r)throw T(Ys);if(r.interactionType!==t)throw T(Qs)}var Ra=class{constructor(e,t,r,o,i){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}handleCodeResponse(e,t){return f(this,null,function*(){this.performanceClient.addQueueMeasurement(d.HandleCodeResponse,t.correlationId);let r;try{r=mr.getAuthorizationCodePayload(e,t.state)}catch(o){throw o instanceof Et&&o.subError===ln?T(ln):o}return y(this.handleCodeResponseFromServer.bind(this),d.HandleCodeResponseFromServer,this.logger,this.performanceClient,t.correlationId)(r,t)})}handleCodeResponseFromServer(e,t,r=!0){return f(this,null,function*(){if(this.performanceClient.addQueueMeasurement(d.HandleCodeResponseFromServer,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&(yield y(this.authModule.updateAuthority.bind(this.authModule),d.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId)),r&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{let i=this.createCcsCredentials(t);i&&(this.authCodeRequest.ccsCredential=i)}return yield y(this.authModule.acquireToken.bind(this.authModule),d.AuthClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,e)})}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:Je.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:Je.UPN}:null}};var ka=class extends _t{acquireToken(e){return f(this,null,function*(){this.performanceClient.addQueueMeasurement(d.SilentCacheClientAcquireToken,e.correlationId);let t=this.initializeServerTelemetryManager(X.acquireTokenSilent_silentFlow),r=yield y(this.getClientConfiguration.bind(this),d.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),o=new su(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{let s=(yield y(o.acquireCachedToken.bind(o),d.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),s}catch(i){throw i instanceof Bi&&i.errorCode===no&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),i}})}logout(e){this.logger.verbose("logoutRedirect called");let t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(t?.account)}};var lo=class extends Da{constructor(e,t,r,o,i,s,a,c,l,u,h,g){super(e,t,r,o,i,s,c,l,g),this.apiId=a,this.accountId=u,this.nativeMessageHandler=l,this.nativeStorageManager=h,this.silentCacheClient=new ka(e,this.nativeStorageManager,r,o,i,s,c,l,g);let p=this.nativeMessageHandler.getExtensionId()===io.PREFERRED_EXTENSION_ID?"chrome":this.nativeMessageHandler.getExtensionId()?.length?"unknown":void 0;this.skus=Li.makeExtraSkuString({libraryName:me.MSAL_SKU,libraryVersion:On,extensionName:p,extensionVersion:this.nativeMessageHandler.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters=w(m({},e.extraParameters),{[lr.X_CLIENT_EXTRA_SKU]:this.skus})}acquireToken(e,t){return f(this,null,function*(){this.performanceClient.addQueueMeasurement(d.NativeInteractionClientAcquireToken,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");let r=this.performanceClient.startMeasurement(d.NativeInteractionClientAcquireToken,e.correlationId),o=Ze.nowSeconds(),i=this.initializeServerTelemetryManager(this.apiId);try{let s=yield this.initializeNativeRequest(e);try{let h=yield this.acquireTokensFromCache(this.accountId,s);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),h}catch(h){if(t===Ge.AccessToken)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),h;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}let a=xn(s,[]),c={method:Er.GetToken,request:a},l=yield this.nativeMessageHandler.sendMessage(c),u=this.validateNativeResponse(l);return yield this.handleNativeResponse(u,s,o).then(h=>(r.end({success:!0,isNativeBroker:!0,requestId:h.requestId}),i.clearNativeBrokerErrorCode(),h)).catch(h=>{throw r.end({success:!1,errorCode:h.errorCode,subErrorCode:h.subError,isNativeBroker:!0}),h})}catch(s){throw s instanceof qt&&i.setNativeBrokerErrorCode(s.errorCode),s}})}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:le.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}acquireTokensFromCache(e,t){return f(this,null,function*(){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),C(Re.noAccountFound);let r=this.browserStorage.getBaseAccountInfo({nativeAccountId:e});if(!r)throw C(Re.noAccountFound);try{let o=this.createSilentCacheRequest(t,r),i=yield this.silentCacheClient.acquireToken(o),s=w(m({},r),{idTokenClaims:i?.idTokenClaims,idToken:i?.idToken});return w(m({},i),{account:s})}catch(o){throw o}})}acquireTokenRedirect(e,t){return f(this,null,function*(){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");let r=xn(e,[]);delete r.onRedirectNavigate;let o=yield this.initializeNativeRequest(r),i={method:Er.GetToken,request:o};try{let c=yield this.nativeMessageHandler.sendMessage(i);this.validateNativeResponse(c)}catch(c){if(c instanceof qt&&(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(c.errorCode),co(c)))throw c}this.browserStorage.setTemporaryCache(ve.NATIVE_REQUEST,JSON.stringify(o),!0);let s={apiId:X.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);t.end({success:!0}),yield this.navigationClient.navigateExternal(a,s)})}handleRedirectPromise(e,t){return f(this,null,function*(){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;let r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&e?.addFields({errorCode:"no_cached_request"},t),null;let c=r,{prompt:o}=c,i=xn(c,["prompt"]);o&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(ve.NATIVE_REQUEST));let s={method:Er.GetToken,request:i},a=Ze.nowSeconds();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");let l=yield this.nativeMessageHandler.sendMessage(s);this.validateNativeResponse(l);let h=yield this.handleNativeResponse(l,i,a);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),h}catch(l){throw l}})}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}handleNativeResponse(e,t,r){return f(this,null,function*(){this.logger.trace("NativeInteractionClient - handleNativeResponse called.");let o=Ls.extractTokenClaims(e.id_token,Xe),i=this.createHomeAccountIdentifier(e,o),s=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId})?.homeAccountId;if(t.extraParameters?.child_client_id&&e.account.id!==t.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(i!==s&&e.account.id!==t.accountId)throw Cu(sp);let a=yield this.getDiscoveredAuthority({requestAuthority:t.authority}),c=Gs(this.browserStorage,a,i,Xe,o,e.client_info,void 0,o.tid,void 0,e.account.id,this.logger);e.expires_in=Number(e.expires_in);let l=yield this.generateAuthenticationResult(e,t,o,c,a.canonicalAuthority,r);return yield this.cacheAccount(c),yield this.cacheNativeTokens(e,t,i,o,e.access_token,l.tenantId,r),l})}createHomeAccountIdentifier(e,t){return Te.generateHomeAccountId(e.client_info||v.EMPTY_STRING,ut.Default,this.logger,this.browserCrypto,t)}generateScopes(e,t){return e.scope?le.fromString(e.scope):le.fromString(t.scope)}generatePopAccessToken(e,t){return f(this,null,function*(){if(t.tokenType===G.POP&&t.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;let r=new It(this.browserCrypto),o={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw C(Re.keyIdMissing);return r.signPopToken(e.access_token,t.keyId,o)}else return e.access_token})}generateAuthenticationResult(e,t,r,o,i,s){return f(this,null,function*(){let a=this.addTelemetryFromNativeResponse(e),c=e.scope?le.fromString(e.scope):le.fromString(t.scope),l=e.account.properties||{},u=l.UID||r.oid||r.sub||v.EMPTY_STRING,h=l.TenantId||r.tid||v.EMPTY_STRING,g=Si(o.getAccountInfo(),void 0,r,e.id_token);g.nativeAccountId!==e.account.id&&(g.nativeAccountId=e.account.id);let p=yield this.generatePopAccessToken(e,t),E=t.tokenType===G.POP?G.POP:G.BEARER;return{authority:i,uniqueId:u,tenantId:h,scopes:c.asArray(),account:g,idToken:e.id_token,idTokenClaims:r,accessToken:p,fromCache:a?this.isResponseFromCache(a):!1,expiresOn:Ze.toDateFromSeconds(s+e.expires_in),tokenType:E,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}})}cacheAccount(e){return f(this,null,function*(){yield this.browserStorage.setAccount(e,this.correlationId),this.browserStorage.removeAccountContext(e).catch(t=>{this.logger.error(`Error occurred while removing account context from browser storage. ${t}`)})})}cacheNativeTokens(e,t,r,o,i,s,a){let c=fe.createIdTokenEntity(r,t.authority,e.id_token||"",t.clientId,o.tid||""),l=t.tokenType===G.POP?v.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,u=a+l,h=this.generateScopes(e,t),g=fe.createAccessTokenEntity(r,t.authority,i,t.clientId,o.tid||s,h.printScopes(),u,0,Xe,void 0,t.tokenType,void 0,t.keyId),p={idToken:c,accessToken:g};return this.nativeStorageManager.saveCacheRecord(p,this.correlationId,t.storeInCache)}addTelemetryFromNativeResponse(e){let t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw fl(Qo.unexpectedError,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}initializeNativeRequest(e){return f(this,null,function*(){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");let t=e.authority||this.config.auth.authority;e.account&&(yield this.getDiscoveredAuthority({requestAuthority:t,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}));let r=new x(t);r.validateAsUri();let l=e,{scopes:o}=l,i=xn(l,["scopes"]),s=new le(o||[]);s.appendScopes(rn);let a=()=>{switch(this.apiId){case X.ssoSilent:case X.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),he.NONE}if(!e.prompt){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e.prompt){case he.NONE:case he.CONSENT:case he.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e.prompt} is not compatible with native flow`),T(ma)}},c=w(m({},i),{accountId:this.accountId,clientId:this.config.auth.clientId,authority:r.urlString,scope:s.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:a(),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:m(m({},e.extraQueryParameters),e.tokenQueryParameters),extendedExpiryToken:!1,keyId:e.popKid});if(c.signPopToken&&e.popKid)throw T(va);if(this.handleExtraBrokerParams(c),c.extraParameters=c.extraParameters||{},c.extraParameters.telemetry=io.MATS_TELEMETRY,e.authenticationScheme===G.POP){let u={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},h=new It(this.browserCrypto),g;if(c.keyId)g=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:c.keyId})),c.signPopToken=!1;else{let p=yield y(h.generateCnf.bind(h),d.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(u,this.logger);g=p.reqCnfString,c.keyId=p.kid,c.signPopToken=!0}c.reqCnf=g}return this.addRequestSKUs(c),c})}handleExtraBrokerParams(e){let t=e.extraParameters&&e.extraParameters.hasOwnProperty(lr.BROKER_CLIENT_ID)&&e.extraParameters.hasOwnProperty(lr.BROKER_REDIRECT_URI)&&e.extraParameters.hasOwnProperty(lr.CLIENT_ID);if(!e.embeddedClientId&&!t)return;let r="",o=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[lr.BROKER_REDIRECT_URI],r=e.extraParameters[lr.CLIENT_ID]),e.extraParameters={child_client_id:r,child_redirect_uri:o},this.performanceClient?.addFields({embeddedClientId:r,embeddedRedirectUri:o},e.correlationId)}};function Db(n,e,t,r,o){return f(this,null,function*(){let i=mr.getStandardAuthorizeRequestParameters(w(m({},n.auth),{authority:e}),t,r,o);if(Ct.addLibraryInfo(i,{sku:me.MSAL_SKU,version:On,os:"",cpu:""}),n.auth.protocolMode!==ge.OIDC&&Ct.addApplicationTelemetry(i,n.telemetry.application),t.platformBroker&&(Ct.addNativeBroker(i),t.authenticationScheme===G.POP)){let s=new Sa(r,o),a=new It(s),c;t.popKid?c=s.encodeKid(t.popKid):c=(yield y(a.generateCnf.bind(a),d.PopTokenGenerateCnf,r,o,t.correlationId)(t,r)).reqCnfString,Ct.addPopToken(i,c)}return Ct.instrumentBrokerParams(i,t.correlationId,o),i})}function Na(n,e,t,r,o){return f(this,null,function*(){if(!t.codeChallenge)throw $(Pt.pkceParamsMissing);let i=yield y(Db,d.GetStandardParams,r,o,t.correlationId)(n,e,t,r,o);return Ct.addResponseType(i,nf.CODE),Ct.addCodeChallengeParams(i,t.codeChallenge,v.S256_CODE_CHALLENGE_METHOD),Ct.addExtraQueryParameters(i,t.extraQueryParameters||{}),mr.getAuthorizeUrl(e,i,n.auth.encodeExtraQueryParams,t.extraQueryParameters)})}function Oa(n,e,t,r,o,i){return f(this,null,function*(){if(!r.earJwk)throw T(cu);let s=yield Db(e,t,r,o,i);Ct.addResponseType(s,nf.IDTOKEN_TOKEN_REFRESHTOKEN),Ct.addEARParameters(s,r.earJwk);let a=new Map;Ct.addExtraQueryParameters(a,r.extraQueryParameters||{});let c=mr.getAuthorizeUrl(t,a,e.auth.encodeExtraQueryParams,r.extraQueryParameters);return Xx(n,c,s)})}function Xx(n,e,t){let r=n.createElement("form");return r.method="post",r.action=e,t.forEach((o,i)=>{let s=n.createElement("input");s.hidden=!0,s.name=i,s.value=o,r.appendChild(s)}),n.body.appendChild(r),r}function Mb(n,e,t,r,o,i,s,a,c,l){return f(this,null,function*(){if(!l)throw T(oo);let u=new Sa(a,c),h=new lo(r,o,u,a,s,r.system.navigationClient,t,c,l,e,i,n.correlationId),{userRequestState:g}=an.parseRequestState(u,n.state);return y(h.acquireToken.bind(h),d.NativeInteractionClientAcquireToken,a,c,n.correlationId)(w(m({},n),{state:g,prompt:void 0}))})}function Pa(n,e,t,r,o,i,s,a,c,l,u,h){return f(this,null,function*(){if(pr.removeThrottle(s,o.auth.clientId,n),e.accountId)return y(Mb,d.HandleResponsePlatformBroker,l,u,n.correlationId)(n,e.accountId,r,o,s,a,c,l,u,h);let g=w(m({},n),{code:e.code||"",codeVerifier:t}),p=new Ra(i,s,g,l,u);return yield y(p.handleCodeResponse.bind(p),d.HandleCodeResponse,l,u,n.correlationId)(e,n)})}function xa(n,e,t,r,o,i,s,a,c,l,u){return f(this,null,function*(){if(pr.removeThrottle(i,r.auth.clientId,n),mr.validateAuthorizationResponse(e,n.state),!e.ear_jwe)throw T(Of);if(!n.earJwk)throw T(cu);let h=JSON.parse(yield y(YS,d.DecryptEarResponse,c,l,n.correlationId)(n.earJwk,e.ear_jwe));if(h.accountId)return y(Mb,d.HandleResponsePlatformBroker,c,l,n.correlationId)(n,h.accountId,t,r,i,s,a,c,l,u);let g=new cn(r.auth.clientId,i,new Sa(c,l),c,null,null,l);g.validateTokenResponse(h);let p={code:"",state:n.state,nonce:n.nonce,client_info:h.client_info,cloud_graph_host_name:h.cloud_graph_host_name,cloud_instance_host_name:h.cloud_instance_host_name,cloud_instance_name:h.cloud_instance_name,msgraph_host:h.msgraph_host};return yield y(g.handleServerTokenResponse.bind(g),d.HandleServerTokenResponse,c,l,n.correlationId)(h,o,Ze.nowSeconds(),n,p,void 0,void 0,void 0,void 0)})}var e0=32;function uo(n,e,t){return f(this,null,function*(){n.addQueueMeasurement(d.GeneratePkceCodes,t);let r=ke(t0,d.GenerateCodeVerifier,e,n,t)(n,e,t),o=yield y(n0,d.GenerateCodeChallengeFromVerifier,e,n,t)(r,n,e,t);return{verifier:r,challenge:o}})}function t0(n,e,t){try{let r=new Uint8Array(e0);return ke(GS,d.GetRandomValues,e,n,t)(r),Gt(r)}catch{throw T(Fi)}}function n0(n,e,t,r){return f(this,null,function*(){e.addQueueMeasurement(d.GenerateCodeChallengeFromVerifier,r);try{let o=yield y(RC,d.Sha256Digest,t,e,r)(n,e,r);return Gt(new Uint8Array(o))}catch{throw T(Fi)}})}var ap=class extends _t{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,a,l,u),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=c,this.eventHandler=i}acquireToken(e,t){try{let o={popupName:this.generatePopupName(e.scopes||rn,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window};return this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,o,t)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),o.popup=this.openSizedPopup("about:blank",o),this.acquireTokenPopupAsync(e,o,t))}catch(r){return Promise.reject(r)}}logout(e){try{this.logger.verbose("logoutPopup called");let t=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(t),popupWindowAttributes:e?.popupWindowAttributes||{},popupWindowParent:e?.popupWindowParent??window},o=e&&e.authority,i=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(t,r,o,i)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(t,r,o,i))}catch(t){return Promise.reject(t)}}acquireTokenPopupAsync(e,t,r){return f(this,null,function*(){this.logger.verbose("acquireTokenPopupAsync called");let o=yield y(this.initializeAuthorizationRequest.bind(this),d.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,D.Popup);t.popup&&pu(o.authority);let i=xt.isPlatformBrokerAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme);return o.platformBroker=i,this.config.auth.protocolMode===ge.EAR?this.executeEarFlow(o,t):this.executeCodeFlow(o,t,r)})}executeCodeFlow(e,t,r){return f(this,null,function*(){let o=e.correlationId,i=this.initializeServerTelemetryManager(X.acquireTokenPopup),s=r||(yield y(uo,d.GeneratePkceCodes,this.logger,this.performanceClient,o)(this.performanceClient,this.logger,o)),a=w(m({},e),{codeChallenge:s.challenge});try{let c=yield y(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,o)({serverTelemetryManager:i,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account}),l=yield y(Na,d.GetAuthCodeUrl,this.logger,this.performanceClient,o)(this.config,c.authority,a,this.logger,this.performanceClient),u=this.initiateAuthRequest(l,t);this.eventHandler.emitEvent(S.POPUP_OPENED,D.Popup,{popupWindow:u},null);let h=yield this.monitorPopupForHash(u,t.popupWindowParent),g=ke(Ma,d.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(h,this.config.auth.OIDCOptions.serverResponseType,this.logger);return yield y(Pa,d.HandleResponseCode,this.logger,this.performanceClient,o)(e,g,s.verifier,X.acquireTokenPopup,this.config,c,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)}catch(c){throw t.popup?.close(),c instanceof F&&(c.setCorrelationId(this.correlationId),i.cacheFailedRequest(c)),c}})}executeEarFlow(e,t){return f(this,null,function*(){let r=e.correlationId,o=yield y(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,r)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),i=yield y(Ia,d.GenerateEarKey,this.logger,this.performanceClient,r)(),s=w(m({},e),{earJwk:i}),a=t.popup||this.openPopup("about:blank",t);(yield Oa(a.document,this.config,o,s,this.logger,this.performanceClient)).submit();let l=yield y(this.monitorPopupForHash.bind(this),d.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(a,t.popupWindowParent),u=ke(Ma,d.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(l,this.config.auth.OIDCOptions.serverResponseType,this.logger);return y(xa,d.HandleResponseEar,this.logger,this.performanceClient,r)(s,u,X.acquireTokenPopup,this.config,o,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)})}logoutPopupAsync(e,t,r,o){return f(this,null,function*(){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(S.LOGOUT_START,D.Popup,e);let i=this.initializeServerTelemetryManager(X.logoutPopup);try{yield this.clearCacheOnLogout(e.account);let s=yield y(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:r,account:e.account||void 0});try{s.authority.endSessionEndpoint}catch{if(e.account?.homeAccountId&&e.postLogoutRedirectUri&&s.authority.protocolMode===ge.OIDC){if(this.browserStorage.removeAccount(e.account?.homeAccountId),this.eventHandler.emitEvent(S.LOGOUT_SUCCESS,D.Popup,e),o){let l={apiId:X.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},u=x.getAbsoluteUrl(o,dt());yield this.navigationClient.navigateInternal(u,l)}t.popup?.close();return}}let a=s.getLogoutUri(e);this.eventHandler.emitEvent(S.LOGOUT_SUCCESS,D.Popup,e);let c=this.openPopup(a,t);if(this.eventHandler.emitEvent(S.POPUP_OPENED,D.Popup,{popupWindow:c},null),yield this.monitorPopupForHash(c,t.popupWindowParent).catch(()=>{}),o){let l={apiId:X.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},u=x.getAbsoluteUrl(o,dt());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${u}`),yield this.navigationClient.navigateInternal(u,l)}else this.logger.verbose("No main window navigation requested")}catch(s){throw t.popup?.close(),s instanceof F&&(s.setCorrelationId(this.correlationId),i.cacheFailedRequest(s)),this.eventHandler.emitEvent(S.LOGOUT_FAILURE,D.Popup,null,s),this.eventHandler.emitEvent(S.LOGOUT_END,D.Popup),s}this.eventHandler.emitEvent(S.LOGOUT_END,D.Popup)})}initiateAuthRequest(e,t){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),T(Dn)}monitorPopupForHash(e,t){return new Promise((r,o)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");let i=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(i),o(T(ln));return}let s="";try{s=e.location.href}catch{}if(!s||s==="about:blank")return;clearInterval(i);let a="",c=this.config.auth.OIDCOptions.serverResponseType;e&&(c===In.QUERY?a=e.location.search:a=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(a)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,t)})}openPopup(e,t){try{let r;if(t.popup?(r=t.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof t.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,t)),!r)throw T(Xs);return r.focus&&r.focus(),this.currentWindow=r,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),T(Js)}}openSizedPopup(e,{popupName:t,popupWindowAttributes:r,popupWindowParent:o}){let i=o.screenLeft?o.screenLeft:o.screenX,s=o.screenTop?o.screenTop:o.screenY,a=o.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=o.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,l=r.popupSize?.width,u=r.popupSize?.height,h=r.popupPosition?.top,g=r.popupPosition?.left;return(!l||l<0||l>a)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),l=me.POPUP_WIDTH),(!u||u<0||u>c)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),u=me.POPUP_HEIGHT),(!h||h<0||h>c)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),h=Math.max(0,c/2-me.POPUP_HEIGHT/2+s)),(!g||g<0||g>a)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),g=Math.max(0,a/2-me.POPUP_WIDTH/2+i)),o.open(e,t,`width=${l}, height=${u}, top=${h}, left=${g}, scrollbars=yes`)}unloadWindow(e){this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(e,t){return`${me.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${t}.${this.correlationId}`}generateLogoutPopupName(e){let t=e.account&&e.account.homeAccountId;return`${me.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${t}.${this.correlationId}`}};function r0(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;let n=window.performance.getEntriesByType("navigation");return(n.length?n[0]:void 0)?.type}var cp=class extends _t{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,a,l,u),this.nativeStorage=c}acquireToken(e){return f(this,null,function*(){let t=yield y(this.initializeAuthorizationRequest.bind(this),d.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,D.Redirect);t.platformBroker=xt.isPlatformBrokerAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme);let r=i=>{i.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(S.RESTORE_FROM_BFCACHE,D.Redirect))},o=this.getRedirectStartPage(e.redirectStartPage);this.logger.verbosePii(`Redirect start page: ${o}`),this.browserStorage.setTemporaryCache(ve.ORIGIN_URI,o,!0),window.addEventListener("pageshow",r);try{this.config.auth.protocolMode===ge.EAR?yield this.executeEarFlow(t):yield this.executeCodeFlow(t,e.onRedirectNavigate)}catch(i){throw i instanceof F&&i.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",r),i}})}executeCodeFlow(e,t){return f(this,null,function*(){let r=e.correlationId,o=this.initializeServerTelemetryManager(X.acquireTokenRedirect),i=yield y(uo,d.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),s=w(m({},e),{codeChallenge:i.challenge});this.browserStorage.cacheAuthorizeRequest(s,i.verifier);try{let a=yield y(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:s.authority,requestAzureCloudOptions:s.azureCloudOptions,requestExtraQueryParameters:s.extraQueryParameters,account:s.account}),c=yield y(Na,d.GetAuthCodeUrl,this.logger,this.performanceClient,e.correlationId)(this.config,a.authority,s,this.logger,this.performanceClient);return yield this.initiateAuthRequest(c,t)}catch(a){throw a instanceof F&&(a.setCorrelationId(this.correlationId),o.cacheFailedRequest(a)),a}})}executeEarFlow(e){return f(this,null,function*(){let t=e.correlationId,r=yield y(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),o=yield y(Ia,d.GenerateEarKey,this.logger,this.performanceClient,t)(),i=w(m({},e),{earJwk:o});this.browserStorage.cacheAuthorizeRequest(i),(yield Oa(document,this.config,r,i,this.logger,this.performanceClient)).submit()})}handleRedirectPromise(e="",t,r,o){return f(this,null,function*(){let i=this.initializeServerTelemetryManager(X.handleRedirectPromise);try{let[s,a]=this.getRedirectResponse(e||"");if(!s)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),r0()!=="back_forward"?o.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;let c=this.browserStorage.getTemporaryCache(ve.ORIGIN_URI,!0)||v.EMPTY_STRING,l=x.removeHashFromUrl(c),u=x.removeHashFromUrl(window.location.href);if(l===u&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),c.indexOf("#")>-1&&OC(c),yield this.handleResponse(s,t,r,i);if(this.config.auth.navigateToLoginRequestUrl){if(!hu()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(ve.URL_HASH,a,!0);let h={apiId:X.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0},g=!0;if(!c||c==="null"){let p=PC();this.browserStorage.setTemporaryCache(ve.ORIGIN_URI,p,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),g=yield this.navigationClient.navigateInternal(p,h)}else this.logger.verbose(`Navigating to loginRequestUrl: ${c}`),g=yield this.navigationClient.navigateInternal(c,h);if(!g)return yield this.handleResponse(s,t,r,i)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),yield this.handleResponse(s,t,r,i);return null}catch(s){throw s instanceof F&&(s.setCorrelationId(this.correlationId),i.cacheFailedRequest(s)),s}})}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(this.config.auth.OIDCOptions.serverResponseType===In.QUERY?t=window.location.search:t=window.location.hash);let r=Qr.getDeserializedResponse(t);if(r){try{Ab(r,this.browserCrypto,D.Redirect)}catch(i){return i instanceof F&&this.logger.error(`Interaction type validation failed due to ${i.errorCode}: ${i.errorMessage}`),[null,""]}return du(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,t]}let o=this.browserStorage.getTemporaryCache(ve.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(ve.URL_HASH)),o&&(r=Qr.getDeserializedResponse(o),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,o]):[null,""]}handleResponse(e,t,r,o){return f(this,null,function*(){if(!e.state)throw T(to);if(e.ear_jwe){let a=yield y(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t.correlationId)({requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account});return y(xa,d.HandleResponseEar,this.logger,this.performanceClient,t.correlationId)(t,e,X.acquireTokenRedirect,this.config,a,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)}let s=yield y(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:t.authority});return y(Pa,d.HandleResponseCode,this.logger,this.performanceClient,t.correlationId)(t,e,r,X.acquireTokenRedirect,this.config,s,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)})}initiateAuthRequest(e,t){return f(this,null,function*(){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);let r={apiId:X.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},o=t||this.config.auth.onRedirectNavigate;if(typeof o=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),o(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),yield this.navigationClient.navigateExternal(e,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),yield this.navigationClient.navigateExternal(e,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),T(Dn)})}logout(e){return f(this,null,function*(){this.logger.verbose("logoutRedirect called");let t=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager(X.logout);try{this.eventHandler.emitEvent(S.LOGOUT_START,D.Redirect,e),yield this.clearCacheOnLogout(t.account);let o={apiId:X.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},i=yield y(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:e&&e.authority,requestExtraQueryParameters:e?.extraQueryParameters,account:e&&e.account||void 0});if(i.authority.protocolMode===ge.OIDC)try{i.authority.endSessionEndpoint}catch{if(t.account?.homeAccountId){this.browserStorage.removeAccount(t.account?.homeAccountId),this.eventHandler.emitEvent(S.LOGOUT_SUCCESS,D.Redirect,t);return}}let s=i.getLogoutUri(t);if(this.eventHandler.emitEvent(S.LOGOUT_SUCCESS,D.Redirect,t),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(s)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,un.SIGNOUT),yield this.navigationClient.navigateExternal(s,o);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,un.SIGNOUT),yield this.navigationClient.navigateExternal(s,o);return}}catch(o){throw o instanceof F&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),this.eventHandler.emitEvent(S.LOGOUT_FAILURE,D.Redirect,null,o),this.eventHandler.emitEvent(S.LOGOUT_END,D.Redirect),o}this.eventHandler.emitEvent(S.LOGOUT_END,D.Redirect)})}getRedirectStartPage(e){let t=e||window.location.href;return x.getAbsoluteUrl(t,dt())}};function Rb(n,e,t,r,o){return f(this,null,function*(){if(e.addQueueMeasurement(d.SilentHandlerInitiateAuthRequest,r),!n)throw t.info("Navigate url is empty"),T(Dn);return o?y(o0,d.SilentHandlerLoadFrame,t,e,r)(n,o,e,r):ke(i0,d.SilentHandlerLoadFrameSync,t,e,r)(n)})}function kb(n,e,t,r,o){return f(this,null,function*(){let i=FC();if(!i.contentDocument)throw"No document associated with iframe!";return(yield Oa(i.contentDocument,n,e,t,r,o)).submit(),i})}function LC(n,e,t,r,o,i,s){return f(this,null,function*(){return r.addQueueMeasurement(d.SilentHandlerMonitorIframeForHash,i),new Promise((a,c)=>{e<Zf&&o.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${Zf}ms). This may result in timeouts.`);let l=window.setTimeout(()=>{window.clearInterval(u),c(T(ea))},e),u=window.setInterval(()=>{let h="",g=n.contentWindow;try{h=g?g.location.href:""}catch{}if(!h||h==="about:blank")return;let p="";g&&(s===In.QUERY?p=g.location.search:p=g.location.hash),window.clearTimeout(l),window.clearInterval(u),a(p)},t)}).finally(()=>{ke(s0,d.RemoveHiddenIframe,o,r,i)(n)})})}function o0(n,e,t,r){return t.addQueueMeasurement(d.SilentHandlerLoadFrame,r),new Promise((o,i)=>{let s=FC();window.setTimeout(()=>{if(!s){i("Unable to load iframe");return}s.src=n,o(s)},e)})}function i0(n){let e=FC();return e.src=n,e}function FC(){let n=document.createElement("iframe");return n.className="msalSilentIframe",n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height="0",n.style.border="0",n.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(n),n}function s0(n){document.body===n.parentNode&&document.body.removeChild(n)}var lp=class extends _t{constructor(e,t,r,o,i,s,a,c,l,u,h){super(e,t,r,o,i,s,c,u,h),this.apiId=a,this.nativeStorage=l}acquireToken(e){return f(this,null,function*(){this.performanceClient.addQueueMeasurement(d.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");let t=m({},e);t.prompt?t.prompt!==he.NONE&&t.prompt!==he.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${t.prompt} with ${he.NONE}`),t.prompt=he.NONE):t.prompt=he.NONE;let r=yield y(this.initializeAuthorizationRequest.bind(this),d.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(t,D.Silent);return r.platformBroker=xt.isPlatformBrokerAvailable(this.config,this.logger,this.nativeMessageHandler,r.authenticationScheme),pu(r.authority),this.config.auth.protocolMode===ge.EAR?this.executeEarFlow(r):this.executeCodeFlow(r)})}executeCodeFlow(e){return f(this,null,function*(){let t,r=this.initializeServerTelemetryManager(this.apiId);try{return t=yield y(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),yield y(this.silentTokenHelper.bind(this),d.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(t,e)}catch(o){if(o instanceof F&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),!t||!(o instanceof F)||o.errorCode!==me.INVALID_GRANT_ERROR)throw o;return this.performanceClient.addFields({retryError:o.errorCode},this.correlationId),yield y(this.silentTokenHelper.bind(this),d.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(t,e)}})}executeEarFlow(e){return f(this,null,function*(){let t=e.correlationId,r=yield y(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),o=yield y(Ia,d.GenerateEarKey,this.logger,this.performanceClient,t)(),i=w(m({},e),{earJwk:o}),s=yield y(kb,d.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,t)(this.config,r,i,this.logger,this.performanceClient),a=this.config.auth.OIDCOptions.serverResponseType,c=yield y(LC,d.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,t)(s,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,t,a),l=ke(Ma,d.DeserializeResponse,this.logger,this.performanceClient,t)(c,a,this.logger);return y(xa,d.HandleResponseEar,this.logger,this.performanceClient,t)(i,l,this.apiId,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)})}logout(){return Promise.reject(T(Mn))}silentTokenHelper(e,t){return f(this,null,function*(){let r=t.correlationId;this.performanceClient.addQueueMeasurement(d.SilentIframeClientTokenHelper,r);let o=yield y(uo,d.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),i=w(m({},t),{codeChallenge:o.challenge}),s=yield y(Na,d.GetAuthCodeUrl,this.logger,this.performanceClient,r)(this.config,e.authority,i,this.logger,this.performanceClient),a=yield y(Rb,d.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(s,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait),c=this.config.auth.OIDCOptions.serverResponseType,l=yield y(LC,d.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(a,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,c),u=ke(Ma,d.DeserializeResponse,this.logger,this.performanceClient,r)(l,c,this.logger);return y(Pa,d.HandleResponseCode,this.logger,this.performanceClient,r)(t,u,o.verifier,this.apiId,this.config,e,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)})}};var up=class extends _t{acquireToken(e){return f(this,null,function*(){this.performanceClient.addQueueMeasurement(d.SilentRefreshClientAcquireToken,e.correlationId);let t=yield y(vu,d.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),r=m(m({},e),t);e.redirectUri&&(r.redirectUri=this.getRedirectUri(e.redirectUri));let o=this.initializeServerTelemetryManager(X.acquireTokenSilent_silentFlow),i=yield this.createRefreshTokenClient({serverTelemetryManager:o,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return y(i.acquireTokenByRefreshToken.bind(i),d.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(r).catch(s=>{throw s.setCorrelationId(this.correlationId),o.cacheFailedRequest(s),s})})}logout(){return Promise.reject(T(Mn))}createRefreshTokenClient(e){return f(this,null,function*(){let t=yield y(this.getClientConfiguration.bind(this),d.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new iu(t,this.performanceClient)})}};var dp=class{constructor(e,t,r,o){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=t,this.logger=r,this.cryptoObj=o}loadExternalTokens(e,t,r){return f(this,null,function*(){if(!this.isBrowserEnvironment)throw T(Rn);let o=e.correlationId||He(),i=t.id_token?Ls.extractTokenClaims(t.id_token,Xe):void 0,s={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=e.authority?new $t($t.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,s,this.logger,e.correlationId||He()):void 0,c=yield this.loadAccount(e,r.clientInfo||t.client_info||"",o,i,a),l=yield this.loadIdToken(t,c.homeAccountId,c.environment,c.realm,o),u=yield this.loadAccessToken(e,t,c.homeAccountId,c.environment,c.realm,r,o),h=yield this.loadRefreshToken(t,c.homeAccountId,c.environment,o);return this.generateAuthenticationResult(e,{account:c,idToken:l,accessToken:u,refreshToken:h},i,a)})}loadAccount(e,t,r,o,i){return f(this,null,function*(){if(this.logger.verbose("TokenCache - loading account"),e.account){let l=Te.createFromAccountInfo(e.account);return yield this.storage.setAccount(l,r),l}else if(!i||!t&&!o)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),T(la);let s=Te.generateHomeAccountId(t,i.authorityType,this.logger,this.cryptoObj,o),a=o?.tid,c=Gs(this.storage,i,s,Xe,o,t,i.hostnameAndPort,a,void 0,void 0,this.logger);return yield this.storage.setAccount(c,r),c})}loadIdToken(e,t,r,o,i){return f(this,null,function*(){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");let s=fe.createIdTokenEntity(t,r,e.id_token,this.config.auth.clientId,o);return yield this.storage.setIdTokenCredential(s,i),s})}loadAccessToken(e,t,r,o,i,s,a){return f(this,null,function*(){if(t.access_token)if(t.expires_in){if(!t.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");let c=t.scope?le.fromString(t.scope):new le(e.scopes),l=s.expiresOn||t.expires_in+Ze.nowSeconds(),u=s.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+Ze.nowSeconds(),h=fe.createAccessTokenEntity(r,o,t.access_token,this.config.auth.clientId,i,c.printScopes(),l,u,Xe);return yield this.storage.setAccessTokenCredential(h,a),h})}loadRefreshToken(e,t,r,o){return f(this,null,function*(){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");let i=fe.createRefreshTokenEntity(t,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return yield this.storage.setRefreshTokenCredential(i,o),i})}generateAuthenticationResult(e,t,r,o){let i="",s=[],a=null,c;t?.accessToken&&(i=t.accessToken.secret,s=le.fromString(t.accessToken.target).asArray(),a=Ze.toDateFromSeconds(t.accessToken.expiresOn),c=Ze.toDateFromSeconds(t.accessToken.extendedExpiresOn));let l=t.account;return{authority:o?o.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:s,account:l.getAccountInfo(),idToken:t.idToken?.secret||"",idTokenClaims:r||{},accessToken:i,fromCache:!0,expiresOn:a,correlationId:e.correlationId||"",requestId:"",extExpiresOn:c,familyId:t.refreshToken?.familyId||"",tokenType:t?.accessToken?.tokenType||"",state:e.state||"",cloudGraphHostName:l.cloudGraphHostName||"",msGraphHost:l.msGraphHost||"",fromNativeBroker:!1}}};var hp=class extends xi{constructor(e){super(e),this.includeRedirectUri=!1}};var fp=class extends _t{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,c,l,u),this.apiId=a}acquireToken(e){return f(this,null,function*(){if(!e.code)throw T(ua);let t=yield y(this.initializeAuthorizationRequest.bind(this),d.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,D.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{let o=w(m({},t),{code:e.code}),i=yield y(this.getClientConfiguration.bind(this),d.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),s=new hp(i);this.logger.verbose("Auth code client created");let a=new Ra(s,this.browserStorage,o,this.logger,this.performanceClient);return yield y(a.handleCodeResponseFromServer.bind(a),d.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,!1)}catch(o){throw o instanceof F&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),o}})}logout(){return Promise.reject(T(Mn))}};function Nb(n,e,t){let r=window.msal?.clientIds||[],o=r.length,i=r.filter(s=>s===n).length;i>1&&t.warning("There is already an instance of MSAL.js in the window with the same client id."),e.add({msalInstanceCount:o,sameClientIdInstanceCount:i})}function Pn(n){let e=n?.idTokenClaims;if(e?.tfp||e?.acr)return"B2C";if(e?.tid){if(e?.tid==="9188040d-6c67-4c5b-b112-36a304b66dad")return"MSA"}else return;return"AAD"}function pp(n,e){try{fu(n)}catch(t){throw e.end({success:!1},t),t}}var La=class n{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new Sa(this.logger,this.performanceClient):Kr,this.eventHandler=new ip(this.logger),this.browserStorage=this.isBrowserEnvironment?new Aa(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,fC(this.config.auth)):ub(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);let t={cacheLocation:ye.MemoryStorage,temporaryCacheLocation:ye.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new Aa(this.config.auth.clientId,t,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new dp(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static createController(e,t){return f(this,null,function*(){let r=new n(e);return yield r.initialize(t),r})}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}initialize(e,t){return f(this,null,function*(){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(S.INITIALIZE_END);return}let r=e?.correlationId||this.getRequestCorrelationId(),o=this.config.system.allowPlatformBroker,i=this.performanceClient.startMeasurement(d.InitializeClientApplication,r);if(this.eventHandler.emitEvent(S.INITIALIZE_START),!t)try{this.logMultipleInstances(i)}catch{}if(yield y(this.browserStorage.initialize.bind(this.browserStorage),d.InitializeCache,this.logger,this.performanceClient,r)(r),o)try{this.nativeExtensionProvider=yield xt.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)}catch(s){this.logger.verbose(s)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),yield y(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),d.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,r)(this.performanceClient,r)),this.config.system.asyncPopups&&(yield this.preGeneratePkceCodes(r)),this.initialized=!0,this.eventHandler.emitEvent(S.INITIALIZE_END),i.end({allowPlatformBroker:o,success:!0})})}handleRedirectPromise(e){return f(this,null,function*(){if(this.logger.verbose("handleRedirectPromise called"),Kf(this.initialized),this.isBrowserEnvironment){let t=e||"",r=this.redirectResponse.get(t);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(t,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null})}handleRedirectPromiseInternal(e){return f(this,null,function*(){if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if(this.browserStorage.getInteractionInProgress()?.type===un.SIGNOUT)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);let r=this.getAllAccounts(),o=this.browserStorage.getCachedNativeRequest(),i=o&&xt.isPlatformBrokerAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!e,s;this.eventHandler.emitEvent(S.HANDLE_REDIRECT_START,D.Redirect);let a;try{if(i&&this.nativeExtensionProvider){s=this.performanceClient.startMeasurement(d.AcquireTokenRedirect,o?.correlationId||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform");let c=new lo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,X.handleRedirectPromise,this.performanceClient,this.nativeExtensionProvider,o.accountId,this.nativeInternalStorage,o.correlationId);a=y(c.handleRedirectPromise.bind(c),d.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(this.performanceClient,s.event.correlationId)}else{let[c,l]=this.browserStorage.getCachedRequest(),u=c.correlationId;s=this.performanceClient.startMeasurement(d.AcquireTokenRedirect,u),this.logger.trace("handleRedirectPromise - acquiring token from web flow");let h=this.createRedirectClient(u);a=y(h.handleRedirectPromise.bind(h),d.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(e,c,l,s)}}catch(c){throw this.browserStorage.resetRequestCache(),c}return a.then(c=>(c?(this.browserStorage.resetRequestCache(),r.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(S.LOGIN_SUCCESS,D.Redirect,c),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_SUCCESS,D.Redirect,c),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),s.end({success:!0,accountType:Pn(c.account)})):s.event.errorCode?s.end({success:!1}):s.discard(),this.eventHandler.emitEvent(S.HANDLE_REDIRECT_END,D.Redirect),c)).catch(c=>{this.browserStorage.resetRequestCache();let l=c;throw r.length>0?this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_FAILURE,D.Redirect,null,l):this.eventHandler.emitEvent(S.LOGIN_FAILURE,D.Redirect,null,l),this.eventHandler.emitEvent(S.HANDLE_REDIRECT_END,D.Redirect),s.end({success:!1},l),c})})}acquireTokenRedirect(e){return f(this,null,function*(){let t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t);let r=this.performanceClient.startMeasurement(d.AcquireTokenPreRedirect,t);r.add({accountType:Pn(e.account),scenarioId:e.scenarioId});let o=e.onRedirectNavigate;if(o)e.onRedirectNavigate=s=>{let a=typeof o=="function"?o(s):void 0;return a!==!1?r.end({success:!0}):r.discard(),a};else{let s=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=a=>{let c=typeof s=="function"?s(a):void 0;return c!==!1?r.end({success:!0}):r.discard(),c}}let i=this.getAllAccounts().length>0;try{Wf(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,un.SIGNIN),i?this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_START,D.Redirect,e):this.eventHandler.emitEvent(S.LOGIN_START,D.Redirect,e);let s;return this.nativeExtensionProvider&&this.canUsePlatformBroker(e)?s=new lo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,X.acquireTokenRedirect,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e,r).catch(c=>{if(c instanceof qt&&co(c))return this.nativeExtensionProvider=void 0,this.createRedirectClient(t).acquireToken(e);if(c instanceof $e)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(t).acquireToken(e);throw c}):s=this.createRedirectClient(t).acquireToken(e),yield s}catch(s){throw this.browserStorage.resetRequestCache(),r.end({success:!1},s),i?this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_FAILURE,D.Redirect,null,s):this.eventHandler.emitEvent(S.LOGIN_FAILURE,D.Redirect,null,s),s}})}acquireTokenPopup(e){let t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(d.AcquireTokenPopup,t);r.add({scenarioId:e.scenarioId,accountType:Pn(e.account)});try{this.logger.verbose("acquireTokenPopup called",t),pp(this.initialized,r),this.browserStorage.setInteractionInProgress(!0,un.SIGNIN)}catch(a){return Promise.reject(a)}let o=this.getAllAccounts();o.length>0?this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_START,D.Popup,e):this.eventHandler.emitEvent(S.LOGIN_START,D.Popup,e);let i,s=this.getPreGeneratedPkceCodes(t);return this.canUsePlatformBroker(e)?i=this.acquireTokenNative(w(m({},e),{correlationId:t}),X.acquireTokenPopup).then(a=>(r.end({success:!0,isNativeBroker:!0,accountType:Pn(a.account)}),a)).catch(a=>{if(a instanceof qt&&co(a))return this.nativeExtensionProvider=void 0,this.createPopupClient(t).acquireToken(e,s);if(a instanceof $e)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(t).acquireToken(e,s);throw a}):i=this.createPopupClient(t).acquireToken(e,s),i.then(a=>(o.length<this.getAllAccounts().length?this.eventHandler.emitEvent(S.LOGIN_SUCCESS,D.Popup,a):this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_SUCCESS,D.Popup,a),r.end({success:!0,accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length,accountType:Pn(a.account)}),a)).catch(a=>(o.length>0?this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_FAILURE,D.Popup,null,a):this.eventHandler.emitEvent(S.LOGIN_FAILURE,D.Popup,null,a),r.end({success:!1},a),Promise.reject(a))).finally(()=>f(this,null,function*(){this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&(yield this.preGeneratePkceCodes(t))}))}trackPageVisibilityWithMeasurement(){let e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}ssoSilent(e){return f(this,null,function*(){let t=this.getRequestCorrelationId(e),r=w(m({},e),{prompt:e.prompt,correlationId:t});this.ssoSilentMeasurement=this.performanceClient.startMeasurement(d.SsoSilent,t),this.ssoSilentMeasurement?.add({scenarioId:e.scenarioId,accountType:Pn(e.account)}),pp(this.initialized,this.ssoSilentMeasurement),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",t),this.eventHandler.emitEvent(S.SSO_SILENT_START,D.Silent,r);let o;return this.canUsePlatformBroker(r)?o=this.acquireTokenNative(r,X.ssoSilent).catch(i=>{if(i instanceof qt&&co(i))return this.nativeExtensionProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw i}):o=this.createSilentIframeClient(r.correlationId).acquireToken(r),o.then(i=>(this.eventHandler.emitEvent(S.SSO_SILENT_SUCCESS,D.Silent,i),this.ssoSilentMeasurement?.end({success:!0,isNativeBroker:i.fromNativeBroker,accessTokenSize:i.accessToken.length,idTokenSize:i.idToken.length,accountType:Pn(i.account)}),i)).catch(i=>{throw this.eventHandler.emitEvent(S.SSO_SILENT_FAILURE,D.Silent,null,i),this.ssoSilentMeasurement?.end({success:!1},i),i}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})})}acquireTokenByCode(e){return f(this,null,function*(){let t=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",t);let r=this.performanceClient.startMeasurement(d.AcquireTokenByCode,t);pp(this.initialized,r),this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_BY_CODE_START,D.Silent,e),r.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw T(ha);if(e.code){let o=e.code,i=this.hybridAuthCodeResponses.get(o);return i?(this.logger.verbose("Existing acquireTokenByCode request found",t),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),i=this.acquireTokenByCodeAsync(w(m({},e),{correlationId:t})).then(s=>(this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_BY_CODE_SUCCESS,D.Silent,s),this.hybridAuthCodeResponses.delete(o),r.end({success:!0,isNativeBroker:s.fromNativeBroker,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:Pn(s.account)}),s)).catch(s=>{throw this.hybridAuthCodeResponses.delete(o),this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_BY_CODE_FAILURE,D.Silent,null,s),r.end({success:!1},s),s}),this.hybridAuthCodeResponses.set(o,i)),yield i}else if(e.nativeAccountId)if(this.canUsePlatformBroker(e,e.nativeAccountId)){let o=yield this.acquireTokenNative(w(m({},e),{correlationId:t}),X.acquireTokenByCode,e.nativeAccountId).catch(i=>{throw i instanceof qt&&co(i)&&(this.nativeExtensionProvider=void 0),i});return r.end({accountType:Pn(o.account),success:!0}),o}else throw T(fa);else throw T(da)}catch(o){throw this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_BY_CODE_FAILURE,D.Silent,null,o),r.end({success:!1},o),o}})}acquireTokenByCodeAsync(e){return f(this,null,function*(){return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(d.AcquireTokenByCodeAsync,e.correlationId),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),yield this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(o=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:o.fromCache,isNativeBroker:o.fromNativeBroker}),o)).catch(o=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},o),o}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})})}acquireTokenFromCache(e,t){return f(this,null,function*(){switch(this.performanceClient.addQueueMeasurement(d.AcquireTokenFromCache,e.correlationId),t){case Ge.Default:case Ge.AccessToken:case Ge.AccessTokenAndRefreshToken:let r=this.createSilentCacheClient(e.correlationId);return y(r.acquireToken.bind(r),d.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw C(Re.tokenRefreshRequired)}})}acquireTokenByRefreshToken(e,t){return f(this,null,function*(){switch(this.performanceClient.addQueueMeasurement(d.AcquireTokenByRefreshToken,e.correlationId),t){case Ge.Default:case Ge.AccessTokenAndRefreshToken:case Ge.RefreshToken:case Ge.RefreshTokenAndNetwork:let r=this.createSilentRefreshClient(e.correlationId);return y(r.acquireToken.bind(r),d.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw C(Re.tokenRefreshRequired)}})}acquireTokenBySilentIframe(e){return f(this,null,function*(){this.performanceClient.addQueueMeasurement(d.AcquireTokenBySilentIframe,e.correlationId);let t=this.createSilentIframeClient(e.correlationId);return y(t.acquireToken.bind(t),d.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)})}logout(e){return f(this,null,function*(){let t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect(m({correlationId:t},e))})}logoutRedirect(e){return f(this,null,function*(){let t=this.getRequestCorrelationId(e);return Wf(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,un.SIGNOUT),this.createRedirectClient(t).logout(e)})}logoutPopup(e){try{let t=this.getRequestCorrelationId(e);return fu(this.initialized),this.browserStorage.setInteractionInProgress(!0,un.SIGNOUT),this.createPopupClient(t).logout(e).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(t){return Promise.reject(t)}}clearCache(e){return f(this,null,function*(){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}let t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)})}getAllAccounts(e){return db(this.logger,this.browserStorage,this.isBrowserEnvironment,e)}getAccount(e){return hb(e,this.logger,this.browserStorage)}getAccountByUsername(e){return fb(e,this.logger,this.browserStorage)}getAccountByHomeId(e){return pb(e,this.logger,this.browserStorage)}getAccountByLocalId(e){return gb(e,this.logger,this.browserStorage)}setActiveAccount(e){mb(e,this.browserStorage)}getActiveAccount(){return yb(this.browserStorage)}hydrateCache(e,t){return f(this,null,function*(){this.logger.verbose("hydrateCache called");let r=Te.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return yield this.browserStorage.setAccount(r,e.correlationId),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)})}acquireTokenNative(e,t,r,o){return f(this,null,function*(){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw T(oo);return new lo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.nativeExtensionProvider,r||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e,o)})}canUsePlatformBroker(e,t){if(this.logger.trace("canUsePlatformBroker called"),!xt.isPlatformBrokerAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isPlatformBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case he.NONE:case he.CONSENT:case he.LOGIN:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${e.prompt} is not compatible with platform broker flow, returning false`),!1}return!t&&!this.getNativeAccountId(e)?(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){let t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new ap(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new cp(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new lp(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,X.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new ka(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new up(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new fp(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,X.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return qf(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){if(this.config.cache.cacheLocation!==ye.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.subscribeCrossTab()}disableAccountStorageEvents(){if(this.config.cache.cacheLocation!==ye.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.unsubscribeCrossTab()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e?.correlationId?e.correlationId:this.isBrowserEnvironment?He():v.EMPTY_STRING}loginRedirect(e){return f(this,null,function*(){let t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect(m({correlationId:t},e||_C))})}loginPopup(e){let t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup(m({correlationId:t},e||_C))}acquireTokenSilent(e){return f(this,null,function*(){let t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(d.AcquireTokenSilent,t);r.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),pp(this.initialized,r),this.logger.verbose("acquireTokenSilent called",t);let o=e.account||this.getActiveAccount();if(!o)throw T(oa);return r.add({accountType:Pn(o)}),this.acquireTokenSilentDeduped(e,o,t).then(i=>(r.end({success:!0,fromCache:i.fromCache,isNativeBroker:i.fromNativeBroker,accessTokenSize:i.accessToken.length,idTokenSize:i.idToken.length}),w(m({},i),{state:e.state,correlationId:t}))).catch(i=>{throw i instanceof F&&i.setCorrelationId(t),r.end({success:!1},i),i})})}acquireTokenSilentDeduped(e,t,r){return f(this,null,function*(){let o=fr(this.config.auth.clientId,w(m({},e),{authority:e.authority||this.config.auth.authority,correlationId:r}),t.homeAccountId),i=JSON.stringify(o),s=this.activeSilentTokenRequests.get(i);if(typeof s>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",r),this.performanceClient.addFields({deduped:!1},r);let a=y(this.acquireTokenSilentAsync.bind(this),d.AcquireTokenSilentAsync,this.logger,this.performanceClient,r)(w(m({},e),{correlationId:r}),t);return this.activeSilentTokenRequests.set(i,a),a.finally(()=>{this.activeSilentTokenRequests.delete(i)})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),this.performanceClient.addFields({deduped:!0},r),s})}acquireTokenSilentAsync(e,t){return f(this,null,function*(){let r=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(d.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_START,D.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",r);let o=yield y(vb,d.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,t,this.config,this.performanceClient,this.logger),i=e.cacheLookupPolicy||Ge.Default;return this.acquireTokenSilentNoIframe(o,i).catch(a=>f(this,null,function*(){if(a0(a,i))if(this.activeIframeRequest)if(i!==Ge.Skip){let[l,u]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${u}`,o.correlationId);let h=this.performanceClient.startMeasurement(d.AwaitConcurrentIframe,o.correlationId);h.add({awaitIframeCorrelationId:u});let g=yield l;if(h.end({success:g}),g)return this.logger.verbose(`Parallel iframe request with correlationId: ${u} succeeded. Retrying cache and/or RT redemption`,o.correlationId),this.acquireTokenSilentNoIframe(o,i);throw this.logger.info(`Iframe request with correlationId: ${u} failed. Interaction is required.`),a}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",o.correlationId),y(this.acquireTokenBySilentIframe.bind(this),d.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o);else{let l;return this.activeIframeRequest=[new Promise(u=>{l=u}),o.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",o.correlationId),y(this.acquireTokenBySilentIframe.bind(this),d.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o).then(u=>(l(!0),u)).catch(u=>{throw l(!1),u}).finally(()=>{this.activeIframeRequest=void 0})}else throw a})).then(a=>(this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_SUCCESS,D.Silent,a),e.correlationId&&this.performanceClient.addFields({fromCache:a.fromCache,isNativeBroker:a.fromNativeBroker},e.correlationId),a)).catch(a=>{throw this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_FAILURE,D.Silent,null,a),a}).finally(()=>{document.removeEventListener("visibilitychange",r)})})}acquireTokenSilentNoIframe(e,t){return f(this,null,function*(){return xt.isPlatformBrokerAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.acquireTokenNative(e,X.acquireTokenSilent_silentFlow,e.account.nativeAccountId,t).catch(r=>f(this,null,function*(){throw r instanceof qt&&co(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,C(Re.tokenRefreshRequired)):r}))):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),t===Ge.AccessToken&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),y(this.acquireTokenFromCache.bind(this),d.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,t).catch(r=>{if(t===Ge.AccessToken)throw r;return this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_NETWORK_START,D.Silent,e),y(this.acquireTokenByRefreshToken.bind(this),d.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,t)}))})}preGeneratePkceCodes(e){return f(this,null,function*(){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=yield y(uo,d.GeneratePkceCodes,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()})}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");let t=this.pkceCode?m({},this.pkceCode):void 0;return this.pkceCode=void 0,this.logger.verbose(`${t?"Found":"Did not find"} pre-generated PKCE codes`),this.performanceClient.addFields({usePreGeneratedPkce:!!t},e),t}logMultipleInstances(e){let t=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(t),Nb(t,e,this.logger)}};function a0(n,e){let t=!(n instanceof $e&&n.subError!==gr.badToken),r=n.errorCode===me.INVALID_GRANT_ERROR||n.errorCode===Re.tokenRefreshRequired,o=t&&r||n.errorCode===gr.noTokensFound||n.errorCode===gr.refreshTokenExpired,i=LS.includes(e);return o&&i}function Ob(n,e){return f(this,null,function*(){let t=new Xf(n);return yield t.initialize(),La.createController(t,e)})}var Eu=class n{static createPublicClientApplication(e){return f(this,null,function*(){let t=yield Ob(e);return new n(e,t)})}constructor(e,t){this.isBroker=!1,this.controller=t||new La(new Xf(e))}initialize(e){return f(this,null,function*(){return this.controller.initialize(e,this.isBroker)})}acquireTokenPopup(e){return f(this,null,function*(){return this.controller.acquireTokenPopup(e)})}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}hydrateCache(e,t){return f(this,null,function*(){return this.controller.hydrateCache(e,t)})}clearCache(e){return this.controller.clearCache(e)}};var Iu=class{static getInteractionStatusFromEvent(e,t){switch(e.eventType){case S.LOGIN_START:return Ne.Login;case S.SSO_SILENT_START:return Ne.SsoSilent;case S.ACQUIRE_TOKEN_START:if(e.interactionType===D.Redirect||e.interactionType===D.Popup)return Ne.AcquireToken;break;case S.HANDLE_REDIRECT_START:return Ne.HandleRedirect;case S.LOGOUT_START:return Ne.Logout;case S.SSO_SILENT_SUCCESS:case S.SSO_SILENT_FAILURE:if(t&&t!==Ne.SsoSilent)break;return Ne.None;case S.LOGOUT_END:if(t&&t!==Ne.Logout)break;return Ne.None;case S.HANDLE_REDIRECT_END:if(t&&t!==Ne.HandleRedirect)break;return Ne.None;case S.LOGIN_SUCCESS:case S.LOGIN_FAILURE:case S.ACQUIRE_TOKEN_SUCCESS:case S.ACQUIRE_TOKEN_FAILURE:case S.RESTORE_FROM_BFCACHE:if(e.interactionType===D.Redirect||e.interactionType===D.Popup){if(t&&t!==Ne.Login&&t!==Ne.AcquireToken)break;return Ne.None}break}return null}};var gp="@azure/msal-angular",_u="4.0.12",Tu=new M("MSAL_INSTANCE"),Pb=new M("MSAL_GUARD_CONFIG"),c0=new M("MSAL_INTERCEPTOR_CONFIG"),l0=new M("MSAL_BROADCAST_CONFIG"),UC=(()=>{class n{constructor(t,r){this.msalInstance=t,this.msalBroadcastConfig=r,this.msalBroadcastConfig&&this.msalBroadcastConfig.eventsToReplay>0?(this.msalInstance.getLogger().clone(gp,_u).verbose(`BroadcastService - eventsToReplay set on BroadcastConfig, replaying the last ${this.msalBroadcastConfig.eventsToReplay} events`),this._msalSubject=new ja(this.msalBroadcastConfig.eventsToReplay)):this._msalSubject=new Ce,this.msalSubject$=this._msalSubject.asObservable(),this._inProgress=new Se(Ne.Startup),this.inProgress$=this._inProgress.asObservable(),this.msalInstance.addEventCallback(o=>{this._msalSubject.next(o);let i=Iu.getInteractionStatusFromEvent(o,this._inProgress.value);i!==null&&(this.msalInstance.getLogger().clone(gp,_u).verbose(`BroadcastService - ${o.eventType} results in setting inProgress from ${this._inProgress.value} to ${i}`),this._inProgress.next(i))})}resetInProgressEvent(){this._inProgress.value===Ne.Startup&&this._inProgress.next(Ne.None)}}return n.\u0275fac=function(t){return new(t||n)(R(Tu),R(l0,8))},n.\u0275prov=k({token:n,factory:n.\u0275fac}),n})(),Fa=(()=>{class n{constructor(t,r,o){this.instance=t,this.location=r,this.injector=o;let i=this.location.path(!0).split("#").pop();i&&(this.redirectHash=`#${i}`),this.instance.initializeWrapperLibrary(wC.Angular,_u)}initialize(){return J(this.instance.initialize())}acquireTokenPopup(t){return J(this.instance.acquireTokenPopup(t))}acquireTokenRedirect(t){return J(this.instance.acquireTokenRedirect(t))}acquireTokenSilent(t){return J(this.instance.acquireTokenSilent(t))}handleRedirectObservable(t){return J(this.instance.initialize().then(()=>this.instance.handleRedirectPromise(t||this.redirectHash)).finally(()=>{this.injector.get(UC).resetInProgressEvent()}))}loginPopup(t){return J(this.instance.loginPopup(t))}loginRedirect(t){return J(this.instance.loginRedirect(t))}logout(t){return J(this.instance.logout(t))}logoutRedirect(t){return J(this.instance.logoutRedirect(t))}logoutPopup(t){return J(this.instance.logoutPopup(t))}ssoSilent(t){return J(this.instance.ssoSilent(t))}getLogger(){return this.logger||(this.logger=this.instance.getLogger().clone(gp,_u)),this.logger}setLogger(t){this.logger=t.clone(gp,_u),this.instance.setLogger(t)}}return n.\u0275fac=function(t){return new(t||n)(R(Tu),R(Kn),R(Ut))},n.\u0275prov=k({token:n,factory:n.\u0275fac}),n})(),u0=(()=>{class n{constructor(t,r,o,i,s){this.msalGuardConfig=t,this.msalBroadcastService=r,this.authService=o,this.location=i,this.router=s,this.msalBroadcastService.inProgress$.subscribe()}parseUrl(t){return this.router.parseUrl(t)}getDestinationUrl(t){this.authService.getLogger().verbose("Guard - getting destination url");let r=document.getElementsByTagName("base"),o=this.location.normalize(r.length?r[0].href:window.location.origin),i=this.location.prepareExternalUrl(t);return i.startsWith("#")?(this.authService.getLogger().verbose("Guard - destination by hash routing"),`${o}/${i}`):`${o}${t}`}loginInteractively(t){let r=typeof this.msalGuardConfig.authRequest=="function"?this.msalGuardConfig.authRequest(this.authService,t):m({},this.msalGuardConfig.authRequest);if(this.msalGuardConfig.interactionType===D.Popup)return this.authService.getLogger().verbose("Guard - logging in by popup"),this.authService.loginPopup(r).pipe(B(i=>(this.authService.getLogger().verbose("Guard - login by popup successful, can activate, setting active account"),this.authService.instance.setActiveAccount(i.account),!0)));this.authService.getLogger().verbose("Guard - logging in by redirect");let o=this.getDestinationUrl(t.url);return this.authService.loginRedirect(m({redirectStartPage:o},r)).pipe(B(()=>!1))}activateHelper(t){if(this.msalGuardConfig.interactionType!==D.Popup&&this.msalGuardConfig.interactionType!==D.Redirect)throw new Ta("invalid_interaction_type","Invalid interaction type provided to MSAL Guard. InteractionType.Popup or InteractionType.Redirect must be provided in the MsalGuardConfiguration");if(this.authService.getLogger().verbose("MSAL Guard activated"),typeof window<"u"){if(x.hashContainsKnownProperties(window.location.hash)&&Yf.isInIframe()&&!this.authService.instance.getConfiguration().system.allowRedirectInIframe)return this.authService.getLogger().warning("Guard - redirectUri set to page with MSAL Guard. It is recommended to not set redirectUri to a page that requires authentication."),N(!1)}else return this.authService.getLogger().info("Guard - window is undefined, MSAL does not support server-side token acquisition"),N(!0);this.msalGuardConfig.loginFailedRoute&&(this.loginFailedRoute=this.parseUrl(this.msalGuardConfig.loginFailedRoute));let r=this.location.path(!0);return this.authService.initialize().pipe(Wt(()=>this.authService.handleRedirectObservable()),Wt(()=>{if(!this.authService.instance.getAllAccounts().length)return t?(this.authService.getLogger().verbose("Guard - no accounts retrieved, log in required to activate"),this.loginInteractively(t)):(this.authService.getLogger().verbose("Guard - no accounts retrieved, no state, cannot load"),N(!1));if(this.authService.getLogger().verbose("Guard - at least 1 account exists, can activate or load"),t){let o=this.includesCode(t.url),i=!!t.root&&!!t.root.fragment&&this.includesCode(`#${t.root.fragment}`),s=this.location.prepareExternalUrl(t.url).indexOf("#")===0;if(o&&(i||s))return this.authService.getLogger().info("Guard - Hash contains known code response, stopping navigation."),r.indexOf("#")>-1?N(this.parseUrl(this.location.path())):N(this.parseUrl(""))}return N(!0)}),hn(o=>(this.authService.getLogger().error("Guard - error while logging in, unable to activate"),this.authService.getLogger().errorPii(`Guard - error: ${o.message}`),this.loginFailedRoute&&t?(this.authService.getLogger().verbose("Guard - loginFailedRoute set, redirecting"),N(this.loginFailedRoute)):N(!1))))}includesCode(t){return t.lastIndexOf("/code")>-1&&t.lastIndexOf("/code")===t.length-5||t.indexOf("#code=")>-1||t.indexOf("&code=")>-1}canActivate(t,r){return this.authService.getLogger().verbose("Guard - canActivate"),this.activateHelper(r)}canActivateChild(t,r){return this.authService.getLogger().verbose("Guard - canActivateChild"),this.activateHelper(r)}canMatch(){return this.authService.getLogger().verbose("Guard - canLoad"),this.activateHelper()}}return n.\u0275fac=function(t){return new(t||n)(R(Pb),R(UC),R(Fa),R(Kn),R(Rs))},n.\u0275prov=k({token:n,factory:n.\u0275fac}),n})();var xb=(()=>{class n{static forRoot(t,r,o){return{ngModule:n,providers:[{provide:Tu,useValue:t},{provide:Pb,useValue:r},{provide:c0,useValue:o},Fa]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=Ht({providers:[u0,UC],imports:[yn]}),n})();var mp=class n{constructor(e){this.msal=e}login(){this.msal.loginRedirect()}static \u0275fac=function(t){return new(t||n)(Fe(Fa))};static \u0275cmp=mt({type:n,selectors:[["app-login"]],decls:5,vars:0,consts:[[2,"display","flex","justify-content","center","align-items","center","height","100vh","flex-direction","column"],[2,"padding","10px 20px","font-size","18px",3,"click"]],template:function(t,r){t&1&&(te(0,"div",0)(1,"h1"),Ee(2,"Bienvenido a PartyMap"),ee(),te(3,"button",1),Gn("click",function(){return r.login()}),Ee(4,"Iniciar sesi\xF3n con Azure"),ee()())},dependencies:[yn],encapsulation:2})};var d0=["*"],yp=class{_ngZone;_pending=[];_listeners=[];_targetStream=new Se(void 0);_clearListeners(){for(let e of this._listeners)e.remove();this._listeners=[]}constructor(e){this._ngZone=e}getLazyEmitter(e){return this._targetStream.pipe(qe(t=>{let r=new W(o=>{if(!t){this._pending.push({observable:r,observer:o});return}let i=t.addListener(e,s=>{this._ngZone.run(()=>o.next(s))});if(!i){o.complete();return}return this._listeners.push(i),()=>i.remove()});return r}))}setTarget(e){let t=this._targetStream.value;e!==t&&(t&&(this._clearListeners(),this._pending=[]),this._targetStream.next(e),this._pending.forEach(r=>r.observable.subscribe(r.observer)),this._pending=[])}destroy(){this._clearListeners(),this._pending=[],this._targetStream.complete()}},wu={center:{lat:37.421995,lng:-122.084092},zoom:17,mapTypeId:"roadmap"},Fb="500px",Ub="500px",HC=(()=>{class n{_elementRef=I(gc);_ngZone=I(de);_eventManager=new yp(I(de));_mapEl;_existingAuthFailureCallback;googleMap;_isBrowser;height=Fb;width=Ub;mapId;mapTypeId;set center(t){this._center=t}_center;set zoom(t){this._zoom=t}_zoom;set options(t){this._options=t||wu}_options=wu;mapInitialized=new Le;authFailure=new Le;boundsChanged=this._eventManager.getLazyEmitter("bounds_changed");centerChanged=this._eventManager.getLazyEmitter("center_changed");mapClick=this._eventManager.getLazyEmitter("click");mapDblclick=this._eventManager.getLazyEmitter("dblclick");mapDrag=this._eventManager.getLazyEmitter("drag");mapDragend=this._eventManager.getLazyEmitter("dragend");mapDragstart=this._eventManager.getLazyEmitter("dragstart");headingChanged=this._eventManager.getLazyEmitter("heading_changed");idle=this._eventManager.getLazyEmitter("idle");maptypeidChanged=this._eventManager.getLazyEmitter("maptypeid_changed");mapMousemove=this._eventManager.getLazyEmitter("mousemove");mapMouseout=this._eventManager.getLazyEmitter("mouseout");mapMouseover=this._eventManager.getLazyEmitter("mouseover");projectionChanged=this._eventManager.getLazyEmitter("projection_changed");mapRightclick=this._eventManager.getLazyEmitter("rightclick");tilesloaded=this._eventManager.getLazyEmitter("tilesloaded");tiltChanged=this._eventManager.getLazyEmitter("tilt_changed");zoomChanged=this._eventManager.getLazyEmitter("zoom_changed");constructor(){let t=I(xr);if(this._isBrowser=QT(t),this._isBrowser){let r=window;r.google,this._existingAuthFailureCallback=r.gm_authFailure,r.gm_authFailure=()=>{this._existingAuthFailureCallback&&this._existingAuthFailureCallback(),this.authFailure.emit()}}}ngOnChanges(t){(t.height||t.width)&&this._setSize();let r=this.googleMap;r&&(t.options&&r.setOptions(this._combineOptions()),t.center&&this._center&&r.setCenter(this._center),t.zoom&&this._zoom!=null&&r.setZoom(this._zoom),t.mapTypeId&&this.mapTypeId&&r.setMapTypeId(this.mapTypeId))}ngOnInit(){this._isBrowser&&(this._mapEl=this._elementRef.nativeElement.querySelector(".map-container"),this._setSize(),google.maps.Map?this._initialize(google.maps.Map):this._ngZone.runOutsideAngular(()=>{google.maps.importLibrary("maps").then(t=>this._initialize(t.Map))}))}_initialize(t){this._ngZone.runOutsideAngular(()=>{this.googleMap=new t(this._mapEl,this._combineOptions()),this._eventManager.setTarget(this.googleMap),this.mapInitialized.emit(this.googleMap)})}ngOnDestroy(){if(this.mapInitialized.complete(),this._eventManager.destroy(),this._isBrowser){let t=window;t.gm_authFailure=this._existingAuthFailureCallback}}fitBounds(t,r){this._assertInitialized(),this.googleMap.fitBounds(t,r)}panBy(t,r){this._assertInitialized(),this.googleMap.panBy(t,r)}panTo(t){this._assertInitialized(),this.googleMap.panTo(t)}panToBounds(t,r){this._assertInitialized(),this.googleMap.panToBounds(t,r)}getBounds(){return this._assertInitialized(),this.googleMap.getBounds()||null}getCenter(){return this._assertInitialized(),this.googleMap.getCenter()}getClickableIcons(){return this._assertInitialized(),this.googleMap.getClickableIcons()}getHeading(){return this._assertInitialized(),this.googleMap.getHeading()}getMapTypeId(){return this._assertInitialized(),this.googleMap.getMapTypeId()}getProjection(){return this._assertInitialized(),this.googleMap.getProjection()||null}getStreetView(){return this._assertInitialized(),this.googleMap.getStreetView()}getTilt(){return this._assertInitialized(),this.googleMap.getTilt()}getZoom(){return this._assertInitialized(),this.googleMap.getZoom()}get controls(){return this._assertInitialized(),this.googleMap.controls}get data(){return this._assertInitialized(),this.googleMap.data}get mapTypes(){return this._assertInitialized(),this.googleMap.mapTypes}get overlayMapTypes(){return this._assertInitialized(),this.googleMap.overlayMapTypes}_resolveMap(){return this.googleMap?Promise.resolve(this.googleMap):this.mapInitialized.pipe(St(1)).toPromise()}_setSize(){if(this._mapEl){let t=this._mapEl.style;t.height=this.height===null?"":Hb(this.height)||Fb,t.width=this.width===null?"":Hb(this.width)||Ub}}_combineOptions(){let t=this._options||{};return w(m({},t),{center:this._center||t.center||wu.center,zoom:this._zoom??t.zoom??wu.zoom,mapTypeId:this.mapTypeId||t.mapTypeId||wu.mapTypeId,mapId:this.mapId||t.mapId})}_assertInitialized(){this.googleMap}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=mt({type:n,selectors:[["google-map"]],inputs:{height:"height",width:"width",mapId:"mapId",mapTypeId:"mapTypeId",center:"center",zoom:"zoom",options:"options"},outputs:{mapInitialized:"mapInitialized",authFailure:"authFailure",boundsChanged:"boundsChanged",centerChanged:"centerChanged",mapClick:"mapClick",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",mapDragstart:"mapDragstart",headingChanged:"headingChanged",idle:"idle",maptypeidChanged:"maptypeidChanged",mapMousemove:"mapMousemove",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",projectionChanged:"projectionChanged",mapRightclick:"mapRightclick",tilesloaded:"tilesloaded",tiltChanged:"tiltChanged",zoomChanged:"zoomChanged"},exportAs:["googleMap"],features:[Fo],ngContentSelectors:d0,decls:2,vars:0,consts:[[1,"map-container"]],template:function(r,o){r&1&&(ty(),st(0,"div",0),ny(1))},encapsulation:2,changeDetection:0})}return n})(),h0=/([A-Za-z%]+)$/;function Hb(n){return n==null?"":h0.test(n)?n:`${n}px`}var f0=new M("MAP_MARKER"),p0={position:{lat:37.421995,lng:-122.084092}},Bb=(()=>{class n{_googleMap=I(HC);_ngZone=I(de);_eventManager=new yp(I(de));set title(t){this._title=t}_title;set position(t){this._position=t}_position;set label(t){this._label=t}_label;set clickable(t){this._clickable=t}_clickable;set options(t){this._options=t}_options;set icon(t){this._icon=t}_icon;set visible(t){this._visible=t}_visible;animationChanged=this._eventManager.getLazyEmitter("animation_changed");mapClick=this._eventManager.getLazyEmitter("click");clickableChanged=this._eventManager.getLazyEmitter("clickable_changed");cursorChanged=this._eventManager.getLazyEmitter("cursor_changed");mapDblclick=this._eventManager.getLazyEmitter("dblclick");mapDrag=this._eventManager.getLazyEmitter("drag");mapDragend=this._eventManager.getLazyEmitter("dragend");draggableChanged=this._eventManager.getLazyEmitter("draggable_changed");mapDragstart=this._eventManager.getLazyEmitter("dragstart");flatChanged=this._eventManager.getLazyEmitter("flat_changed");iconChanged=this._eventManager.getLazyEmitter("icon_changed");mapMousedown=this._eventManager.getLazyEmitter("mousedown");mapMouseout=this._eventManager.getLazyEmitter("mouseout");mapMouseover=this._eventManager.getLazyEmitter("mouseover");mapMouseup=this._eventManager.getLazyEmitter("mouseup");positionChanged=this._eventManager.getLazyEmitter("position_changed");mapRightclick=this._eventManager.getLazyEmitter("rightclick");shapeChanged=this._eventManager.getLazyEmitter("shape_changed");titleChanged=this._eventManager.getLazyEmitter("title_changed");visibleChanged=this._eventManager.getLazyEmitter("visible_changed");zindexChanged=this._eventManager.getLazyEmitter("zindex_changed");markerInitialized=new Le;marker;constructor(){}ngOnInit(){this._googleMap._isBrowser&&(google.maps.Marker&&this._googleMap.googleMap?this._initialize(this._googleMap.googleMap,google.maps.Marker):this._ngZone.runOutsideAngular(()=>{Promise.all([this._googleMap._resolveMap(),google.maps.importLibrary("marker")]).then(([t,r])=>{this._initialize(t,r.Marker)})}))}_initialize(t,r){this._ngZone.runOutsideAngular(()=>{this.marker=new r(this._combineOptions()),this._assertInitialized(),this.marker.setMap(t),this._eventManager.setTarget(this.marker),this.markerInitialized.next(this.marker)})}ngOnChanges(t){let{marker:r,_title:o,_position:i,_label:s,_clickable:a,_icon:c,_visible:l}=this;r&&(t.options&&r.setOptions(this._combineOptions()),t.title&&o!==void 0&&r.setTitle(o),t.position&&i&&r.setPosition(i),t.label&&s!==void 0&&r.setLabel(s),t.clickable&&a!==void 0&&r.setClickable(a),t.icon&&c&&r.setIcon(c),t.visible&&l!==void 0&&r.setVisible(l))}ngOnDestroy(){this.markerInitialized.complete(),this._eventManager.destroy(),this.marker?.setMap(null)}getAnimation(){return this._assertInitialized(),this.marker.getAnimation()||null}getClickable(){return this._assertInitialized(),this.marker.getClickable()}getCursor(){return this._assertInitialized(),this.marker.getCursor()||null}getDraggable(){return this._assertInitialized(),!!this.marker.getDraggable()}getIcon(){return this._assertInitialized(),this.marker.getIcon()||null}getLabel(){return this._assertInitialized(),this.marker.getLabel()||null}getOpacity(){return this._assertInitialized(),this.marker.getOpacity()||null}getPosition(){return this._assertInitialized(),this.marker.getPosition()||null}getShape(){return this._assertInitialized(),this.marker.getShape()||null}getTitle(){return this._assertInitialized(),this.marker.getTitle()||null}getVisible(){return this._assertInitialized(),this.marker.getVisible()}getZIndex(){return this._assertInitialized(),this.marker.getZIndex()||null}getAnchor(){return this._assertInitialized(),this.marker}_resolveMarker(){return this.marker?Promise.resolve(this.marker):this.markerInitialized.pipe(St(1)).toPromise()}_combineOptions(){let t=this._options||p0;return w(m({},t),{title:this._title||t.title,position:this._position||t.position,label:this._label||t.label,clickable:this._clickable??t.clickable,map:this._googleMap.googleMap,icon:this._icon||t.icon,visible:this._visible??t.visible})}_assertInitialized(){}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Lr({type:n,selectors:[["map-marker"]],inputs:{title:"title",position:"position",label:"label",clickable:"clickable",options:"options",icon:"icon",visible:"visible"},outputs:{animationChanged:"animationChanged",mapClick:"mapClick",clickableChanged:"clickableChanged",cursorChanged:"cursorChanged",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",draggableChanged:"draggableChanged",mapDragstart:"mapDragstart",flatChanged:"flatChanged",iconChanged:"iconChanged",mapMousedown:"mapMousedown",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",mapMouseup:"mapMouseup",positionChanged:"positionChanged",mapRightclick:"mapRightclick",shapeChanged:"shapeChanged",titleChanged:"titleChanged",visibleChanged:"visibleChanged",zindexChanged:"zindexChanged",markerInitialized:"markerInitialized"},exportAs:["mapMarker"],features:[ry([{provide:f0,useExisting:n}]),Fo]})}return n})();var jb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=en({type:n});static \u0275inj=Ht({})}return n})();function m0(n,e){if(n&1){let t=eh();te(0,"map-marker",3),Gn("mapClick",function(){let o=sc(t).$implicit,i=Tc();return ac(i.onMarkerClick(o.evento))}),ee()}if(n&2){let t=e.$implicit;Bo("position",t.position)("title",t.title)}}function y0(n,e){if(n&1){let t=eh();te(0,"div",4)(1,"h3"),Ee(2),ee(),te(3,"p"),Ee(4),ee(),te(5,"p")(6,"strong"),Ee(7,"Fecha:"),ee(),Ee(8),oy(9,"date"),ee(),te(10,"p")(11,"strong"),Ee(12,"Direcci\xF3n:"),ee(),Ee(13),ee(),te(14,"p")(15,"strong"),Ee(16,"Comuna:"),ee(),Ee(17),ee(),te(18,"button",5),Gn("click",function(){sc(t);let o=Tc();return ac(o.cerrarInfo())}),Ee(19,"Cerrar"),ee()()}if(n&2){let t=Tc();Xt(2),wc(t.selectedEvento.nombre),Xt(2),wc(t.selectedEvento.descripcion),Xt(4),jo(" ",iy(9,5,t.selectedEvento.fecha)),Xt(5),jo(" ",t.selectedEvento.ubicacion.direccion),Xt(4),jo(" ",t.selectedEvento.ubicacion.comuna)}}var vp=class n{http=I(Sh);center={lat:-33.4489,lng:-70.6693};zoom=12;markers=[];selectedEvento=null;mapOptions={center:{lat:-33.4489,lng:-70.6693},zoom:12,styles:[{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"transit",stylers:[{visibility:"off"}]}]};ngOnInit(){console.log("HomeMapComponent ngOnInit iniciado"),console.log("Centro del mapa:",this.center),console.log("Zoom del mapa:",this.zoom),console.log("Opciones del mapa:",this.mapOptions),this.http.get("http://localhost:8085/evento/all").subscribe({next:e=>{console.log("Datos cargados del backend:",e),this.markers=e.map(t=>({position:{lat:t.ubicacion.latitud,lng:t.ubicacion.longitud},title:t.nombre,evento:t})),console.log("Marcadores creados:",this.markers)},error:e=>{console.error("Error al cargar eventos desde el backend:",e),console.log("Usando datos de prueba..."),this.markers=[{position:{lat:-33.4372,lng:-70.6506},title:"Fiesta Drama",evento:{id:1,nombre:"FIESTA DRAMA",descripcion:"Fiesta Privada de Reggaeton",fecha:"2025-07-10T22:00:00",ubicacion:{direccion:"Calle Falsa 123",comuna:"Santiago",latitud:-33.4372,longitud:-70.6506}}}],console.log("Marcadores de prueba creados:",this.markers)}})}onMarkerClick(e){this.selectedEvento=e}cerrarInfo(){this.selectedEvento=null}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=mt({type:n,selectors:[["app-home-map"]],decls:3,vars:5,consts:[["height","100%","width","100%",3,"center","zoom","options"],[3,"position","title","mapClick",4,"ngFor","ngForOf"],["class","evento-info",4,"ngIf"],[3,"mapClick","position","title"],[1,"evento-info"],[3,"click"]],template:function(t,r){t&1&&(te(0,"google-map",0),Ec(1,m0,1,2,"map-marker",1),ee(),Ec(2,y0,20,7,"div",2)),t&2&&(Bo("center",r.mapOptions.center||r.center)("zoom",r.mapOptions.zoom??r.zoom)("options",r.mapOptions),Xt(),Bo("ngForOf",r.markers),Xt(),Bo("ngIf",r.selectedEvento))},dependencies:[yn,ph,Cy,Ey,jb,HC,Bb,Py],styles:["[_nghost-%COMP%]{display:block;height:calc(100vh - 70px);width:100%;position:relative}google-map[_ngcontent-%COMP%]{display:block;height:calc(100vh - 70px);width:100%;position:absolute;top:0;left:0}.evento-info[_ngcontent-%COMP%]{position:absolute;bottom:20px;left:20px;right:20px;background:#fff;padding:1rem;border-radius:10px;box-shadow:0 0 10px #0000004d;max-width:90%;z-index:1000}@media (max-width: 480px){[_nghost-%COMP%]{height:calc(100vh - 60px)}google-map[_ngcontent-%COMP%]{height:calc(100vh - 60px)}}"]})};var zb=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"login",component:mp},{path:"home",component:vp}];var Vb={auth:{clientId:"ad61d5c7-7d6e-4f58-8146-4b5b3d7b7124",authority:"https://duocdesarrollocloudnative.b2clogin.com/duocdesarrollocloudnative.onmicrosoft.com/B2C_1_signupsignin",redirectUri:"http://localhost:4200"},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1},system:{loggerOptions:{loggerCallback:(n,e)=>{console.log(e)},logLevel:re.Info,piiLoggingEnabled:!1}}};var $b=new Eu(Vb),BC={providers:[ov(zb),bh(Ah()),cd(xb.forRoot($b,{interactionType:D.Redirect},{interactionType:D.Redirect,protectedResourceMap:new Map})),{provide:Tu,useValue:$b}]};var Cp=class n{isMobileMenuOpen=!1;toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen;let e=document.querySelector(".mobile-menu-btn");e&&(this.isMobileMenuOpen?e.classList.add("active"):e.classList.remove("active"))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=mt({type:n,selectors:[["app-navbar"]],decls:40,vars:2,consts:[[1,"navbar"],[1,"navbar-container"],[1,"navbar-brand"],[1,"logo-icon"],["width","32","height","32","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M12 2L2 7L12 12L22 7L12 2Z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M2 17L12 22L22 17","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M2 12L12 17L22 12","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"navbar-nav"],["href","/home",1,"nav-link"],["href","/about",1,"nav-link"],["href","/contact",1,"nav-link"],[1,"search-container"],[1,"search-box"],["width","20","height","20","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",1,"search-icon"],["cx","11","cy","11","r","8","stroke","currentColor","stroke-width","2"],["d","M21 21L16.65 16.65","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["type","text","placeholder","Search...",1,"search-input"],[1,"navbar-auth"],["href","/login",1,"auth-link"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M15 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H15","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M10 17L15 12L10 7","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M15 12H3","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"mobile-menu-btn",3,"click"],[1,"mobile-menu"],["href","/home",1,"mobile-nav-link"],["href","/about",1,"mobile-nav-link"],["href","/contact",1,"mobile-nav-link"],["href","/login",1,"mobile-nav-link"]],template:function(t,r){t&1&&(te(0,"nav",0)(1,"div",1)(2,"div",2)(3,"div",3),cs(),te(4,"svg",4),st(5,"path",5)(6,"path",6)(7,"path",7),ee()()(),ls(),te(8,"div",8)(9,"a",9),Ee(10,"Home"),ee(),te(11,"a",10),Ee(12,"About"),ee(),te(13,"a",11),Ee(14,"Contact"),ee()(),te(15,"div",12)(16,"div",13),cs(),te(17,"svg",14),st(18,"circle",15)(19,"path",16),ee(),ls(),st(20,"input",17),ee()(),te(21,"div",18)(22,"a",19),cs(),te(23,"svg",20),st(24,"path",21)(25,"path",22)(26,"path",23),ee()()(),ls(),te(27,"div",24),Gn("click",function(){return r.toggleMobileMenu()}),st(28,"span")(29,"span")(30,"span"),ee()(),te(31,"div",25)(32,"a",26),Ee(33,"Home"),ee(),te(34,"a",27),Ee(35,"About"),ee(),te(36,"a",28),Ee(37,"Contact"),ee(),te(38,"a",29),Ee(39,"Login"),ee()()()),t&2&&(Xt(31),th("active",r.isMobileMenuOpen))},dependencies:[yn],styles:['.navbar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;z-index:1000;background:#ffffff1a;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-bottom:1px solid rgba(255,255,255,.2);transition:all .3s ease}.navbar-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px;display:flex;align-items:center;justify-content:space-between;height:70px}.navbar-brand[_ngcontent-%COMP%]{display:flex;align-items:center}.logo-icon[_ngcontent-%COMP%]{color:#333;transition:transform .3s ease}.logo-icon[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.navbar-nav[_ngcontent-%COMP%]{display:flex;align-items:center;gap:30px}.nav-link[_ngcontent-%COMP%]{color:#333;text-decoration:none;font-weight:500;font-size:16px;transition:all .3s ease;position:relative;padding:8px 0}.nav-link[_ngcontent-%COMP%]:hover{color:#007bff;transform:translateY(-2px)}.nav-link[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:0;height:2px;background:#007bff;transition:width .3s ease}.nav-link[_ngcontent-%COMP%]:hover:after{width:100%}.search-container[_ngcontent-%COMP%]{flex:1;max-width:400px;margin:0 20px}.search-box[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;background:#fff3;border-radius:25px;padding:8px 16px;border:1px solid rgba(255,255,255,.3);transition:all .3s ease}.search-box[_ngcontent-%COMP%]:focus-within{background:#ffffff4d;border-color:#007bff;box-shadow:0 0 0 3px #007bff1a}.search-icon[_ngcontent-%COMP%]{color:#666;margin-right:8px;flex-shrink:0}.search-input[_ngcontent-%COMP%]{background:transparent;border:none;outline:none;color:#333;font-size:14px;width:100%}.search-input[_ngcontent-%COMP%]::placeholder{color:#999}.navbar-auth[_ngcontent-%COMP%]{display:flex;align-items:center}.auth-link[_ngcontent-%COMP%]{color:#333;padding:8px;border-radius:50%;transition:all .3s ease;display:flex;align-items:center;justify-content:center}.auth-link[_ngcontent-%COMP%]:hover{background:#007bff1a;color:#007bff;transform:scale(1.1)}.mobile-menu-btn[_ngcontent-%COMP%]{display:none;flex-direction:column;cursor:pointer;padding:8px;gap:4px}.mobile-menu-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:25px;height:3px;background:#333;border-radius:2px;transition:all .3s ease}.mobile-menu-btn[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{background:#007bff}.mobile-menu[_ngcontent-%COMP%]{display:none;position:absolute;top:100%;left:0;right:0;background:#fffffff2;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-top:1px solid rgba(255,255,255,.2);padding:20px;transform:translateY(-100%);opacity:0;transition:all .3s ease}.mobile-menu.active[_ngcontent-%COMP%]{transform:translateY(0);opacity:1}.mobile-nav-link[_ngcontent-%COMP%]{display:block;color:#333;text-decoration:none;padding:12px 0;font-size:16px;font-weight:500;border-bottom:1px solid rgba(0,0,0,.1);transition:color .3s ease}.mobile-nav-link[_ngcontent-%COMP%]:hover{color:#007bff}.mobile-nav-link[_ngcontent-%COMP%]:last-child{border-bottom:none}@media (max-width: 768px){.navbar-nav[_ngcontent-%COMP%], .search-container[_ngcontent-%COMP%]{display:none}.mobile-menu-btn[_ngcontent-%COMP%]{display:flex}.mobile-menu[_ngcontent-%COMP%]{display:block}.navbar-container[_ngcontent-%COMP%]{padding:0 15px}}@media (max-width: 480px){.navbar-container[_ngcontent-%COMP%]{height:60px}.logo-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:28px;height:28px}}.mobile-menu-btn.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){transform:rotate(45deg) translate(6px,6px)}.mobile-menu-btn.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){opacity:0}.mobile-menu-btn.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){transform:rotate(-45deg) translate(6px,-6px)}']})};var Su=class n{constructor(e){this.msalService=e;this.msalService.initialize()}static \u0275fac=function(t){return new(t||n)(Fe(Fa))};static \u0275cmp=mt({type:n,selectors:[["html-app"]],decls:3,vars:0,consts:[[1,"main-content"]],template:function(t,r){t&1&&(st(0,"app-navbar"),te(1,"div",0),st(2,"router-outlet"),ee())},dependencies:[ol,Cp],styles:[".main-content[_ngcontent-%COMP%]{padding-top:70px;min-height:calc(100vh - 70px)}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0;padding:0}@media (max-width: 480px){.main-content[_ngcontent-%COMP%]{padding-top:60px}}"]})};function v0(){return new Promise((n,e)=>{if(window.google&&window.google.maps){n();return}let t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCRQWonRBlilzJNvnyyFKaXmgn54yCL5EY&libraries=marker&language=es&region=CL",t.async=!0,t.defer=!0,t.onload=()=>{console.log("Google Maps cargado exitosamente"),n()},t.onerror=()=>{console.error("Error al cargar Google Maps"),e(new Error("Failed to load Google Maps"))},document.head.appendChild(t)})}v0().then(()=>(console.log("Inicializando aplicaci\xF3n..."),Ch(Su,BC))).catch(n=>(console.error("Error:",n),Ch(Su,BC))).catch(n=>console.error("Error al inicializar la aplicaci\xF3n:",n));
